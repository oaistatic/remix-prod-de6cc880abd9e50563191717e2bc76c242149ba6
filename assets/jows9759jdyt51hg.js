const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/g5whi059640ky5td.js","assets/khl8ktun31iepecq.js","assets/n4exq6o15ap1g74l.js","assets/haannt40upmuwmtk.js","assets/root-eulobrch.css","assets/conversation-small-bh1estgu.css","assets/eiq9v0oy1lyfg3c8.js","assets/dblaaxd78ezocyc0.js","assets/nmmps6i5oss3h0db.js","assets/i3axmsntxbz0hz1f.js","assets/kw97lv1qq6sjlhnf.js","assets/BusinessesMap-alw4dhxd.css"])))=>i.map(i=>d[i]);
import{j as r,r as p,e as M,M as k,R as Ye,w as Js,u as ss,b as Qs,d as pe,g as ns,p as be,n as rs,a9 as ct,a8 as lt}from"./khl8ktun31iepecq.js";import{wI as en,wJ as we,wK as tn,aK as z,ac as qe,hn as re,gt as sn,my as nn,ce as rn,wL as an,cb as ae,cu as ve,ct as on,wM as cn,iS as ln,wN as dn,aQ as un,gn as hn,ro as fn,aO as mn,jm as as,ht as pn,hs as gn,hJ as xn,eM as yn,wO as bn,wP as _b,wQ as jb,wR as $b,M as os,L as Y,wS as Nb,wT as kb,wU as dt,wx as wn,wV as X,ww as vn,wW as _n,wX as jn,c1 as ge,wY as $n,wZ as Nn,w_ as kn,da as Cn,g_ as Sn,gx as is,gy as cs,af as Ge,R as _e,w$ as Tn,ir as ut,am as Mn,f2 as Pn,f1 as Dn,h1 as A,x0 as En,gc as An,qD as Ln,cD as In,jn as Fn,x1 as Rn,E as On,eY as Hn,x2 as zn}from"./n4exq6o15ap1g74l.js";import{a as j,P as I,cW as Un,cH as K,dF as ee,D as Ve,m as Bn,I as Ze,dc as Wn,d7 as Yn,as as qn,at as Gn,cI as Vn,aH as Zn,aG as Ke,R as Kn,aP as Xn,cq as ls,aj as Xe,F as Ae,ak as Jn,hZ as ds,bF as Qn,ei as er,cm as tr,bL as xe,cr as oe,o as sr,V as nr,cX as rr,ae as ar,d3 as or,g_ as us,b_ as ir,d6 as cr,di as lr,h4 as dr,bX as hs,e9 as ur,cF as hr,co as fr,cp as mr,b$ as fs,e3 as pr,dP as gr}from"./haannt40upmuwmtk.js";import{b as ms,u as ps}from"./kw97lv1qq6sjlhnf.js";import{s as V,g as ht,r as xr,b as yr,c as br,d as wr,e as vr,C as _r,i as jr}from"./oyqlb501dhlk5b61.js";import{u as $r,b as Nr}from"./i3axmsntxbz0hz1f.js";import{g as kr,t as Cr,b as Le,I as Sr,d as Tr}from"./dryvpx92fe6zevra.js";import{r as gs,a as Mr,b as Pr,d as Dr}from"./ici1r2pdfnai9c6r.js";import{S as Er}from"./cv6si9v270pdl3vk.js";import{a as Ar,b as Lr}from"./dlwdwnl197lh1mf5.js";import{w as Je,s as Qe,f as xs,a as Ir,h as ys,p as ft,n as mt,d as Fr,M as et,r as Rr}from"./ougcm9i7phfim0kn.js";import{k as pt}from"./pc2givv05uuq8g6l.js";import{P as te}from"./dblaaxd78ezocyc0.js";import{v as gt,C as Or,A as Hr,a as zr,L as Ur,B as Br,p as Wr,b as Yr,n as qr,P as Gr,o as Vr,q as Zr,e as Kr}from"./gna4hr6ugwtsnaih.js";import{N as xt}from"./iuzjvviw85b4ghdw.js";import{b as Xr,a as Jr,c as Qr}from"./eiq9v0oy1lyfg3c8.js";import{c as bs}from"./ctjt1fjp3mtlelcg.js";import{u as ea}from"./mr4t2sawqo9d3nrg.js";import{r as ta}from"./b9iv65ef6it0bnl8.js";const sa=bs("ChevronDownFilled","1em",["M15.8 7.73c.28.3.27.78-.03 1.06l-5.25 5a.75.75 0 0 1-1.04 0l-5.25-5a.75.75 0 0 1 1.04-1.08L10 12.2l4.73-4.5a.75.75 0 0 1 1.06.02Z"]),na=bs("ChevronLeftFilled","1em",["M12.27 15.8a.75.75 0 0 1-1.06-.03l-5-5.25a.75.75 0 0 1 0-1.04l5-5.25a.75.75 0 1 1 1.08 1.04L7.8 10l4.5 4.73c.29.3.28.78-.02 1.06Z"]),yt=({children:e,"data-start":t=null,"data-end":s=null,"data-is-last-node":n,"data-is-only-node":a,tag:o})=>{const{animationTiming:i,shouldAnimate:c,shouldHide:d,isDisabled:l,onComplete:h,onReady:m}=en({isMarker:!0,tag:o,children:e,start:t,end:s,isLastNode:n,isOnlyNode:a});return l||d?r.jsx(o,{"data-start":t,"data-end":s,className:j(d&&"hidden"),children:e}):r.jsx(o,{"data-start":t,"data-end":s,className:j(we.marker,c?we.animate:we.hidden),onAnimationStart:()=>m(0),onAnimationEnd:()=>h(0),style:tn(i),children:e})},ra={p:e=>r.jsx(z,{tag:"p",...e}),h1:e=>r.jsx(z,{tag:"h1",...e}),h2:e=>r.jsx(z,{tag:"h2",...e}),h3:e=>r.jsx(z,{tag:"h3",...e}),h4:e=>r.jsx(z,{tag:"h4",...e}),h5:e=>r.jsx(z,{tag:"h5",...e}),h6:e=>r.jsx(z,{tag:"h6",...e}),li:e=>r.jsx(yt,{tag:"li",isListItem:!0,...e}),hr:e=>r.jsx(yt,{tag:"hr",...e})};function aa({closeModal:e,url:t,onAction:s,onActionAborted:n}){const a=p.useRef(!1),o=M();p.useEffect(()=>{I.logEventWithStatsig("Safe Link Warning Modal Shown","chatgpt_safe_link_warning_modal_shown")},[]);const i=async()=>{a.current=!0;try{await navigator.clipboard.writeText(t),I.logEventWithStatsig("Safe Link Warning Modal Copy Clicked","chatgpt_safe_link_warning_modal_copy_clicked")}catch(x){Ve.addError(x)}s?.("copy"),e()},c=()=>{a.current=!0,I.logEventWithStatsig("Safe Link Warning Modal Open Clicked","chatgpt_safe_link_warning_modal_open_clicked"),s?.("open"),e()},d=()=>{a.current||(I.logEventWithStatsig("Safe Link Warning Modal Canceled","chatgpt_safe_link_warning_modal_canceled"),n?.()),a.current=!1,e()};let l="",h=t,m="";try{h=new URL(t).hostname;const y=t.indexOf(h);y!==-1&&(l=t.substring(0,y),m=t.substring(y+h.length))}catch{}return r.jsxs(Un,{testId:"modal-safe-link-warning",isOpen:!0,hideSeparator:!0,onClose:d,showCloseButton:!0,type:"warning",title:r.jsx("div",{className:"flex items-center gap-2",children:o.formatMessage({id:"dTWOFM",defaultMessage:"This link may be unsafe"})}),primaryButton:r.jsx(K,{as:"link",openNewTab:!0,rel:"noopener noreferer",color:"primary",onClick:c,to:t,children:o.formatMessage({id:"gMzmDW",defaultMessage:"Open link"})}),secondaryButton:r.jsx(ee.Button,{title:o.formatMessage({id:"YGLt71",defaultMessage:"Copy link"}),color:"secondary",onClick:i}),children:[r.jsxs("p",{className:"-mt-4 mb-6 text-sm text-pretty sm:-mt-7",children:[r.jsx(k,{id:"rhdsFP",defaultMessage:"This website may access your conversation data. Preview these links before proceeding."}),r.jsx("a",{className:"can-hover:hover:text-token-link-hover ps-1 underline underline-offset-1",href:"https://help.openai.com/en/articles/10984597-chatgpt-generated-links",target:"_blank",rel:"noopener noreferrer",children:r.jsx(k,{id:"xNvPsR",defaultMessage:"Learn more"})})]}),r.jsxs("div",{className:"mb-2 font-mono text-sm break-all",children:[r.jsx("span",{className:"text-token-text-secondary",children:l}),r.jsx("span",{className:"text-token-text-primary font-bold",children:h}),r.jsx("span",{className:"text-token-text-secondary",children:m})]})]})}const bt={},wt={},vt={};function _t(e,t){return`${e}::${t}`}function tt({node:e,onClick:t,children:s,clientThreadId:n,messageId:a,href:o,disableSafeURLs:i,...c}){let d=t;const l=e?.properties?.href,h=qe(),m=p.useContext(re),x=Bn(),y=Ze(n),g=ms(y,o,m?.useSafeUrls&&!i),w=Wn(x,"387775177"),u=!i&&g===void 0&&w.get("enable-copy-and-open",!1);return a!=null&&typeof l=="string"&&l.includes("/bing/redirect")&&(bt[a]||(I.logEvent("Browsing Show Bing Link",{id:a,content:l}),bt[a]=!0),d=$=>{wt[a]||(I.logEvent("Browsing Click Bing Link",{id:a,content:l}),wt[a]=!0),t?.($)}),d=$=>{const _=""+l;if(a&&!vt[_t(a,_)]){const C=g||u?"URL Clicked Allowed":"URL Clicked Blocked";I.logEvent(C,{id:a,content:_}),vt[_t(a,_)]=!0}t?.($),u&&o&&Yn(x,({closeModal:C})=>r.jsx(aa,{url:o,closeModal:C}))},r.jsx(r.Fragment,{children:r.jsx("a",{onClick:d,...c,className:j(c.className,u&&"cursor-pointer"),href:g,rel:h?"noopener noreferrer":"noopener",children:s})})}const ws="w";function oa({messageId:e,clientThreadId:t,text:s,children:n,...a}){const o=sn(t),i=nn(),c=rn(t),l=`${window.location.origin}?q=${encodeURIComponent(s)}`,h=p.useCallback(async m=>{m.preventDefault(),qn.count(Gn.DEFAULT,"instant_follow_up_anchor_clicked"),I.logEventWithStatsig("Instant Follow Up Anchor Clicked","chatgpt_instant_follow_up_anchor_clicked",{clientThreadId:t,messageId:e}),o({sourceEvent:m,promptMessage:Vn(s),completionMetadata:{systemHints:[...i],conversationMode:c??{kind:Zn.PrimaryAssistant}}})},[t,c,e,i,o,s]);return r.jsx(tt,{...a,href:l,disableSafeURLs:!0,clientThreadId:t,messageId:e,className:"cursor-pointer",onClick:h,children:n})}const ia=Ye.memo(oa);function ca({messageId:e,clientThreadId:t,text:s,children:n,...a}){const{value:o}=Ke("374768818");return o?r.jsx(ia,{messageId:e,clientThreadId:t,text:s,children:n,...a}):r.jsx(tt,{messageId:e,clientThreadId:t,children:n,...a})}const la=Ye.memo(ca);function da(e){const t=e.split(`
`),s=ua(t.pop()).trimEnd();return s&&t.push(s),t.join(`
`)}function ua(e){if(!e||/^\s*-\s*([*_]+)?\s*$/.test(e))return"";let t=[],s="",n=0;for(;n<e.length;){if(e[n]==="*"&&e[n+1]==="*"){s+="**",t.length&&t[t.length-1]==="**"?t.pop():t.push("**"),n+=2;continue}if(e[n]==="*"||e[n]==="_"){s+=e[n];const o=e[n];t.length&&t[t.length-1]===o?t.pop():t.push(o),n++;continue}s+=e[n],n++}if(t.length===0)return e;let a=s.trimEnd();for(;t.length;){const o=t.pop();if(o==null)break;a.endsWith(o)?a=a.slice(0,-o.length).trimEnd():a+=o}return a}const ha=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],jt={}.hasOwnProperty;function fa(e,t){const s=t||{};function n(a,...o){let i=n.invalid;const c=n.handlers;if(a&&jt.call(a,e)){const d=String(a[e]);i=jt.call(c,d)?c[d]:n.unknown}if(i)return i.call(this,a,...o)}return n.handlers=s.handlers||{},n.invalid=s.invalid,n.unknown=s.unknown,n}const ma=/^>|^->|<!--|-->|--!>|<!-$/g,pa=[">"],ga=["<",">"];function xa(e,t,s,n){return n.settings.bogusComments?"<?"+V(e.value,Object.assign({},n.settings.characterReferences,{subset:pa}))+">":"<!--"+e.value.replace(ma,a)+"-->";function a(o){return V(o,Object.assign({},n.settings.characterReferences,{subset:ga}))}}function ya(e,t,s,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}const P=_s(1),vs=_s(-1),ba=[];function _s(e){return t;function t(s,n,a){const o=s?s.children:ba;let i=(n||0)+e,c=o[i];if(!a)for(;c&&Je(c);)i+=e,c=o[i];return c}}const wa={}.hasOwnProperty;function js(e){return t;function t(s,n,a){return wa.call(e,s.tagName)&&e[s.tagName](s,n,a)}}const st=js({body:_a,caption:je,colgroup:je,dd:ka,dt:Na,head:je,html:va,li:$a,optgroup:Ca,option:Sa,p:ja,rp:$t,rt:$t,tbody:Ma,td:Nt,tfoot:Pa,th:Nt,thead:Ta,tr:Da});function je(e,t,s){const n=P(s,t,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&Je(n.value.charAt(0)))}function va(e,t,s){const n=P(s,t);return!n||n.type!=="comment"}function _a(e,t,s){const n=P(s,t);return!n||n.type!=="comment"}function ja(e,t,s){const n=P(s,t);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!s||!(s.type==="element"&&(s.tagName==="a"||s.tagName==="audio"||s.tagName==="del"||s.tagName==="ins"||s.tagName==="map"||s.tagName==="noscript"||s.tagName==="video"))}function $a(e,t,s){const n=P(s,t);return!n||n.type==="element"&&n.tagName==="li"}function Na(e,t,s){const n=P(s,t);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function ka(e,t,s){const n=P(s,t);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function $t(e,t,s){const n=P(s,t);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function Ca(e,t,s){const n=P(s,t);return!n||n.type==="element"&&n.tagName==="optgroup"}function Sa(e,t,s){const n=P(s,t);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function Ta(e,t,s){const n=P(s,t);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function Ma(e,t,s){const n=P(s,t);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function Pa(e,t,s){return!P(s,t)}function Da(e,t,s){const n=P(s,t);return!n||n.type==="element"&&n.tagName==="tr"}function Nt(e,t,s){const n=P(s,t);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}const Ea=js({body:Ia,colgroup:Fa,head:La,html:Aa,tbody:Ra});function Aa(e){const t=P(e,-1);return!t||t.type!=="comment"}function La(e){const t=new Set;for(const n of e.children)if(n.type==="element"&&(n.tagName==="base"||n.tagName==="title")){if(t.has(n.tagName))return!1;t.add(n.tagName)}const s=e.children[0];return!s||s.type==="element"}function Ia(e){const t=P(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&Je(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function Fa(e,t,s){const n=vs(s,t),a=P(e,-1,!0);return s&&n&&n.type==="element"&&n.tagName==="colgroup"&&st(n,s.children.indexOf(n),s)?!1:!!(a&&a.type==="element"&&a.tagName==="col")}function Ra(e,t,s){const n=vs(s,t),a=P(e,-1);return s&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&st(n,s.children.indexOf(n),s)?!1:!!(a&&a.type==="element"&&a.tagName==="tr")}const ie={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Oa(e,t,s,n){const a=n.schema,o=a.space==="svg"?!1:n.settings.omitOptionalTags;let i=a.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(e.tagName.toLowerCase());const c=[];let d;a.space==="html"&&e.tagName==="svg"&&(n.schema=Qe);const l=Ha(n,e.properties),h=n.all(a.space==="html"&&e.tagName==="template"?e.content:e);return n.schema=a,h&&(i=!1),(l||!o||!Ea(e,t,s))&&(c.push("<",e.tagName,l?" "+l:""),i&&(a.space==="svg"||n.settings.closeSelfClosing)&&(d=l.charAt(l.length-1),(!n.settings.tightSelfClosing||d==="/"||d&&d!=='"'&&d!=="'")&&c.push(" "),c.push("/")),c.push(">")),c.push(h),!i&&(!o||!st(e,t,s))&&c.push("</"+e.tagName+">"),c.join("")}function Ha(e,t){const s=[];let n=-1,a;if(t){for(a in t)if(t[a]!==null&&t[a]!==void 0){const o=za(e,a,t[a]);o&&s.push(o)}}for(;++n<s.length;){const o=e.settings.tightAttributes?s[n].charAt(s[n].length-1):void 0;n!==s.length-1&&o!=='"'&&o!=="'"&&(s[n]+=" ")}return s.join("")}function za(e,t,s){const n=xs(e.schema,t),a=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,o=e.settings.allowDangerousCharacters?0:1;let i=e.quote,c;if(n.overloadedBoolean&&(s===n.attribute||s==="")?s=!0:(n.boolean||n.overloadedBoolean&&typeof s!="string")&&(s=!!s),s==null||s===!1||typeof s=="number"&&Number.isNaN(s))return"";const d=V(n.attribute,Object.assign({},e.settings.characterReferences,{subset:ie.name[a][o]}));return s===!0||(s=Array.isArray(s)?(n.commaSeparated?Ir:an)(s,{padLeft:!e.settings.tightCommaSeparatedLists}):String(s),e.settings.collapseEmptyAttributes&&!s)?d:(e.settings.preferUnquoted&&(c=V(s,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:ie.unquoted[a][o]}))),c!==s&&(e.settings.quoteSmart&&ht(s,i)>ht(s,e.alternative)&&(i=e.alternative),c=i+V(s,Object.assign({},e.settings.characterReferences,{subset:(i==="'"?ie.single:ie.double)[a][o],attribute:!0}))+i),d+(c&&"="+c))}const Ua=["<","&"];function $s(e,t,s,n){return s&&s.type==="element"&&(s.tagName==="script"||s.tagName==="style")?e.value:V(e.value,Object.assign({},n.settings.characterReferences,{subset:Ua}))}function Ba(e,t,s,n){return n.settings.allowDangerousHtml?e.value:$s(e,t,s,n)}function Wa(e,t,s,n){return n.all(e)}const Ya=fa("type",{invalid:qa,unknown:Ga,handlers:{comment:xa,doctype:ya,element:Oa,raw:Ba,root:Wa,text:$s}});function qa(e){throw new Error("Expected node, not `"+e+"`")}function Ga(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const Va={},Za={},Ka=[];function Xa(e,t){const s=t||Va,n=s.quote||'"',a=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:Ja,all:Qa,settings:{omitOptionalTags:s.omitOptionalTags||!1,allowParseErrors:s.allowParseErrors||!1,allowDangerousCharacters:s.allowDangerousCharacters||!1,quoteSmart:s.quoteSmart||!1,preferUnquoted:s.preferUnquoted||!1,tightAttributes:s.tightAttributes||!1,upperDoctype:s.upperDoctype||!1,tightDoctype:s.tightDoctype||!1,bogusComments:s.bogusComments||!1,tightCommaSeparatedLists:s.tightCommaSeparatedLists||!1,tightSelfClosing:s.tightSelfClosing||!1,collapseEmptyAttributes:s.collapseEmptyAttributes||!1,allowDangerousHtml:s.allowDangerousHtml||!1,voids:s.voids||ha,characterReferences:s.characterReferences||Za,closeSelfClosing:s.closeSelfClosing||!1,closeEmptyElements:s.closeEmptyElements||!1},schema:s.space==="svg"?Qe:ys,quote:n,alternative:a}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Ja(e,t,s){return Ya(e,t,s,this)}function Qa(e){const t=[],s=e&&e.children||Ka;let n=-1;for(;++n<s.length;)t[n]=this.one(s[n],n,e);return t.join("")}function eo(e){const t=this,s={...t.data("settings"),...e};t.compiler=n;function n(a){return Xa(a,s)}}function to(e){return e&&/^turn[0-9]+ifs[0-9]+$/.test(e)}const so=4;function no({metadata:e,analyticsMetadata:t,trackContentReferenceEvent:s}){const n=ae(),a=e.images,o=a.some(h=>h.is_proxied_image)?[]:a.map(h=>h.thumbnail_url),i=Js({queries:o.map(h=>kr(h)),combine:h=>{const m=new Set;return h.forEach((x,y)=>{x.isSuccess&&m.add(o[y])}),m}}),c=a.filter(h=>i.has(h.thumbnail_url)),d=e.images.length;if(a.some(h=>h.is_proxied_image)){const h=a.find(x=>x.is_proxied_image),m=j("mb-7 mt-1 min-w-32 max-w-[22%] rounded-xl border-[0.5px] border-token-border-default",h?.float_top?"relative block":"float-image z-10 float-end clear-end ms-7 overflow-hidden");return r.jsx($e,{image:h,imageSource:ve.Turn,analyticsMetadata:t,trackContentReferenceEvent:s,className:m},h?.content_url)}if(d===0)return null;if(d===1){const h=e.images[0];return r.jsx($e,{image:h,imageSource:ve.Turn,analyticsMetadata:t,trackContentReferenceEvent:s,className:"float-image border-token-border-default z-10 float-end clear-end ms-7 mt-1 mb-7 max-w-[22%] min-w-32 overflow-hidden rounded-xl border-[0.5px]"},h.content_url)}const l=n?c.length:Math.min(c.length,so);return r.jsx("div",{className:"no-scrollbar mt-1 mb-6 flex min-h-36 flex-nowrap gap-0.5 overflow-auto sm:gap-1 sm:overflow-hidden xl:min-h-44",children:c.slice(0,l).map((h,m)=>r.jsx("div",{className:j("border-token-border-default relative aspect-square max-h-48 w-32 shrink-0 overflow-hidden rounded-xl border-[0.5px] sm:w-[calc((100%-1rem)/4)] md:shrink",m===0&&"rounded-s-xl",m===l-1&&"rounded-e-xl"),children:r.jsx($e,{image:h,imageSource:ve.Turn,analyticsMetadata:t,trackContentReferenceEvent:s,className:"h-full w-full"},h.thumbnail_url)},h.thumbnail_url))})}const Ns=p.memo(no,(e,t)=>e.numImageResults===t.numImageResults&&e.analyticsMetadata===t.analyticsMetadata&&e.trackContentReferenceEvent===t.trackContentReferenceEvent&&e.metadata.images.length===t.metadata.images.length&&e.metadata.images.every((s,n)=>s.content_url===t.metadata.images[n].content_url));function ro(e,t){if(!e||!t)return null;const{width:s,height:n}=t;if(s===n)return null;const{center_x_percent:a,center_y_percent:o}=e;let i=50,c=50;if(n>s){const d=n-s;c=(o*n-s/2)/d*100,i=50}else{const d=s-n;i=(a*s-n/2)/d*100,c=50}return`${i.toFixed(1)}% ${c.toFixed(1)}%`}function $e({image:e,imageSource:t,className:s,imgClassName:n,style:a,analyticsMetadata:o,trackContentReferenceEvent:i}){const c=Cr(e),d=e?.content_url.replace(/^http:\/\//,"https://"),l=ao(e),{isSuccess:h}=Le(c),{isSuccess:m}=Le(l?d:void 0),x=p.useMemo(()=>({image_url:c,title:e?.title}),[c,e?.title]);p.useEffect(()=>{e&&h&&i("Search Content Reference Shown","search_content_reference_shown","image_v2",x)},[i,e,h,x]);const y=on.useStore(),g=ro(e?.thumbnail_crop_info??null,e?.thumbnail_size??null),w=!e||!(h||m||e.is_proxied_image),u=(()=>{if(!w)return e.is_proxied_image?e.url:l&&m?d:c})();return r.jsx("button",{className:j("relative aspect-square overflow-hidden",s),style:a,onClick:()=>{i("Search Content Reference Clicked","search_content_reference_clicked","image_v2",x),y.setCurrentImage(e?{image:e,source:t,analyticsMetadata:o}:void 0)},children:w?r.jsx("div",{className:"bg-token-main-surface-tertiary aspect-square h-full w-full animate-pulse"}):r.jsx(Sr,{children:r.jsx("img",{src:u,alt:e?.content_url,style:g?{objectPosition:g}:{},className:j("bg-token-main-surface-tertiary m-0 h-full w-full object-cover",n)})})})}function ao(e){return!e||e.is_proxied_image?!1:e.thumbnail_url.includes("images.openai.com/thumbnails")}async function oo({conversationId:e,messageId:t,assetPointerLinks:s,sharedConversationLikeId:n}){return await Kn.safePost("/conversation/get_images_for_message",{requestBody:{conversation_id:e??null,share_id:n??null,message_id:t,asset_pointer_links:s},authOption:Xn.SendIfAvailable})}function io({reference:e,conversationId:t,messageId:s,sharedConversationLikeId:n}){return ss({queryKey:["inline-images",e,t,s],queryFn:async()=>{if(!e.asset_pointer_links||e.asset_pointer_links.length===0||!t&&!n)return{images:[],formats:[]};const a=await oo({conversationId:t,messageId:s,assetPointerLinks:e.asset_pointer_links,sharedConversationLikeId:n});for(let o=0;o<a.images.length;o++){const i=a.images[o],d=`image/${a.formats[o]}`,l=co(i,d);a.images[o]=l}return a}})}function co(e,t="",s=512){const n=atob(e),a=[];for(let i=0;i<n.length;i+=s){const c=n.slice(i,i+s),d=new Array(c.length);for(let h=0;h<c.length;h++)d[h]=c.charCodeAt(h);const l=new Uint8Array(d);a.push(l)}const o=new Blob(a,{type:t});return URL.createObjectURL(o)}const lo=200;function uo({reference:e,clientThreadId:t,message:s,trackContentReferenceEvent:n}){const a=Ze(t),{sharedDeepresearchId:o}=p.useContext(Er),{data:i,isLoading:c,isError:d,error:l}=io({reference:e,conversationId:a,messageId:s.id,sharedConversationLikeId:o}),h=p.useRef([]);if(p.useEffect(()=>()=>{h.current.forEach(y=>{URL.revokeObjectURL(y)}),h.current=[]},[]),c||d||l||!i||!("images"in i))return null;h.current=[];const m=(y,g)=>{const w=new RegExp(g+"\\s*([^\\n]+)","m"),u=y.match(w);return u&&u[1]?u[1].trim().length:0};let x=-1;return s.content.content_type==="text"&&(x=m(s.content.parts.join(""),e.matched_text)),r.jsx(r.Fragment,{children:i?.images.map((y,g)=>{const w={matched_text:e.matched_text,start_idx:e.start_idx,end_idx:e.end_idx,safe_urls:e.safe_urls,alt:e.alt,prompt_text:e.prompt_text,type:"image_v2",images:[{url:y,content_url:e.clicked_from_url??"",thumbnail_url:y,title:e.clicked_from_title??"",content_size:{width:141,height:143},thumbnail_size:{width:141,height:143},is_proxied_image:!0,float_top:x<lo||x===-1}]};return r.jsx(Ns,{metadata:w,analyticsMetadata:{clientThreadId:t,messageId:s.id},numImageResults:1,trackContentReferenceEvent:n},`image-carousel-inline-${g}`)})})}function ho({contentReference:e,clientThreadId:t,messageId:s,turnIndex:n,trackContentReferenceEvent:a}){const o=p.useCallback(()=>a("Search Content Reference Shown","search_content_reference_shown","product_entity",{content_reference_start_index:e.start_idx,product_id:e.product.id}),[a,e.start_idx,e.product.id]),i=p.useCallback(()=>a("Search Content Reference Clicked","search_content_reference_clicked","product_entity",{content_reference_start_index:e.start_idx,product_id:e.product.id}),[a,e.start_idx,e.product.id]);p.useEffect(()=>o(),[o]);const{openThreadSidebar:c}=ls(),d=e.product;return r.jsxs("span",{className:"decoration-token-text-secondary inline align-baseline underline decoration-[4%] underline-offset-[16%] [text-decoration-skip-ink:auto] [text-underline-position:from-font] hover:cursor-pointer",onClick:()=>{if(i(),d.offers){if(!t)return;c({type:"product",clientThreadId:t,messageId:s,turnIndex:n,contentReferenceStartIndex:e.start_idx,productIndex:0})}else window.open(d.url,"_blank")},children:[r.jsx(cn,{className:"text-token-text-tertiary me-0.5 inline h-[1em] w-[1em] align-[-0.2em]"}),r.jsx("span",{className:"whitespace-normal",children:d.title})]})}function fo({product:e,wide:t,onShown:s,onClick:n,onHover:a,showDebug:o=!1}){const i=e.image_urls?e.image_urls[0]:void 0,c=p.useRef(null),[d,l]=p.useState("contain"),h=p.useRef(null);return p.useEffect(()=>{if(!c.current)return;const m=new IntersectionObserver(([x])=>x.isIntersecting&&s(),{threshold:.5});return m.observe(c.current),()=>m.disconnect()},[]),r.jsxs("div",{ref:c,className:j(t?"flex w-full flex-row":"flex h-full flex-col","bg-token-main-surface-primary cursor-pointer overflow-hidden rounded-xl","border-token-border-default hover:border-token-border-xlight border bg-clip-padding hover:shadow-md","transition-all duration-200"),onClick:n,onMouseEnter:()=>c.current&&a(c.current),onMouseLeave:()=>a(null),children:[r.jsxs("div",{className:j("relative aspect-square",t?"w-1/3":"w-full","bg-token-main-surface-secondary dark:bg-token-main-surface-primary-inverse"),children:[i?r.jsx("img",{ref:h,className:`absolute inset-0 m-0 h-full w-full mix-blend-darken object-${d}`,src:i,alt:e.title,onLoad:()=>{if(!h.current)return;const{naturalWidth:m,naturalHeight:x}=h.current,y=m/x;l(Math.abs(y-1)<.25?"cover":"contain")}}):r.jsx("div",{className:"flex aspect-square items-center justify-center",children:r.jsx(ln,{className:"text-token-text-tertiary h-12 w-12"})}),e.featured_tag&&r.jsx("div",{className:"absolute start-3 end-3 bottom-3",children:r.jsxs("div",{className:"relative max-w-fit px-2 py-1",children:[r.jsx("div",{className:"absolute inset-0 rounded-full bg-white/60 backdrop-blur-xl"}),r.jsx("div",{className:"relative truncate text-xs font-semibold text-gray-950",children:e.featured_tag})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[r.jsx("div",{className:"line-clamp-2 leading-snug font-semibold text-ellipsis",children:e.title}),e.description&&r.jsx("div",{className:"line-clamp-3 pt-3 text-sm text-ellipsis",children:e.description}),r.jsx("div",{className:"flex-1"}),r.jsxs("div",{className:"flex flex-row items-end pt-3",children:[r.jsxs("div",{className:"flex flex-col overflow-hidden",children:[r.jsx("div",{className:"text-md leading-snug font-semibold",children:e.price}),r.jsx("div",{className:"text-token-text-secondary overflow-hidden pt-0.5 text-xs text-ellipsis whitespace-nowrap",children:e.merchants})]}),r.jsx("div",{className:"flex-1"}),e.num_reviews&&e.num_reviews>0&&r.jsxs("div",{className:"text-token-text-secondary flex w-fit flex-row gap-1 text-sm",children:[r.jsx(dn,{rating:e.rating??0/5}),(e.rating??0).toFixed(1)]})]})]}),o&&r.jsxs("div",{className:"text-token-text-secondary flex flex-col gap-1 p-2 text-xs",children:[r.jsx("div",{className:"text-red-500",children:"Debug"}),r.jsxs("div",{children:[r.jsxs("div",{children:["Source: ",r.jsx("b",{children:e.provider})]}),r.jsxs("div",{children:["Metadata Provider: ",r.jsx("b",{children:e.query})]})]})]})]})}const O={TTFP:"products.ttfp",TTLT:"products.ttlt",TTF_VISIBLE_CONTENT_TOKEN:"products.ttf_visible_content_token"},nt={[O.TTFP]:new Set,[O.TTLT]:new Set,[O.TTF_VISIBLE_CONTENT_TOKEN]:new Set};function Ne({profiler:e,messageId:t,metric:s,overrideDurationMs:n}){nt[s].add(t);const a=hn();e.logTiming(s,{context:{eval_preset:a.eval_preset},overrideDurationMs:n})}function ke({messageId:e,metric:t}){return nt[t].has(e)}function mo({namespace:e,clientThreadId:t}){"use forget";const s=p.useRef(null),n=Xe(t,o=>Ae.getRequestId(o)),a=ps(n);return p.useEffect(()=>{if(n&&n!==a.current){const o=ds(n);o&&(s.current=fn({namespace:e,opts:{debug:!1}}),s.current.reset(o.turnTracker.start_time_ms))}},[n,a,e]),{profiler:s.current}}function po({clientThreadId:e,messageId:t,products:s}){"use forget";const[n,a]=Xe(e,l=>[Ae.getCurrentLeafId(l),Ae.getRequestId(l)]),{profiler:o}=mo({namespace:un.ProductsCompletionRequest,clientThreadId:e}),c=Jn(a)&&n===t,d=ps(c);p.useEffect(()=>{ke({messageId:t,metric:O.TTFP})||o&&c&&s.length>0&&Ne({profiler:o,messageId:t,metric:O.TTFP})},[c,t,s.length]),p.useEffect(()=>{ke({messageId:t,metric:O.TTLT})||d.current&&!c&&o&&Ne({profiler:o,messageId:t,metric:O.TTLT})},[t,d,c]),p.useEffect(()=>{if(!ke({messageId:t,metric:O.TTF_VISIBLE_CONTENT_TOKEN})&&o){const l=a?ds(a):null;if(l){const h=O.TTF_VISIBLE_CONTENT_TOKEN;nt[h].add(t),Ne({profiler:o,messageId:t,metric:h,overrideDurationMs:l.turnTracker.first_visible_content_token_lat})}}},[t,o,a,s.length])}function go({contentReference:e,clientThreadId:t,messageId:s,turnIndex:n,analyticsMetadata:a}){const o=e.products,i=e.target_product_count,{showDebugConversationTurns:c}=mn(),d=as(a),l=p.useCallback((S,D)=>d("Search Content Reference Shown","search_content_reference_shown","products",{content_reference_start_index:e.start_idx,product_index:D,product_id:S.id}),[d,e.start_idx]),h=p.useCallback((S,D)=>d("Search Content Reference Clicked","search_content_reference_clicked","products",{content_reference_start_index:e.start_idx,product_index:D,product_id:S.id}),[d,e.start_idx]);po({clientThreadId:t,messageId:s,products:o});const{openThreadSidebar:m}=ls(),x=p.useRef(null),[y,g]=p.useState(null),w=p.useRef(null),u=()=>{w.current=setTimeout(()=>{g(null),w.current=null},200)},$=()=>{w.current&&(clearTimeout(w.current),w.current=null)},_=p.useRef(null),[C,v]=p.useState({left:0,top:0});p.useEffect(()=>{const S=x.current,D=_.current;if(!y||!S||!D)return;const G=()=>{const it=y.card.getBoundingClientRect(),ye=S.getBoundingClientRect(),Ks=D.getBoundingClientRect(),Xs=it.bottom-ye.top+8;var J=it.left-ye.left;J=Math.max(0,J),J=Math.min(J,ye.width-Ks.width),v({left:J,top:Xs})};return G(),S.addEventListener("scroll",G),()=>S.removeEventListener("scroll",G)},[y,o]);const{setTargetedContent:b}=pn(),N=ae(),T=N?2:4;if(!i&&o.length<T)return null;const f=(i??o.length)>=T,L=f&&N;return r.jsxs("div",{className:"relative",children:[r.jsx("div",{ref:x,className:j("flex flex-row gap-4 py-2",L&&"mx-[-1rem] px-[1rem]",f&&"no-scrollbar snap-x snap-proximity scroll-ps-4 overflow-x-scroll scroll-smooth"),children:o.map((S,D)=>r.jsx("div",{className:j(f?"w-64 shrink-0 snap-start":"min-w-0 flex-1"),children:r.jsx(fo,{product:S,wide:!N&&i===1,onShown:()=>l(S,D),onClick:()=>{t&&(h(S,D),S.offers?m({type:"product",clientThreadId:t,messageId:s,turnIndex:n,contentReferenceStartIndex:e.start_idx,productIndex:D}):window.open(S.url,"_blank"))},onHover:G=>{$(),G?g({card:G,product:S,index:D}):u()},showDebug:c})},`${D}-${S.title}`))}),f&&!L&&r.jsx(xo,{scrollableRef:x,units:o.length}),r.jsx("div",{ref:_,className:j("absolute z-10",y?"translate-y-0 opacity-100":"translate-y-[-0.5rem] opacity-0","transition-[transform,opacity] duration-200"),style:C,onMouseEnter:$,onMouseLeave:u,children:r.jsx(yo,{onClick:()=>{y&&(I.logEventWithStatsig("Product Targeted Reply Clicked","product_targeted_reply_clicked",{...Qn(a),content_reference_start_index:e.start_idx,product_index:y.index,product_id:y.product.id}),b({type:"object",label:y.product.title,createNewCompletionParams:S=>{const D=er(y.product.title);return{...S,promptMessage:gn(S.promptMessage,{metadata:{targeted_reply:y.product.title,targeted_reply_label:y.product.title,targeted_reply_icon:"product_tag"}}),appendMessages:[...S.appendMessages??[],D]}},onCreateCompletion:({serverThreadId:S,currentLeafId:D})=>{I.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversation_id:S,current_leaf_id:D,source_message_id:s,content_reference_start_index:e.start_idx,product_index:y.index,product_id:y.product.id})},onCleared:({serverThreadId:S,currentLeafId:D})=>{I.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversation_id:S,current_leaf_id:D,source_message_id:s,content_reference_start_index:e.start_idx,product_index:y.index,product_id:y.product.id})}}))}})})]})}function xo({scrollableRef:e,units:t}){const[s,n]=p.useState({left:!1,right:!1});p.useEffect(()=>{const o=e.current;if(!o)return;const i=()=>{const{scrollLeft:c,scrollWidth:d,clientWidth:l}=o,h=c/(d-l);n({left:h>0,right:h<1})};return i(),o.addEventListener("scroll",i),()=>o.removeEventListener("scroll",i)},[e,t]);const a=o=>{if(!e.current)return;const{clientWidth:i,scrollWidth:c}=e.current,d=c/t,l=Math.floor(i/d)*d;e.current.scrollBy({left:l*o,behavior:"smooth"})};return r.jsxs("div",{className:"pointer-events-none absolute start-0 top-0 flex h-full w-full flex-row",children:[r.jsx("div",{className:j("flex h-full w-9 items-center justify-start","from-token-main-surface-primary bg-linear-to-r to-transparent",s.left?"opacity-100":"opacity-0","transition-opacity duration-200"),children:r.jsx(K,{color:"secondary",size:"xs",className:"border-token-border-default h-8 w-8 rounded-full",onClick:()=>a(-1),children:r.jsx(xn,{className:"icon-md"})})}),r.jsx("div",{className:j("ms-auto flex h-full w-9 items-center justify-end","from-token-main-surface-primary bg-linear-to-l to-transparent",s.right?"opacity-100":"opacity-0","transition-opacity duration-200"),children:r.jsx(K,{color:"secondary",size:"xs",className:"border-token-border-default h-8 w-8 rounded-full",onClick:()=>a(1),children:r.jsx(tr,{className:"icon-md"})})})]})}function yo({onClick:e}){return r.jsx(K,{className:"border-token-border-xlight bg-clip-padding px-4 py-2 shadow-md",size:"small",color:"secondary",onClick:e,children:r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(yn,{className:"text-token-text-secondary h-4 w-4"}),r.jsx(k,{id:"9TG7OR",defaultMessage:"Ask about this"})]})})}const kt=/[#.]/g;function bo(e,t){const s=e||"",n={};let a=0,o,i;for(;a<s.length;){kt.lastIndex=a;const c=kt.exec(s),d=s.slice(a,c?c.index:s.length);d&&(o?o==="#"?n.id=d:Array.isArray(n.className)?n.className.push(d):n.className=[d]:i=d,a+=d.length),c&&(o=c[0],a++)}return{type:"element",tagName:i||t||"div",properties:n,children:[]}}const wo=new Set(["button","menu","reset","submit"]),Ie={}.hasOwnProperty;function ks(e,t,s){const n=s&&$o(s);function a(o,i,...c){let d=-1,l;if(o==null){l={type:"root",children:[]};const h=i;c.unshift(h)}else if(l=bo(o,t),l.tagName=l.tagName.toLowerCase(),n&&Ie.call(n,l.tagName)&&(l.tagName=n[l.tagName]),vo(i,l.tagName)){let h;for(h in i)Ie.call(i,h)&&_o(e,l.properties,h,i[h])}else c.unshift(i);for(;++d<c.length;)Fe(l.children,c[d]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return a}function vo(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?wo.has(e.type.toLowerCase()):!("value"in e)}function _o(e,t,s,n){const a=xs(e,s);let o=-1,i;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;i=n}else typeof n=="boolean"?i=n:typeof n=="string"?a.spaceSeparated?i=dt(n):a.commaSeparated?i=ft(n):a.commaOrSpaceSeparated?i=dt(ft(n).join(" ")):i=Ct(a,a.property,n):Array.isArray(n)?i=n.concat():i=a.property==="style"?jo(n):String(n);if(Array.isArray(i)){const c=[];for(;++o<i.length;){const d=Ct(a,a.property,i[o]);c[o]=d}i=c}if(a.property==="className"&&Array.isArray(t.className)){const c=i;i=t.className.concat(c)}t[a.property]=i}}function Fe(e,t){let s=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++s<t.length;)Fe(e,t[s]);else if(typeof t=="object"&&"type"in t)t.type==="root"?Fe(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Ct(e,t,s){if(typeof s=="string"){if(e.number&&s&&!Number.isNaN(Number(s)))return Number(s);if((e.boolean||e.overloadedBoolean)&&(s===""||mt(s)===mt(t)))return!0}return s}function jo(e){const t=[];let s;for(s in e)Ie.call(e,s)&&t.push([s,e[s]].join(": "));return t.join("; ")}function $o(e){const t={};let s=-1;for(;++s<e.length;)t[e[s].toLowerCase()]=e[s];return t}const No=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],ko=ks(ys,"div"),Co=ks(Qe,"g",No),Ce={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function So(e,t){return Cs(e,{})||{type:"root",children:[]}}function Cs(e,t){const s=To(e,t);return s&&t.afterTransform&&t.afterTransform(e,s),s}function To(e,t){switch(e.nodeType){case 1:return Eo(e,t);case 3:return Po(e);case 8:return Do(e);case 9:return St(e,t);case 10:return Mo();case 11:return St(e,t);default:return}}function St(e,t){return{type:"root",children:Ss(e,t)}}function Mo(){return{type:"doctype"}}function Po(e){return{type:"text",value:e.nodeValue||""}}function Do(e){return{type:"comment",value:e.nodeValue||""}}function Eo(e,t){const s=e.namespaceURI,n=s===Ce.svg?Co:ko,a=s===Ce.html?e.tagName.toLowerCase():e.tagName,o=s===Ce.html&&a==="template"?e.content:e,i=e.getAttributeNames(),c={};let d=-1;for(;++d<i.length;)c[i[d]]=e.getAttribute(i[d])||"";return n(a,c,Ss(o,t))}function Ss(e,t){const s=e.childNodes,n=[];let a=-1;for(;++a<s.length;){const o=Cs(s[a],t);o!==void 0&&n.push(o)}return n}new DOMParser;function Ao(e,t){const s=Lo(e);return So(s)}function Lo(e){const t=document.createElement("template");return t.innerHTML=e,t.content}const Tt=function(e,t,s){const n=wn(s);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]},Mt=/\n/g,Pt=/[\t ]+/g,Re=X("br"),Dt=X(Bo),Io=X("p"),Et=X("tr"),Fo=X(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",Uo,Wo]),Ts=X(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function Ro(e,t){const s=t||{},n="children"in e?e.children:[],a=Ts(e),o=Ds(e,{whitespace:s.whitespace||"normal",breakBefore:!1,breakAfter:!1}),i=[];(e.type==="text"||e.type==="comment")&&i.push(...Ps(e,{whitespace:o,breakBefore:!0,breakAfter:!0}));let c=-1;for(;++c<n.length;)i.push(...Ms(n[c],e,{whitespace:o,breakBefore:c?void 0:a,breakAfter:c<n.length-1?Re(n[c+1]):a}));const d=[];let l;for(c=-1;++c<i.length;){const h=i[c];typeof h=="number"?l!==void 0&&h>l&&(l=h):h&&(l!==void 0&&l>-1&&d.push(`
`.repeat(l)||" "),l=-1,d.push(h))}return d.join("")}function Ms(e,t,s){return e.type==="element"?Oo(e,t,s):e.type==="text"?s.whitespace==="normal"?Ps(e,s):Ho(e):[]}function Oo(e,t,s){const n=Ds(e,s),a=e.children||[];let o=-1,i=[];if(Fo(e))return i;let c,d;for(Re(e)||Et(e)&&Tt(t,e,Et)?d=`
`:Io(e)?(c=2,d=2):Ts(e)&&(c=1,d=1);++o<a.length;)i=i.concat(Ms(a[o],e,{whitespace:n,breakBefore:o?void 0:c,breakAfter:o<a.length-1?Re(a[o+1]):d}));return Dt(e)&&Tt(t,e,Dt)&&i.push("	"),c&&i.unshift(c),d&&i.push(d),i}function Ps(e,t){const s=String(e.value),n=[],a=[];let o=0;for(;o<=s.length;){Mt.lastIndex=o;const d=Mt.exec(s),l=d&&"index"in d?d.index:s.length;n.push(zo(s.slice(o,l).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),o===0?t.breakBefore:!0,l===s.length?t.breakAfter:!0)),o=l+1}let i=-1,c;for(;++i<n.length;)n[i].charCodeAt(n[i].length-1)===8203||i<n.length-1&&n[i+1].charCodeAt(0)===8203?(a.push(n[i]),c=void 0):n[i]?(typeof c=="number"&&a.push(c),a.push(n[i]),c=0):(i===0||i===n.length-1)&&a.push(0);return a}function Ho(e){return[String(e.value)]}function zo(e,t,s){const n=[];let a=0,o;for(;a<e.length;){Pt.lastIndex=a;const i=Pt.exec(e);o=i?i.index:e.length,!a&&!o&&i&&!t&&n.push(""),a!==o&&n.push(e.slice(a,o)),a=i?o+i[0].length:o}return a!==o&&!s&&n.push(""),n.join(" ")}function Ds(e,t){if(e.type==="element"){const s=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return s.wrap?"pre-wrap":"pre";case"td":case"th":return s.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function Uo(e){return!!(e.properties||{}).hidden}function Bo(e){return e.tagName==="td"||e.tagName==="th"}function Wo(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const Yo={},qo=[];function Es(e){const t=e||Yo;return function(s,n){vn(s,"element",function(a,o){const i=Array.isArray(a.properties.className)?a.properties.className:qo,c=i.includes("language-math"),d=i.includes("math-display"),l=i.includes("math-inline");let h=d;if(!c&&!d&&!l)return;let m=o[o.length-1],x=a;if(a.tagName==="code"&&c&&m&&m.type==="element"&&m.tagName==="pre"&&(x=m,m=o[o.length-2],h=!0),!m)return;const y=Ro(x,{whitespace:"pre"});let g;try{g=pt.renderToString(y,{...t,displayMode:h,throwOnError:!0})}catch(u){const $=u,_=$.name.toLowerCase();n.message("Could not render math with KaTeX",{ancestors:[...o,a],cause:$,place:a.position,ruleId:_,source:"rehype-katex"}),_==="parseerror"?g=pt.renderToString(y,{...t,displayMode:h,strict:"ignore",throwOnError:!1}):g=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(t.errorColor||"#cc0000"),title:String(u)},children:[{type:"text",value:y}]}]}typeof g=="string"&&(g=Ao(g).children);const w=m.children.indexOf(x);return m.children.splice(w,1,...g),_n})}}const le="sandbox:";function Go({messageId:e,clientThreadId:t,href:s,...n}){const a=qe(),o=Qs(),[i,c]=p.useState(!1),d=s.substring(le.length),l=sr(t),h=M(),m=nr(),x=p.useCallback(u=>{const $=document.createElement("a");$.href=u,$.click(),c(!1)},[]),y=p.useCallback(u=>{c(!1),m.danger(u)},[m]),g=Zo(i&&!a,e,l,d,y,x).data,w=p.useCallback(async u=>{t!==void 0&&(u.preventDefault(),(g===void 0||g?.status!=="success")&&o.invalidateQueries({queryKey:As(e,d)}),g?.status==="success"&&g?.download_url?x(g.download_url):c(!0))},[t,g,o,e,d,x]);return r.jsx(oe,{closeOnOutsideClick:!1,delayDuration:0,label:r.jsxs("span",{className:"flex items-center gap-1",children:[i?h.formatMessage(Oe.startingDownload):h.formatMessage(Oe.downloadFile),i&&r.jsx(rr,{})]}),side:"top",sideOffset:4,children:r.jsx("a",{...n,className:"cursor-pointer",onClick:u=>!i&&w(u)})})}function Vo(e){return r.jsx(oe,{closeOnOutsideClick:!1,delayDuration:0,label:r.jsx("span",{className:"flex items-center gap-1",children:r.jsx(k,{...Oe.downloadUnavailable})}),side:"top",sideOffset:4,children:r.jsx("span",{...e,className:"text-token-text-secondary font-semibold underline"})})}function Zo(e,t,s,n,a,o){const i=jn();return ss({queryKey:As(t,n),queryFn:()=>ar.downloadFromInterpreter(t,s,n).then(c=>(c?.status==="success"&&o(c.download_url),c)).catch(c=>{let d=i("default_download_link_error",{fileName:n});throw c instanceof or&&c.code!=null&&(d=i(c.code)),a?.(d),c}),enabled:!!(e&&t&&s&&n)})}function As(e,t){return["downloadSandboxLink",e,t]}const Oe=pe({downloadFile:{id:"SandboxDownload.downloadFile",defaultMessage:"Download file"},startingDownload:{id:"SandboxDownload.startingDownload",defaultMessage:"Starting download"},downloadUnavailable:{id:"SandboxDownload.downloadUnavailable",defaultMessage:"File download not supported in a shared chat"}}),Ls=e=>e.startsWith(le)||e===ws?e:Fr(e);function Ko(){return e=>{ge(e,"list",t=>{for(const s of t.children)s.spread=!0})}}const rt=[xr,Ko,[yr,{singleDollarTextMath:!1}],br,wr,vr,Xo];function Xo(){return e=>{ge(e,"textDirective",t=>{t.name!==us&&(t.type="text",t.value=`:${t.name}`)})}}function Jo(){return e=>{const t=e.position?.end.offset;ge(e,"element",(s,n)=>{const{position:a}=s;if(!a)return;const{start:o,end:i}=a,c=o.offset,d=i.offset;s.properties??={},c!=null&&(s.properties["data-start"]=c),d!=null&&(s.properties["data-end"]=d,t===d&&(s.properties["data-is-last-node"]=""),n===e.children.length-1&&(s.properties["data-is-only-node"]=""))})}}const Is=[Es,Jo,[$n,{target:"_new",rel:"noopener noreferrer"}],gs],Qo=[[Es,{output:"mathml"}],gs];function ei({attribution:e}){const t=p.useContext(re),s=Nn(t?.message.id,e.attributable_index),n=bn();return r.jsx(si,{isHighlighted:s,isDebugMode:n&&!1,content:e.alt??"",attributableIndex:e.attributable_index,attributions:void 0,attributionsDebug:void 0})}function ti({content:e,isHighlighted:t,isDebugMode:s,attributableIndex:n,attributions:a,attributionsDebug:o}){const i=r.jsx(et,{rehypePlugins:Is,remarkPlugins:rt,urlTransform:Ls,components:{p:({children:c})=>r.jsx(r.Fragment,{children:c})},children:e});return r.jsx(ni,{isHighlighted:t,children:i})}const si=Ye.memo(ti);function ni({isHighlighted:e,className:t,children:s}){return r.jsx("span",{className:j("relative","-mx-px my-[-0.2rem] rounded px-px py-[0.2rem]",e&&"bg-[#FCECC1] dark:bg-[#64572A]","transition-colors duration-100 ease-in-out",t),children:s})}function At(e,t){try{return BigInt(e).toLocaleString(t)}catch{const s=Number(e);return e.includes("e")||e.includes("E")?s.toExponential():s.toLocaleString(t,{maximumFractionDigits:6})}}function ri({data:e,trackContentReferenceEvent:t}){p.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=ir().locale;return e.expression&&e.result!=null?r.jsxs("div",{className:"no-scrollbar overflow-auto sm:overflow-hidden",children:[r.jsxs("div",{className:"pb-1 text-lg font-semibold",children:[e.prefix&&r.jsx("span",{children:e.prefix}),r.jsx("span",{children:At(e.result,s)}),e.suffix&&r.jsx("span",{children:e.suffix})]}),r.jsx("div",{className:"text-token-text-primary tracking-wide",children:`${e.expression}=${At(e.result,s)}`})]}):null}function ai(e){return r.jsxs(cr,{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",...e,children:[r.jsx("path",{d:"M4.42 0.75H2.8625H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V11.65C0.75 12.7546 1.64543 13.65 2.75 13.65H2.8625C2.8625 13.65 2.8625 13.65 2.8625 13.65C2.8625 13.65 4.00751 13.65 4.42 13.65M13.98 13.65H15.5375H15.65C16.7546 13.65 17.65 12.7546 17.65 11.65V2.75C17.65 1.64543 16.7546 0.75 15.65 0.75H15.5375H13.98",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M5.55283 4.21963C5.25993 3.92674 4.78506 3.92674 4.49217 4.21963C4.19927 4.51252 4.19927 4.9874 4.49217 5.28029L6.36184 7.14996L4.49217 9.01963C4.19927 9.31252 4.19927 9.7874 4.49217 10.0803C4.78506 10.3732 5.25993 10.3732 5.55283 10.0803L7.95283 7.68029C8.24572 7.3874 8.24572 6.91252 7.95283 6.61963L5.55283 4.21963Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M9.77753 8.75003C9.3357 8.75003 8.97753 9.10821 8.97753 9.55003C8.97753 9.99186 9.3357 10.35 9.77753 10.35H13.2775C13.7194 10.35 14.0775 9.99186 14.0775 9.55003C14.0775 9.10821 13.7194 8.75003 13.2775 8.75003H9.77753Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.1"})]})}function oi({codeMessage:e,codeExecutionOutputMessage:t,onDismiss:s,FormattedText:n}){const a=M();return r.jsx(ee.Root,{isOpen:!0,onClose:s,testId:"modal-code-execution",children:r.jsx(ee.Overlay,{children:r.jsxs(ee.Content,{className:"flex max-h-[75vh] max-w-lg flex-col overflow-hidden",children:[r.jsx(ee.Header,{title:a.formatMessage(ii.title),type:"success",closeButton:r.jsx(lr,{onClick:s})}),r.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[r.jsx("div",{children:r.jsx(Mr,{FormattedText:n,message:e,codeRendererClassName:"border-none rounded-none",removeTopBorderRadius:!0})}),r.jsx("div",{children:r.jsx(Pr,{message:t})})]})]})})})}const ii=pe({title:{id:"CodeExecutionOutputModal.title",defaultMessage:"Analysis"}});function ci({displayInfo:e,FormattedText:t,trackContentReferenceEvent:s}){const[n,a]=p.useState(!1),o=M();return p.useEffect(()=>{s("Search Content Reference Shown","search_content_reference_shown",e.type)},[s,e.type]),r.jsxs(r.Fragment,{children:[r.jsx(oe,{label:o.formatMessage(li.viewAnalysis),side:"top",sideOffset:4,withArrow:!1,delayDuration:150,children:r.jsx("button",{onClick:()=>a(!0),children:r.jsx(ai,{className:"text-token-link hover:text-token-link-hover ms-0.5 -mt-0.5 inline-block"})})}),n&&r.jsx(oi,{FormattedText:t,codeMessage:e.codeMessage,codeExecutionOutputMessage:e.codeExecutionOutputMessage,onDismiss:()=>a(!1)})]})}const li=pe({viewAnalysis:{id:"viewAnalysis",defaultMessage:"View analysis"}}),Fs="text-token-text-secondary inline-flex items-center rounded-full bg-[#f4f4f4] select-none dark:bg-token-main-surface-secondary",di=j(Fs," h-[22px] px-2 text-[0.5em] font-medium"),Wb=j(Fs,"h-[25px] px-3 text-xs"),Lt=24;function ui(e){const t=e.split(".");let s=e;return t.length>1&&t.slice(0,-1).some(n=>n.length>0)&&(s=t.slice(0,-1).join(".")),s.length>Lt&&(s=s.slice(0,Lt-1)+"â€¦"),s}function hi({fileRef:e,index:t,trackContentReferenceEvent:s}){const n=kn(),a=p.useContext(re),o=p.useMemo(()=>({source:e.source,index:t}),[e.source,t]);p.useEffect(()=>{s("File Citation Shown","file_citation_shown","file",o)},[]);const i=p.useCallback(h=>{h?s("File Citation Hovered","file_citation_hovered","file",o):s("File Citation Unhovered","file_citation_unhovered","file",o)},[o,s]),c=p.useCallback(()=>{s("File Citation Clicked","file_citation_clicked","file",o)},[o,s]),d=p.useCallback(()=>n(e.id,e.name),[n,e.id,e.name]),l=Xe(a?.analyticsMetadata.clientThreadId??dr,h=>h?.mode);return Cn(l)?l.gizmo_id&&Sn(l.gizmo_id)?r.jsx("span",{className:j(di,"ms-1"),title:e.name,children:ui(e.name)}):null:r.jsx(fi,{fileItem:e,onClickDownloadFile:d,trackTooltipOpenChange:i,trackCloudLinkClick:c})}function fi({fileItem:e,className:t,trackTooltipOpenChange:s,trackCloudLinkClick:n,onClickDownloadFile:a}){const o=is(e.cloud_doc_url??""),i=o?.type??r.jsx(k,{id:"bqY3sN",defaultMessage:"File"}),c=o?.Icon??cs,d=r.jsx(c,{alt:i,className:"h-[16px] w-[16px] object-contain"}),l=j("ms-1 flex h-[22px] items-center rounded-xl px-2 relative bottom-[-2px]","bg-[#f4f4f4] text-token-text-secondary! hover:bg-token-text-primary hover:text-token-main-surface-secondary! dark:bg-token-main-surface-secondary dark:hover:bg-token-text-primary",t),h=r.jsx("span",{className:"relative inline-flex items-center",children:e.cloud_doc_url?r.jsx(Y,{href:e.cloud_doc_url,className:l,onClick:n,children:d}):r.jsx("button",{onClick:a,className:l,children:d})});return r.jsx(mi,{fileItem:e,icon:r.jsx(c,{alt:i,className:"me-2 h-[16px] w-[16px] object-contain"}),contentType:i,trackTooltipOpenChange:s,children:h})}function mi({fileItem:e,children:t,className:s,icon:n,contentType:a,trackTooltipOpenChange:o}){const i=xe();return r.jsx(oe,{label:r.jsxs(Y,{href:e.cloud_doc_url,className:j("text-token-text-primary flex max-w-80 flex-col gap-1 text-start text-xs font-normal no-underline!",s),children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"h-4 w-4 shrink-0 overflow-hidden rounded-full",children:n}),r.jsx("div",{className:"text-token-text-primary truncate",children:a})]}),r.jsx("div",{className:"line-clamp-2 text-sm font-medium",children:e.name}),e.text&&r.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm",children:e.text})]}),onOpenChange:o,side:"bottom",sideOffset:10,withArrow:!1,delayDuration:150,theme:i?"default":"white",align:"start",customPaddingClassName:"p-3",cornerRadius:"xl",customBorderClassName:"border-token-border-default border",wide:!0,children:t})}function pi(e,t){return new Date(e).toLocaleDateString(t,{month:"long",day:"numeric",year:"numeric"})}function gi({metadata:e,trackContentReferenceEvent:t}){return e.items.length===0?null:r.jsx("div",{className:"mt-6 flex flex-col gap-3",children:e.items.map((s,n)=>r.jsx(xi,{item:s,index:n,trackContentReferenceEvent:t},n))})}function xi({item:e,index:t,trackContentReferenceEvent:s}){const n=M(),a={title:e.name,description:e.description,index:t};p.useEffect(()=>{s("Contextual Answers Content Reference Shown","contextual_answers_content_reference_shown","file_navlist",a)},[]);const o=is(e.cloud_doc_url??""),i=o?.Icon??cs,c=o?.type??r.jsx(k,{id:"bqY3sN",defaultMessage:"File"});return r.jsxs(Y,{className:"group/nav-list relative flex items-center gap-6 py-1.5",href:e.cloud_doc_url??"/",onClick:()=>{s("Contextual Answers Content Reference Clicked","contextual_answers_content_reference_clicked","file_navlist",a)},children:[r.jsx("div",{className:"absolute start-0 top-0 bottom-0 w-[3px] rounded-t-lg rounded-b-lg bg-black/10"}),r.jsxs("div",{className:"ms-4 flex grow flex-col gap-1 overflow-hidden text-ellipsis",children:[r.jsxs("div",{className:"not-prose text-token-text-primary flex items-center gap-1.5 text-sm",children:[r.jsx(i,{className:"icon-md object-contain"}),r.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm",children:c})]}),r.jsx("div",{className:"text-token-link decoration-token-link line-clamp-2 font-semibold group-hover/nav-list:underline",children:e.name}),r.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm leading-snug font-normal",children:e.description}),e.last_modified_time&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:pi(e.last_modified_time,n.locale)})]})]})}var He={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;function s(n){if(n===null||n===!0||n===!1)return NaN;var a=Number(n);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}e.exports=t.default})(He,He.exports);var yi=He.exports;const bi=ns(yi);var ze={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;function s(n){var a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),n.getTime()-a.getTime()}e.exports=t.default})(ze,ze.exports);var wi=ze.exports;const It=ns(wi);function vi(e,t){var s=Ni(t);return s.formatToParts?ji(s,e):$i(s,e)}var _i={year:0,month:1,day:2,hour:3,minute:4,second:5};function ji(e,t){try{for(var s=e.formatToParts(t),n=[],a=0;a<s.length;a++){var o=_i[s[a].type];o>=0&&(n[o]=parseInt(s[a].value,10))}return n}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function $i(e,t){var s=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(s);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var Se={};function Ni(e){if(!Se[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),s=t==="06/25/2014, 00:00:00"||t==="â€Ž06â€Ž/â€Ž25â€Ž/â€Ž2014â€Ž â€Ž00â€Ž:â€Ž00â€Ž:â€Ž00";Se[e]=s?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Se[e]}function Rs(e,t,s,n,a,o,i){var c=new Date(0);return c.setUTCFullYear(e,t,s),c.setUTCHours(n,a,o,i),c}var Ft=36e5,ki=6e4,Te={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Os(e,t,s){var n,a;if(!e||(n=Te.timezoneZ.exec(e),n))return 0;var o;if(n=Te.timezoneHH.exec(e),n)return o=parseInt(n[1],10),Rt(o)?-(o*Ft):NaN;if(n=Te.timezoneHHMM.exec(e),n){o=parseInt(n[2],10);var i=parseInt(n[3],10);return Rt(o,i)?(a=Math.abs(o)*Ft+i*ki,n[1]==="+"?-a:a):NaN}if(Ti(e)){t=new Date(t||Date.now());var c=s?t:Ci(t),d=Ue(c,e),l=s?d:Si(t,d,e);return-l}return NaN}function Ci(e){return Rs(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Ue(e,t){var s=vi(e,t),n=Rs(s[0],s[1]-1,s[2],s[3]%24,s[4],s[5],0).getTime(),a=e.getTime(),o=a%1e3;return a-=o>=0?o:1e3+o,n-a}function Si(e,t,s){var n=e.getTime(),a=n-t,o=Ue(new Date(a),s);if(t===o)return t;a-=o-t;var i=Ue(new Date(a),s);return o===i?o:Math.max(o,i)}function Rt(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var Ot={};function Ti(e){if(Ot[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Ot[e]=!0,!0}catch{return!1}}var Mi=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Me=36e5,Ht=6e4,Pi=2,E={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Mi};function Be(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var s={},n=s.additionalDigits==null?Pi:bi(s.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=Di(e),o=Ei(a.date,n),i=o.year,c=o.restDateString,d=Ai(c,i);if(isNaN(d))return new Date(NaN);if(d){var l=d.getTime(),h=0,m;if(a.time&&(h=Li(a.time),isNaN(h)))return new Date(NaN);if(a.timeZone||s.timeZone){if(m=Os(a.timeZone||s.timeZone,new Date(l+h)),isNaN(m))return new Date(NaN)}else m=It(new Date(l+h)),m=It(new Date(l+h+m));return new Date(l+h+m)}else return new Date(NaN)}function Di(e){var t={},s=E.dateTimePattern.exec(e),n;if(s?(t.date=s[1],n=s[3]):(s=E.datePattern.exec(e),s?(t.date=s[1],n=s[2]):(t.date=null,n=e)),n){var a=E.timeZone.exec(n);a?(t.time=n.replace(a[1],""),t.timeZone=a[1].trim()):t.time=n}return t}function Ei(e,t){var s=E.YYY[t],n=E.YYYYY[t],a;if(a=E.YYYY.exec(e)||n.exec(e),a){var o=a[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(a=E.YY.exec(e)||s.exec(e),a){var i=a[1];return{year:parseInt(i,10)*100,restDateString:e.slice(i.length)}}return{year:null}}function Ai(e,t){if(t===null)return null;var s,n,a,o;if(e.length===0)return n=new Date(0),n.setUTCFullYear(t),n;if(s=E.MM.exec(e),s)return n=new Date(0),a=parseInt(s[1],10)-1,Ut(t,a)?(n.setUTCFullYear(t,a),n):new Date(NaN);if(s=E.DDD.exec(e),s){n=new Date(0);var i=parseInt(s[1],10);return Ri(t,i)?(n.setUTCFullYear(t,0,i),n):new Date(NaN)}if(s=E.MMDD.exec(e),s){n=new Date(0),a=parseInt(s[1],10)-1;var c=parseInt(s[2],10);return Ut(t,a,c)?(n.setUTCFullYear(t,a,c),n):new Date(NaN)}if(s=E.Www.exec(e),s)return o=parseInt(s[1],10)-1,Bt(t,o)?zt(t,o):new Date(NaN);if(s=E.WwwD.exec(e),s){o=parseInt(s[1],10)-1;var d=parseInt(s[2],10)-1;return Bt(t,o,d)?zt(t,o,d):new Date(NaN)}return null}function Li(e){var t,s,n;if(t=E.HH.exec(e),t)return s=parseFloat(t[1].replace(",",".")),Pe(s)?s%24*Me:NaN;if(t=E.HHMM.exec(e),t)return s=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),Pe(s,n)?s%24*Me+n*Ht:NaN;if(t=E.HHMMSS.exec(e),t){s=parseInt(t[1],10),n=parseInt(t[2],10);var a=parseFloat(t[3].replace(",","."));return Pe(s,n,a)?s%24*Me+n*Ht+a*1e3:NaN}return null}function zt(e,t,s){t=t||0,s=s||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var a=n.getUTCDay()||7,o=t*7+s+1-a;return n.setUTCDate(n.getUTCDate()+o),n}var Ii=[31,28,31,30,31,30,31,31,30,31,30,31],Fi=[31,29,31,30,31,30,31,31,30,31,30,31];function Hs(e){return e%400===0||e%4===0&&e%100!==0}function Ut(e,t,s){if(t<0||t>11)return!1;if(s!=null){if(s<1)return!1;var n=Hs(e);if(n&&s>Fi[t]||!n&&s>Ii[t])return!1}return!0}function Ri(e,t){if(t<1)return!1;var s=Hs(e);return!(s&&t>366||!s&&t>365)}function Bt(e,t,s){return!(t<0||t>52||s!=null&&(s<0||s>6))}function Pe(e,t,s){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||s!=null&&(s<0||s>=60))}function Z(e,t,s){var n=Be(e,s),a=Os(t,n,!0),o=new Date(n.getTime()-a),i=new Date(0);return i.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),i.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),i}var De={line:{color:"#F66",width:1,dashPattern:[]},sync:{enabled:!0,group:1,suppressTooltips:!1},zoom:{enabled:!0,zoomboxBackgroundColor:"rgba(66,133,244,0.2)",zoomboxBorderColor:"#48F",zoomButtonText:"Reset Zoom",zoomButtonClass:"reset-zoom"},snap:{enabled:!1},callbacks:{beforeZoom:function(e,t){return!0},afterZoom:function(e,t){}}},Oi={id:"crosshair",afterInit:function(e){if(e.config.options.scales.x){var t=e.config.options.scales.x.type;if(!(t!=="linear"&&t!=="time"&&t!=="category"&&t!=="logarithmic")){e.options.plugins.crosshair===void 0&&(e.options.plugins.crosshair=De),e.crosshair={enabled:!1,suppressUpdate:!1,x:null,originalData:[],originalXRange:{},dragStarted:!1,dragStartX:null,dragEndX:null,suppressTooltips:!1,ignoreNextEvents:0,reset:function(){this.resetZoom(e,!1,!1)}.bind(this)};var s=this.getOption(e,"sync","enabled");s&&(e.crosshair.syncEventHandler=function(n){this.handleSyncEvent(e,n)}.bind(this),e.crosshair.resetZoomEventHandler=function(n){var a=this.getOption(e,"sync","group");n.chartId!==e.id&&n.syncGroup===a&&this.resetZoom(e,!0)}.bind(this),window.addEventListener("sync-event",e.crosshair.syncEventHandler),window.addEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler)),e.panZoom=this.panZoom.bind(this,e)}}},afterDestroy:function(e){var t=this.getOption(e,"sync","enabled");t&&(window.removeEventListener("sync-event",e.crosshair.syncEventHandler),window.removeEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler))},panZoom:function(e,t){if(e.crosshair.originalData.length!==0){var s=e.crosshair.end-e.crosshair.start,n=e.crosshair.min,a=e.crosshair.max;t<0?(e.crosshair.start=Math.max(e.crosshair.start+t,n),e.crosshair.end=e.crosshair.start===n?n+s:e.crosshair.end+t):(e.crosshair.end=Math.min(e.crosshair.end+t,e.crosshair.max),e.crosshair.start=e.crosshair.end===a?a-s:e.crosshair.start+t),this.doZoom(e,e.crosshair.start,e.crosshair.end)}},getOption:function(e,t,s){return gt(e.options.plugins.crosshair[t]?e.options.plugins.crosshair[t][s]:void 0,De[t][s])},getXScale:function(e){return e.data.datasets.length?e.scales[e.getDatasetMeta(0).xAxisID]:null},getYScale:function(e){return e.scales[e.getDatasetMeta(0).yAxisID]},handleSyncEvent:function(e,t){var s=this.getOption(e,"sync","group");if(t.chartId!==e.id&&t.syncGroup===s){var n=this.getXScale(e);if(n){var a=t.original.native.buttons===void 0?t.original.native.which:t.original.native.buttons;t.original.type==="mouseup"&&(a=0);var o={type:t.original.type=="click"?"mousemove":t.original.type,chart:e,x:n.getPixelForValue(t.xValue),y:t.original.y,native:{buttons:a},stop:!0};e._eventHandler(o)}}},afterEvent:function(e,t){if(e.config.options.scales.x.length==0)return;let s=t.event;var n=e.config.options.scales.x.type;if(!(n!=="linear"&&n!=="time"&&n!=="category"&&xscaleType!=="logarithmic")){var a=this.getXScale(e);if(a){if(e.crosshair.ignoreNextEvents>0){e.crosshair.ignoreNextEvents-=1;return}var o=s.native.buttons===void 0?s.native.which:s.native.buttons;s.native.type==="mouseup"&&(o=0);var i=this.getOption(e,"sync","enabled"),c=this.getOption(e,"sync","group");if(!s.stop&&i){var t=new CustomEvent("sync-event");t.chartId=e.id,t.syncGroup=c,t.original=s,t.xValue=a.getValueForPixel(s.x),window.dispatchEvent(t)}var d=this.getOption(e,"sync","suppressTooltips");if(e.crosshair.suppressTooltips=s.stop&&d,e.crosshair.enabled=s.type!=="mouseout"&&s.x>a.getPixelForValue(a.min)&&s.x<a.getPixelForValue(a.max),!e.crosshair.enabled&&!e.crosshair.suppressUpdate)return s.x>a.getPixelForValue(a.max)&&(e.crosshair.suppressUpdate=!0,e.update("none")),e.crosshair.dragStarted=!1,!1;e.crosshair.suppressUpdate=!1;var l=this.getOption(e,"zoom","enabled");if(o===1&&!e.crosshair.dragStarted&&l&&(e.crosshair.dragStartX=s.x,e.crosshair.dragStarted=!0),e.crosshair.dragStarted&&o===0){e.crosshair.dragStarted=!1;var h=a.getValueForPixel(e.crosshair.dragStartX),m=a.getValueForPixel(e.crosshair.x);Math.abs(e.crosshair.dragStartX-e.crosshair.x)>1&&this.doZoom(e,h,m),e.update("none")}e.crosshair.x=s.x,e.draw()}}},afterDraw:function(e){if(e.crosshair.enabled)return e.crosshair.dragStarted?this.drawZoombox(e):(this.drawTraceLine(e),this.interpolateValues(e),this.drawTracePoints(e)),!0},beforeTooltipDraw:function(e){return!e.crosshair.dragStarted&&!e.crosshair.suppressTooltips},resetZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(s){if(e.crosshair.originalData.length>0)for(var n=0;n<e.data.datasets.length;n++){var a=e.data.datasets[n];a.data=e.crosshair.originalData.shift(0)}e.crosshair.originalXRange.min?(e.options.scales.x.min=e.crosshair.originalXRange.min,e.crosshair.originalXRange.min=null):delete e.options.scales.x.min,e.crosshair.originalXRange.max?(e.options.scales.x.max=e.crosshair.originalXRange.max,e.crosshair.originalXRange.max=null):delete e.options.scales.x.max}e.crosshair.button&&e.crosshair.button.parentNode&&(e.crosshair.button.parentNode.removeChild(e.crosshair.button),e.crosshair.button=!1);var o=this.getOption(e,"sync","enabled");if(!t&&s&&o){var i=this.getOption(e,"sync","group"),c=new CustomEvent("reset-zoom-event");c.chartId=e.id,c.syncGroup=i,window.dispatchEvent(c)}s&&e.update("none")},doZoom:function(e,t,s){if(t>s){var n=t;t=s,s=n}var a=gt(e.options.plugins.crosshair.callbacks?e.options.plugins.crosshair.callbacks.beforeZoom:void 0,De.callbacks.beforeZoom);if(!a(t,s))return!1;if(e.crosshair.dragStarted=!1,e.options.scales.x.min&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.min=e.options.scales.x.min),e.options.scales.x.max&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.max=e.options.scales.x.max),!e.crosshair.button){var o=document.createElement("button"),i=this.getOption(e,"zoom","zoomButtonText"),c=this.getOption(e,"zoom","zoomButtonClass"),d=document.createTextNode(i);o.appendChild(d),o.className=c,o.addEventListener("click",function(){this.resetZoom(e)}.bind(this)),e.canvas.parentNode.appendChild(o),e.crosshair.button=o}e.options.scales.x.min=t,e.options.scales.x.max=s;var l=e.crosshair.originalData.length===0,h=e.config.options.scales.x.type!=="category";if(h)for(var m=0;m<e.data.datasets.length;m++){var x=[],y=0,g=!1,w=!1;l&&(e.crosshair.originalData[m]=e.data.datasets[m].data);for(var u=e.crosshair.originalData[m],$=0;$<u.length;$++){var _=u[$],C=_.x!==void 0?_.x:NaN;C>=t&&!g&&y>0&&(x.push(u[y-1]),g=!0),C>=t&&C<=s&&x.push(_),C>s&&!w&&y<u.length&&(x.push(_),w=!0),y+=1}e.data.datasets[m].data=x}if(e.crosshair.start=t,e.crosshair.end=s,l){var v=this.getXScale(e);e.crosshair.min=v.min,e.crosshair.max=v.max}e.crosshair.ignoreNextEvents=2,e.update("none");var b=this.getOption(e,"callbacks","afterZoom");b(t,s)},drawZoombox:function(e){var t=this.getYScale(e),s=this.getOption(e,"zoom","zoomboxBorderColor"),n=this.getOption(e,"zoom","zoomboxBackgroundColor");e.ctx.beginPath(),e.ctx.rect(e.crosshair.dragStartX,t.getPixelForValue(t.max),e.crosshair.x-e.crosshair.dragStartX,t.getPixelForValue(t.min)-t.getPixelForValue(t.max)),e.ctx.lineWidth=1,e.ctx.strokeStyle=s,e.ctx.fillStyle=n,e.ctx.fill(),e.ctx.fillStyle="",e.ctx.stroke(),e.ctx.closePath()},drawTraceLine:function(e){var t=this.getYScale(e),s=this.getOption(e,"line","width"),n=this.getOption(e,"line","color"),a=this.getOption(e,"line","dashPattern"),o=this.getOption(e,"snap","enabled"),i=e.crosshair.x;o&&e._active.length&&(i=e._active[0].element.x),e.ctx.beginPath(),e.ctx.setLineDash(a),e.ctx.moveTo(i,t.getPixelForValue(t.max)),e.ctx.lineWidth=s,e.ctx.strokeStyle=n,e.ctx.lineTo(i,t.getPixelForValue(t.min)),e.ctx.stroke(),e.ctx.setLineDash([])},drawTracePoints:function(e){for(var t=0;t<e.data.datasets.length;t++){var s=e.data.datasets[t],n=e.getDatasetMeta(t),a=e.scales[n.yAxisID];n.hidden||!s.interpolate||(e.ctx.beginPath(),e.ctx.arc(e.crosshair.x,a.getPixelForValue(s.interpolatedValue),3,0,2*Math.PI,!1),e.ctx.fillStyle="white",e.ctx.lineWidth=2,e.ctx.strokeStyle=s.borderColor,e.ctx.fill(),e.ctx.stroke())}},interpolateValues:function(e){for(var t=0;t<e.data.datasets.length;t++){var s=e.data.datasets[t],n=e.getDatasetMeta(t),a=e.scales[n.xAxisID],o=a.getValueForPixel(e.crosshair.x);if(!(n.hidden||!s.interpolate)){var i=s.data,c=i.findIndex(function(m){return m.x>=o}),d=i[c-1],l=i[c];if(e.data.datasets[t].steppedLine&&d)s.interpolatedValue=d.y;else if(d&&l){var h=(l.y-d.y)/(l.x-d.x);s.interpolatedValue=d.y+(o-d.x)*h}else s.interpolatedValue=NaN}}}};const de=(e=1)=>`rgba(48, 166, 51, ${e})`,ue=(e=1)=>`rgba(241, 77, 66, ${e})`,Wt="text-[#30a633]",Yt="text-[#f14d42]",Hi=["1d","5d","1m","6m","ytd","1y","5y","max"];function zi({histories:e,selectedInterval:t,onSelectHistoryInterval:s}){const n=Object.keys(e?.quotes??{});return r.jsx("div",{className:"text-token-text-tertiary inline-flex items-start justify-between rounded-[10px] bg-[#f4f4f4] p-[3px] text-xs font-semibold sm:justify-start sm:gap-1 dark:bg-[#393939]",children:n.map(a=>r.jsx("button",{onClick:()=>{s?.(a)},className:j("border border-transparent px-3 py-1.5 text-xs font-semibold uppercase",t===a?"border-token-border-default! bg-token-main-surface-primary text-token-text-primary shadow-xxs dark:border-token-border-medium! rounded-lg":"hover:text-token-text-secondary"),children:zs[a].label},a))})}const zs={"1d":{label:"1D",formatTimestampLabel:qt,formatTimestampTooltip:qt,maxTicksLimit:6,lineTension:.1},"5d":{label:"5D",formatTimestampLabel:Gt,formatTimestampTooltip:Bi,maxTicksLimit:6,lineTension:.1},"1m":{label:"1M",formatTimestampLabel:Gt,formatTimestampTooltip:Wi,maxTicksLimit:6,lineTension:.1,useUtc:!0},"6m":{label:"6M",formatTimestampLabel:Ee,formatTimestampTooltip:Q,maxTicksLimit:5,lineTension:.1,useUtc:!0},ytd:{label:"YTD",formatTimestampLabel:Ee,formatTimestampTooltip:Q,maxTicksLimit:5,lineTension:.1,useUtc:!0},"1y":{label:"1Y",formatTimestampLabel:Ee,formatTimestampTooltip:Q,maxTicksLimit:5,lineTension:.2,useUtc:!0},"5y":{label:"5Y",formatTimestampLabel:Vt,formatTimestampTooltip:Q,maxTicksLimit:5,lineTension:.2,useUtc:!0},max:{label:"max",formatTimestampLabel:Vt,formatTimestampTooltip:Q,maxTicksLimit:5,lineTension:.2,useUtc:!0}};function Ui(e){return e?Hi.filter(s=>s in e.quotes).find(s=>e.quotes[s].length>0):void 0}function q(e,t){return Z(new Date(e*1e3),t??"America/New_York")}function qt(e,t,s){const n=q(t,s);return e.formatTime(n,{hour:"numeric",minute:"numeric"})}function Bi(e,t,s){const n=q(t,s);return e.formatDate(n,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function Q(e,t,s){const n=q(t,s);return e.formatDate(n,{month:"short",day:"numeric",year:"numeric"})}function Ee(e,t,s){const n=q(t,s);return e.formatDate(n,{month:"short",year:"numeric"})}function Gt(e,t,s){const n=q(t,s);return e.formatDate(n,{month:"short",day:"numeric"})}function Wi(e,t,s){const n=q(t,s);return e.formatDate(n,{weekday:"short",month:"short",day:"numeric"})}function Vt(e,t,s){const n=q(t,s);return e.formatDate(n,{year:"numeric"})}Or.register(Hr,zr,Ur,Br,Wr,Yr,qr,Gr,Vr,Oi,Zr);const Yi=100,Zt={color:"#b4b4b4",font:{size:10,weight:"600",family:"Menlo"}};function qi({isUp:e,histories:t,selectedInterval:s,setHighlightedPrice:n,latestTradingPeriod:a,timezone:o}){return r.jsx(r.Fragment,{children:t&&s&&a?r.jsx(Gi,{isUp:e,histories:t,selectedInterval:s,latestTradingPeriod:a,timezone:o,setHighlightedPrice:n}):r.jsx(te,{className:"h-full",index:1,width:100})})}function Gi({isUp:e,histories:t,selectedInterval:s,latestTradingPeriod:n,timezone:a,setHighlightedPrice:o}){const[i,c]=p.useState(null),[d,l]=p.useState(!1),h=s==="1d",m=p.useMemo(()=>{let v=t.quotes[s].filter(b=>b.close>=0);if(h&&n){const b=n.regular.start_timestamp,N=n.regular.end_timestamp;if(v=v.filter(T=>T.timestamp>=b&&T.timestamp<=N),v.length===0||v[v.length-1].timestamp<N){let f=v.length>0?v[v.length-1].timestamp:b-600;for(;f<N;)f+=600,v.push({timestamp:f,close:null})}}return v},[t,s,h,n]),x=zs[s],{formatTimestampTooltip:y,maxTicksLimit:g,useUtc:w=!1}=x,u=M(),$=Ge(),_=xe(),C=p.useMemo(()=>{const{formatTimestampLabel:v,lineTension:b}=x;return{labels:m.map(N=>v(u,N.timestamp,w?"UTC":a)),datasets:[{data:m.map(N=>N.close),borderColor:e?de():ue(),pointRadius:0,pointHoverRadius:4,pointStyle:"circle",pointBackgroundColor:e?de():ue(),pointHoverBorderWidth:2,pointHoverBorderColor:"rgba(255, 255, 255, 1)",backgroundColor:function(N){const{ctx:T,chartArea:f}=N.chart;if(f)return Zi(T,f,e)},fill:!0,borderWidth:2,lineTension:b??.4}]}},[x,m,e,w,a,u]);return r.jsx("div",{className:"flex h-full flex-col gap-6",children:r.jsxs("div",{className:"relative h-full",onMouseEnter:()=>l(!0),onMouseLeave:()=>{l(!1),o(null)},children:[r.jsx(Kr,{options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},hover:{mode:d?"index":"point"},animation:!1,scales:{x:{afterBuildTicks:v=>{if(v.ticks.length>g)if(h)v.ticks=v.ticks.filter((b,N)=>m[N].timestamp%($?3600:7200)===0);else{const b=Math.ceil(v.ticks.length/(g-1));v.ticks=v.ticks.filter((N,T)=>T>0&&(T%b===0||T===v.ticks.length-1))}},grid:{display:!1},ticks:{...Zt,align:"end"}},y:{ticks:{...Zt,maxTicksLimit:7},border:{display:!1},grid:{color:_?"rgba(255, 255, 255, 0.1)":"rgba(229, 229, 229, 0.5)"}}},plugins:{datalabels:{display:!1},legend:{display:!1},tooltip:{enabled:!1,animation:!1,displayColors:!1,callbacks:{title:function(v){const b=v[0];if(!b)return"";const N=m[b.dataIndex]?.timestamp;return N?y(u,N,w?"UTC":a):""}},external:({tooltip:v})=>{d&&v.opacity>0&&o(se(v.dataPoints?.[0]?.parsed?.y??0)),c(b=>{const N=v.chart.width,T=v.caretX>N-Yi;return!b||b.x!==v.caretX||b.y!==v.caretY||b.opacity!==v.opacity||b.flip!==T?{...b,x:v.caretX,y:v.caretY,dateLabel:v.title?.[0],value:se(v.dataPoints?.[0]?.parsed?.y??0),opacity:v.opacity,flip:T}:b})}},dropShadow:!1,crosshair:{line:{color:_?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",width:.5},zoom:{enabled:!1}}}},data:C}),r.jsx(Vi,{tooltipData:i})]})})}function Vi({tooltipData:e}){return!e||!e.opacity?null:r.jsx("div",{style:{left:e.x-5,top:10,transform:"translate(-50%, -50%)"},className:j("text-token-main-surface-primary dark:bg-token-main-surface-secondary pointer-events-none absolute translate-y-[-100%] rounded-lg bg-black px-2 py-1 font-mono font-semibold whitespace-nowrap dark:text-white"),children:r.jsx("div",{className:"text-xs",children:e.dateLabel})})}function Zi(e,t,s){const n=e.createLinearGradient(0,t.top,0,t.bottom);return n.addColorStop(0,s?de(.4):ue(.4)),n.addColorStop(1,s?de(0):ue(0)),n}function se(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function R({label:e,value:t,className:s}){return r.jsxs("div",{className:j("flex w-full flex-1 flex-row justify-between text-sm",s),children:[r.jsx("span",{className:"text-token-text-secondary font-normal whitespace-nowrap",children:e}),r.jsx("span",{className:"text-token-text-primary font-normal whitespace-nowrap",children:t})]})}function Ki({metrics:e}){const t=M(),s=!!(e.marketCap&&e.peRatio&&e.eps);return r.jsx("div",{className:"border-token-border-default flex flex-col gap-1 rounded-b-lg border-t bg-[#f4f4f4] px-4 py-3 dark:bg-[#393939]",children:r.jsxs("div",{className:j("grid grid-cols-2 gap-x-10 gap-y-3 lg:grid-cols-3 lg:gap-x-6"),children:[r.jsx(R,{label:t.formatMessage({id:"MDHEj7",defaultMessage:"Open"}),value:t.formatNumber(e.openPrice,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-1"}),r.jsx(R,{label:t.formatMessage({id:"PboNMC",defaultMessage:"Volume"}),value:t.formatNumber(e.intradayVolume,{notation:"compact",maximumFractionDigits:1}),className:j("order-2",!s&&"lg:order-last")}),r.jsxs("div",{className:"order-4 row-span-2 flex flex-col gap-3",children:[r.jsx(R,{label:t.formatMessage({id:"bresUW",defaultMessage:"Day Low"}),value:t.formatNumber(e.intradayLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),r.jsx(R,{label:t.formatMessage({id:"oWyv5V",defaultMessage:"Day High"}),value:t.formatNumber(e.intradayHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]}),r.jsxs("div",{className:"order-5 row-span-2 flex flex-col gap-3",children:[r.jsx(R,{label:t.formatMessage({id:"DcEYIK",defaultMessage:"Year Low"}),value:t.formatNumber(e.fiftyTwoWeekLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),r.jsx(R,{label:t.formatMessage({id:"ZfFtJ4",defaultMessage:"Year High"}),value:t.formatNumber(e.fiftyTwoWeekHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.marketCap&&r.jsx(R,{label:t.formatMessage({id:"BzyP4Y",defaultMessage:"Market Cap"}),value:t.formatNumber(e.marketCap,{notation:"compact",maximumFractionDigits:2}),className:"order-last lg:order-3"}),e.peRatio&&e.eps&&r.jsxs(r.Fragment,{children:[r.jsx(R,{label:t.formatMessage({id:"edGd+S",defaultMessage:"EPS (TTM)"}),value:t.formatNumber(e.eps,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-last"}),r.jsx(R,{label:t.formatMessage({id:"AhpCu1",defaultMessage:"P/E Ratio"}),value:t.formatNumber(e.peRatio,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-last"})]})]})})}function Xi({data:e,priceChange:t,highlightedPrice:s,extendedPriceChange:n,url:a}){function o(i,c="intraday",d=null){const{isUp:l,changePercentage:h,changeLabel:m,changeAmount:x}=i,y=Math.abs(h).toFixed(2),g=se(x);return r.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[c==="extended_hours"&&d!=null&&r.jsx("span",{className:"font-semibold",children:r.jsx(k,{id:"HWwWpW",defaultMessage:"{price}",values:{price:d}})}),r.jsx("span",{className:j("font-semibold",l?Wt:Yt),children:r.jsx(k,{id:"3x4Lkl",defaultMessage:"{sign}{changeAmount}",values:{changeAmount:g,sign:l?"+":""}})}),r.jsx("span",{className:j("font-semibold",l?Wt:Yt),children:r.jsx(k,{id:"MbfF1T",defaultMessage:"({sign}{changePercentage}%)",values:{changePercentage:y,sign:l?"+":"-"}})}),c==="extended_hours"?r.jsx("span",{className:"text-token-text-primary min-w-0 truncate",children:m}):r.jsx("span",{className:"text-token-text-primary min-w-0 truncate",children:m})]})}return r.jsxs("div",{children:[r.jsx("div",{className:"mt-2 text-sm",children:e?r.jsx(k,{id:"+2WHuv",defaultMessage:"{name} ({ticker})",values:{name:e.asset.name,ticker:e.asset.ticker}}):r.jsx("div",{className:"w-32 font-medium",children:r.jsx(te,{index:9,width:100})})}),r.jsx("div",{className:"text-token-text-tertiary text-sm",children:e?r.jsx(r.Fragment,{children:a!=null&&r.jsxs(r.Fragment,{children:[" Â· ",r.jsx(Y,{href:a,className:"text-token-link hover:underline",children:os(a,"hostname")})]})}):r.jsx("div",{className:"mt-2 w-36",children:r.jsx(te,{index:6,width:100})})}),r.jsx("div",{className:"mt-2 flex text-4xl font-semibold",children:e?r.jsx(k,{id:"s+1uly",defaultMessage:"{price}",values:{price:s??se(e.price.price)}}):r.jsx("div",{className:"w-32",children:r.jsx(te,{index:0,width:100})})}),r.jsx("div",{className:"mt-2 flex items-center justify-start gap-1 text-sm",children:t?o(t):r.jsx("div",{className:"mt-2 w-40",children:r.jsx(te,{index:3,width:100})})}),r.jsx("div",{className:"mt-0.5 flex items-center justify-start gap-1 text-sm",children:e?.price?.extended_price!=null&&n!=null&&o(n,"extended_hours",se(e.price.extended_price))})]})}function Ji({contentReference:e,trackContentReferenceEvent:t}){const s=M();p.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown","stock")},[t]);const n=Ui(e?.stock?.histories),a=e?.stock,[o,i]=p.useState(n),[c,d]=p.useState(null),l=o==="1d",h=a?.histories?.quotes?.[o??""]?.[0],m=o&&o in ce?o:void 0,x=a&&(h&&!l?{changePercentage:(a.price.price-h.close)/h.close*100,changeAmount:a.price.price-h.close,changeLabel:m?s.formatMessage(ce[m]):"",isUp:a.price.price>h.close}:a.price.change_percent&&a.price.change?{changePercentage:a.price.change_percent*100,changeAmount:a.price.change,changeLabel:ec(a.price.latest_trade_timestamp,a.asset.timezone,s),isUp:a.price.change?a.price.change>0:!1}:null),y=a&&a.price.extended_price!=null&&a.price.extended_change_percent!=null&&a.price.extended_change!=null?{changePercentage:a.price.extended_change_percent*100,changeAmount:a.price.extended_change,changeLabel:s.formatMessage(Qi(a.price.market_status)??ce.extended),isUp:a.price.extended_change>0}:null,{fiftyTwoWeekHigh:g,fiftyTwoWeekLow:w}=p.useMemo(()=>{const _=a?.histories?.quotes["1y"];if(!_)return{fiftyTwoWeekHigh:null,fiftyTwoWeekLow:null};const C=_.map(b=>b.high).filter(b=>b!=null),v=_.map(b=>b.low).filter(b=>b!=null);return{fiftyTwoWeekHigh:C.length>0?Math.max(...C):null,fiftyTwoWeekLow:v.length>0?Math.min(...v):null}},[a?.histories?.quotes]),u=a?.price.open_price&&a.price.intraday_high&&a.price.intraday_low&&a.price.intraday_volume&&g&&w?{openPrice:a.price.open_price,intradayHigh:a.price.intraday_high,intradayLow:a.price.intraday_low,intradayVolume:a.price.intraday_volume,fiftyTwoWeekHigh:g,fiftyTwoWeekLow:w,marketCap:a.metrics?.market_cap??void 0,peRatio:a.metrics?.pe_ratio??void 0,eps:a.metrics?.eps??void 0}:null,$=u!=null;return r.jsxs("div",{className:j("border-token-border-default flex min-h-[480px] flex-col gap-8 rounded-lg border"),children:[r.jsxs("div",{className:"mx-6 flex flex-wrap items-end justify-between",children:[r.jsx(Xi,{data:a??null,highlightedPrice:c,priceChange:x??null,extendedPriceChange:y??null,url:e?.url??null}),r.jsx("div",{className:"mt-4",children:r.jsx(zi,{selectedInterval:o,onSelectHistoryInterval:i,histories:a?.histories})})]}),r.jsx("div",{className:"mx-6 h-[340px]",children:r.jsx(qi,{isUp:x?.isUp??!1,selectedInterval:o,histories:a?.histories,setHighlightedPrice:d,onSelectHistoryInterval:_=>i(_),latestTradingPeriod:a?.asset.latest_trading_period,timezone:a?.asset.timezone??null})}),$&&r.jsx("div",{className:"-mt-4",children:r.jsx(Ki,{metrics:u})})]})}function Qi(e){if(e==null)return null;const t=e.toLowerCase();return t==="premarket"||t==="open"?be({id:"By+pvF",defaultMessage:"Pre-Market"}):t==="afterhours"||t==="closed"?be({id:"aLCg3c",defaultMessage:"After Hours"}):be({id:"2p526c",defaultMessage:"Extended Hours"})}function ec(e,t,s){function n(a,o){const c=Z(new Date,o),d=s.formatDate(c,{year:"numeric",month:"2-digit",day:"2-digit"}),l=Be(a*1e3),h=Z(l,o),m=s.formatDate(h,{year:"numeric",month:"2-digit",day:"2-digit"});return d===m}if(!e||!t||n(e,t))return s.formatMessage(ce["1d"]);{const a=Be(e*1e3),o=Z(a,t);return s.formatDate(o,{month:"long",day:"numeric"})}}const ce=pe({"1d":{id:"SMdcuo",defaultMessage:"Today"},extended:{id:"2p526c",defaultMessage:"Extended Hours"},"5d":{id:"HCA6lr",defaultMessage:"Past 5 days"},"1m":{id:"DJpPMq",defaultMessage:"Past month"},"6m":{id:"1mUJ2L",defaultMessage:"Past 6 months"},ytd:{id:"b9KkhV",defaultMessage:"Year to date"},"1y":{id:"XnvD9A",defaultMessage:"Past year"},"5y":{id:"DfI1RB",defaultMessage:"Past 5 years"},max:{id:"WzOhuU",defaultMessage:"Max"}}),tc={google_maps:{title:"Google Maps"}};function sc({metadata:e,trackContentReferenceEvent:t}){p.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=tc[e.provider]?.title??"Maps";return r.jsx("span",{children:r.jsx(k,{id:"ZSUz1k",defaultMessage:" ({link}) ",values:{link:r.jsx(Y,{href:e.url,children:s})}})})}function nc(e){"use forget";const t=rs.c(19),{metadata:s,trackContentReferenceEvent:n}=e,a=s.items.length>0,o=p.useRef(n);let i,c;t[0]!==n?(i=()=>{o.current=n},c=[n],t[0]=n,t[1]=i,t[2]=c):(i=t[1],c=t[2]),p.useEffect(i,c);let d,l;t[3]!==a?(d=()=>{a&&o.current("Search Content Reference Shown","search_content_reference_shown","nav_list")},l=[a],t[3]=a,t[4]=d,t[5]=l):(d=t[4],l=t[5]),p.useEffect(d,l);const h=!Ge(),m=ae();if(s.items.length===0)return null;const x=h||m?2:s.items.length;let y;t[6]!==s.title?(y=s.title&&r.jsx("div",{className:"text-token-text-primary -mb-1 pb-3 font-semibold",children:s.title}),t[6]=s.title,t[7]=y):y=t[7];let g;if(t[8]!==x||t[9]!==s.items||t[10]!==n){let $;t[12]!==n?($=(_,C)=>r.jsx(rc,{item:_,index:C,trackContentReferenceEvent:n,className:"flex-1"},C),t[12]=n,t[13]=$):$=t[13],g=s.items.slice(0,x).map($),t[8]=x,t[9]=s.items,t[10]=n,t[11]=g}else g=t[11];let w;t[14]!==g?(w=r.jsx("div",{className:"flex flex-row justify-start gap-4",children:g}),t[14]=g,t[15]=w):w=t[15];let u;return t[16]!==y||t[17]!==w?(u=r.jsxs("div",{className:"mt-6",children:[y,w]}),t[16]=y,t[17]=w,t[18]=u):u=t[18],u}function rc({item:e,index:t,trackContentReferenceEvent:s,className:n}){const{isSuccess:a}=Le(e.thumbnail_url??void 0),o={url:e.url,title:e.title,section_index:t,link_type:"text",section:"nav_list",section_location:"response"};p.useEffect(()=>{s("link_action","link_action","nav_list",{...o,action:"show"})},[]);const c=M().locale,d=e.pub_date!=null?new Date(e.pub_date*1e3):null,l=new Intl.RelativeTimeFormat(c,{numeric:"auto"}),h=d?Math.max(Math.floor((Date.now()-d.getTime())/(1e3*60*60*24)),0):null;let m=h!=null?l.format(-h,"day"):null;return c.startsWith("en")&&m&&(m=m.charAt(0).toUpperCase()+m.slice(1)),r.jsxs(Y,{className:`group/nav-list pt border-token-border-default bg-token-main-surface-primary dark:bg-token-main-surface-secondary relative flex flex-col items-center gap-4 overflow-hidden rounded-xl border pb-6 hover:shadow-sm ${n} max-w-1/2`,href:e.url,onClick:()=>{s("link_action","link_action","nav_list",{...o,action:"click"})},children:[a&&e.thumbnail_url?r.jsx("div",{className:"relative h-36 w-full overflow-hidden",children:r.jsx("img",{src:e.thumbnail_url,className:"m-0 h-full w-full",style:{objectFit:"cover"},alt:e.title})}):r.jsxs("div",{className:"icon-bg relative flex h-36 w-full shrink-0 items-center justify-center overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat blur-3xl",children:r.jsx(_e,{url:e.url,size:256,minSize:128,className:"mix-soft-light opacity-30 dark:opacity-20"})}),r.jsx("div",{className:"absolute flex h-10 w-10 items-center justify-center",children:r.jsx(_e,{url:e.url,size:128,minSize:80,className:"icon-xl rounded-full"})})]}),r.jsxs("div",{className:"flex flex-col gap-2 overflow-hidden px-4 text-ellipsis",children:[r.jsxs("div",{className:"text-token-text-primary flex items-center gap-1.5 text-xs",children:[r.jsx(_e,{url:e.url,size:32,minSize:16,className:"icon-xs my-0 rounded-full"}),e.attribution??os(e.url)]}),r.jsx("div",{className:"text-token-text-primary decoration-token-link line-clamp-5 text-sm font-medium",children:e.title}),m&&r.jsx("div",{className:"text-token-text-secondary text-xs",children:m})]})]})}function H(e,t){const s=Tn(e),n=t<0?"-":"+",a=Math.abs(t),o=Math.floor(a/3600).toString().padStart(2,"0"),i=Math.floor(a%3600/60).toString().padStart(2,"0"),c=`${n}${o}:${i}`;return Z(s,c)}function We(e,t){if(ut(t))return r.jsx(k,{id:"wxni9H",defaultMessage:"Today"});const s=new Date;return s.setTime(s.getTime()+7*24*60*60*1e3),t<s&&t>new Date||ut(t)?e.formatDate(t,{weekday:"long"}):e.formatDate(t,{weekday:"short",month:"short",day:"numeric"})}const ac="webp",oc=250,ic=187,cc="srgb",lc=4,dc="uchar",uc=72,hc=!1,fc=!1,mc=!0,pc="/assets/missing-logo-h96s4tk9.webp",Kt={format:ac,width:oc,height:ic,space:cc,channels:lc,depth:dc,density:uc,isProgressive:hc,hasProfile:fc,hasAlpha:mc,src:pc};function Us({team:e,className:t}){const[s,n]=p.useState(e.logo??Kt.src),a=()=>{Ve.addError("Unable to load sports widget logo",{name:e.name,logo:e.logo}),n(Kt.src)};return r.jsx("img",{src:s,alt:e.name,className:t,onError:a})}const ne=["ipl"],Xt=6,U="home",B="away";function gc({scheduleRef:e,trackContentReferenceEvent:t}){const[s,n]=p.useState(!0),a=M(),o=e.games.length>0,i=e.league.id,c=Mn(),d=ae();if(p.useEffect(()=>{o&&t("Search Content Reference Shown","search_content_reference_shown","sports",{hasSchedule:!0})},[o]),!o)return null;const h=(a.formatDateToParts(new Date,{timeZoneName:"long"}).find(g=>g.type==="timeZoneName")?.value??Intl.DateTimeFormat().resolvedOptions().timeZone).replace(/Daylight|Standard/g,"");let m=e.games;const x=g=>Math.abs(new Date().getTime()-new Date(g.date).getTime());x(m[0])>x(m[m.length-1])&&(m=m.slice().reverse());const y=s?m.slice(0,Xt):m;return r.jsxs("div",{className:"not-prose mb-3",children:[r.jsx("div",{className:"font-semibold",children:r.jsx(k,{id:"LA6z9q",defaultMessage:"{league} Schedule",values:{league:e.league.display_name}})}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:h}),y.length===1?r.jsx("div",{children:r.jsx(ct,{children:r.jsx(lt.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.2},children:r.jsx("div",{className:"border-token-border-medium mt-3 rounded-xl border py-3",children:r.jsx(yc,{game:y[0],useAlias:ne.includes(i),leagueId:i,activeTeam:y[0]?.active_team??null,isMobile:d})})})})}):r.jsx("div",{className:"grid grid-cols-1 pt-3 lg:grid-cols-2",children:r.jsx(ct,{children:y.map((g,w)=>r.jsx(lt.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0,transition:{delay:w*.04}},exit:{opacity:0,y:-15},transition:{duration:.2},children:r.jsx("div",{className:j("border-token-border-medium border-b py-3",w%2===0&&"lg:border-e lg:pe-4",w%2===1&&"lg:ps-4",Math.floor(w/2)===Math.ceil(m.length/2)-1&&"lg:border-b-0",w===m.length-1&&"border-b-0"),children:r.jsx(xc,{game:g,useAlias:(c||d)&&ne.includes(i),leagueId:i,activeTeam:g.active_team??null})})},w))})}),m.length>Xt&&r.jsx("div",{className:"mt-2 flex items-center justify-between",children:r.jsx("button",{className:"flex items-center text-sm font-semibold",onClick:()=>n(!s),children:s?r.jsx(k,{id:"BH/Ee5",defaultMessage:"Show more {icon}",values:{icon:r.jsx(Pn,{className:"mb-[-2px]"})}}):r.jsx(k,{id:"Z9BlEu",defaultMessage:"Show less {icon}",values:{icon:r.jsx(Dn,{className:"mb-[-2px]"})}})})})]})}function xc({game:e,useAlias:t=!1,leagueId:s,activeTeam:n}){const a=Ws(e),o=[e.first_team_info,e.second_team_info],i=o.find(h=>h.location===U)??e.first_team_info,c=o.find(h=>h.location===B)??e.second_team_info,d=a?.team.name===i?.team.name,l=a?.team.name===c?.team.name;return r.jsxs("div",{className:"flex w-full gap-1.5 py-3 text-base",children:[r.jsxs("div",{className:"flex flex-auto flex-col items-start gap-1 pe-3",children:[r.jsx(fe,{team:c.team,isWinner:l,isActive:n===B,logoSize:"small",useAlias:t}),r.jsx(fe,{team:i.team,isWinner:d,isActive:n===U,logoSize:"small",useAlias:t})]}),r.jsxs("div",{className:j("flex flex-none flex-col items-start gap-1",ne.includes(s)&&"me-4"),children:[r.jsx(me,{score:c.score,scoreSuffix:c.score_suffix,scoreParenthetical:c.score_parenthetical?{message:c.score_parenthetical,position:"right"}:null,isWinner:l,negateScore:he(s,B,n)}),r.jsx(me,{score:i.score,scoreSuffix:i.score_suffix,scoreParenthetical:i.score_parenthetical?{message:i.score_parenthetical,position:"right"}:null,isWinner:d,negateScore:he(s,U,n)})]}),r.jsx("div",{className:"flex min-w-24 flex-none flex-col items-end justify-center gap-1 text-sm",children:r.jsx(Ys,{game:e})})]})}function yc({game:e,useAlias:t=!1,leagueId:s,activeTeam:n,isMobile:a}){const o=Ws(e),i=[e.first_team_info,e.second_team_info],c=i.find(m=>m.location===U)??e.first_team_info,d=i.find(m=>m.location===B)??e.second_team_info,l=o?.team.name===c?.team.name,h=o?.team.name===d?.team.name;return r.jsxs("div",{className:"flex w-full py-3 text-base",children:[r.jsx("div",{className:"flex flex-1 items-center justify-center px-2",children:r.jsx(fe,{team:d.team,isWinner:h,isActive:n===B,useAlias:t,layoutDirection:a?"column":"row"})}),r.jsx("div",{className:"ms-2 flex items-center justify-start sm:ms-8",children:r.jsx(me,{score:d.score,scoreSuffix:d.score_suffix,scoreParenthetical:d.score_parenthetical?{message:d.score_parenthetical,position:"bottom"}:null,isWinner:h,negateScore:he(s,B,n),className:"text-sm font-semibold sm:text-lg"})}),r.jsx("div",{className:"mx-2 flex w-24 shrink flex-col items-center justify-center gap-1 align-middle text-sm",children:r.jsx(Ys,{game:e})}),r.jsx("div",{className:"me-2 flex items-center justify-end sm:me-8",children:r.jsx(me,{score:c.score,scoreSuffix:c.score_suffix,scoreParenthetical:c.score_parenthetical?{message:c.score_parenthetical,position:"bottom"}:null,isWinner:l,negateScore:he(s,U,n),className:"text-sm font-semibold sm:text-lg"})}),r.jsx("div",{className:"flex flex-1 items-center justify-center md:px-2",children:r.jsx(fe,{team:c.team,isWinner:l,isActive:n===U,useAlias:t,layoutDirection:a?"column":"row"})})]})}function Bs(e){return e.live?"live":new Date(e.date)<new Date?"complete":"scheduled"}function Ws(e){return Bs(e)!=="complete"||e.first_team_info.score==null||e.second_team_info.score==null?null:e.first_team_info.score>e.second_team_info.score?e.first_team_info:e.second_team_info}function he(e,t,s){return ne.includes(e)&&t===U&&s===B}function fe({team:e,isWinner:t,isActive:s,logoSize:n,useAlias:a=!1,layoutDirection:o="row"}){return r.jsxs("span",{className:j("flex items-center gap-1",t&&"font-semibold","max-w-64 lg:max-w-52 xl:max-w-64",o==="column"&&"flex-col"),children:[e.logo&&r.jsx(Us,{team:{name:e.name,logo:e.logo},className:j(n==="small"?"w-6":"w-8")}),r.jsx("span",{className:"truncate",children:a?e.alias:e.name}),s&&r.jsx("span",{className:"bg-token-surface-error inline-block h-2 w-2 rounded-full"})]})}function me({score:e,scoreSuffix:t,scoreParenthetical:s,isWinner:n,negateScore:a=!1,className:o}){const i=M();return e==null?null:r.jsxs("span",{className:j(n&&"font-semibold",o),children:[a?i.formatMessage({id:"sports.dash",defaultMessage:"-"}):e,t&&!a&&r.jsx("span",{children:t}),s&&!a&&r.jsx("span",{className:j("text-token-text-secondary font-normal",s.position==="right"&&"ms-1",s.position==="bottom"&&"mx-auto block text-center"),children:`(${s.message})`})]})}function Ys({game:e}){const t=M();switch(Bs(e)){case"live":return r.jsxs(r.Fragment,{children:[r.jsx(bc,{}),r.jsx("div",{children:e.details})]});case"complete":return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-semibold",children:r.jsx(k,{id:"q/iMZL",defaultMessage:"Final"})}),r.jsx("div",{className:"text-token-text-secondary",children:We(t,new Date(e.date))})]});case"scheduled":{const s=new Date(e.date);return isNaN(s.getTime())?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{children:We(t,s)}),r.jsx("div",{className:"text-token-text-secondary",children:t.formatDate(s,{timeStyle:"short"})})]})}}}function bc(){return r.jsx("div",{className:"bg-token-surface-error rounded-[4px] px-1.5 py-1 text-xs font-semibold text-white",children:r.jsx(k,{id:"vObALn",defaultMessage:"Live"})})}function wc({standingsRef:e,trackContentReferenceEvent:t}){const[s,n]=p.useState(0),a=e.conferences.length>0,o=ae(),i=e.league.id;p.useEffect(()=>{a&&t("Search Content Reference Shown","search_content_reference_shown","sports",{hasStandings:!0})},[a]);const c=e.conferences[s],d=e.conferences.length>1?e.conferences.map((l,h)=>r.jsx("button",{className:j(s===h?"text-token-text-primary":"text-token-text-tertiary","text-sm font-semibold"),onClick:()=>n(h),children:l.name},l.name)):null;return r.jsxs(r.Fragment,{children:[d&&r.jsx("div",{className:"flex gap-4",children:d}),r.jsx("div",{className:"mt-3",children:c.divisions.map(l=>l.name?r.jsx("div",{className:"mt-3",children:r.jsx(Jt,{division:l,teamsColumnHeader:l.name})},l.name):r.jsx(Jt,{division:l,useAlias:o&&ne.includes(i)}))})]})}function Jt({division:e,teamsColumnHeader:t,useAlias:s}){const n=e.headers.map(a=>a.key);return r.jsxs(A.Root,{size:"compact",className:"not-prose",children:[r.jsxs(A.Header,{children:[r.jsx(vc,{children:t??r.jsx(k,{id:"kKSGje",defaultMessage:"Team"})}),e.headers.map(a=>r.jsx(qs,{textAlign:"center",className:"min-w-11 px-0!",children:r.jsx(Qt,{data:a})},a.key))]}),r.jsx(A.Body,{children:e.teams.map(({team:a,data:o},i)=>{const c=o.reduce((d,l)=>(d[l.key]=l,d),{});return r.jsxs(A.Row,{children:[r.jsx(A.Cell,{className:"w-full border-0! py-0! ps-0!",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-token-text-tertiary me-2 w-4 whitespace-nowrap tabular-nums",children:i+1}),r.jsxs("div",{className:"flex items-center justify-start gap-2",children:[r.jsx(Us,{team:a,className:"w-6"}),r.jsx("span",{className:"text-base whitespace-nowrap",children:s?a.alias:a.name})]})]})}),n.map(d=>r.jsx(A.Cell,{className:"min-w-11 border-0! px-0! py-0! text-start whitespace-nowrap tabular-nums",textAlign:"center",children:r.jsx(Qt,{data:c[d]})},d))]},a.name)})})]})}function Qt({data:e}){switch(e.type){case"text":return r.jsx(r.Fragment,{children:e.text});default:return r.jsx(r.Fragment,{children:e.alt})}}const qs=hs(A.HeaderCell)`text-token-text-secondary font-normal! text-sm static! bg-transparent! border-token-border-default! border-t-0! border-s-0! border-e-0!`,vc=hs(qs)`text-token-text-primary ps-0!`;function _c({metadata:e,trackContentReferenceEvent:t}){p.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=M(),n=Z(e.utc_time,e.utc_offset),a=s.formatDate(n,{hour:"numeric",minute:"numeric"});return r.jsx("span",{children:a})}function jc({metadata:e,trackContentReferenceEvent:t}){return p.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]),r.jsx("div",{children:e.url?r.jsx(Xr,{webpageItem:{url:e.url,title:e.description,pub_date:null,snippet:"",attributions:null},className:"inline-flex flex-col",children:r.jsx(Y,{href:e.url,className:"font-semibold!",children:e.description})}):r.jsx("div",{className:"font-semibold!",children:e.description})})}function $c({url:e,className:t}){let s;const n="aspect-video w-full rounded-lg",a=Nc(e);a&&(s=r.jsx(kc,{videoId:a,className:n}));const o=Cc(e);return o&&(s=r.jsx(Sc,{videoId:o,className:n})),s?r.jsx("div",{className:t,children:s}):null}function Nc(e){const t=/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,s=e.match(t);return s?s[1]:null}function kc({videoId:e,className:t}){return r.jsx("iframe",{className:t,src:`https://www.youtube.com/embed/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}function Cc(e){const t=/vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^/]+\/videos\/|video\/|)(\d+)/,s=e.match(t);return s?s[1]:null}function Sc({videoId:e,className:t}){return r.jsx(r.Fragment,{children:r.jsx("iframe",{className:t,src:`https://player.vimeo.com/video/${e}`,frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})})}function Tc({video:e,trackContentReferenceEvent:t}){const s={url:e.url,title:e.title};return p.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type,s)},[]),e.url==null||e.url===""?null:r.jsx("div",{className:"not-prose mb-3 flex flex-col gap-4 text-base",children:r.jsx($c,{url:e.url})})}const Mc=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.34354 4.92894C6.7341 5.31946 6.7341 5.95263 6.34354 6.34315C3.21906 9.46735 3.21906 14.5327 6.34354 17.6569C6.7341 18.0474 6.7341 18.6806 6.34354 19.0711C5.95298 19.4616 5.31976 19.4616 4.9292 19.0711C1.0236 15.1658 1.0236 8.83418 4.9292 4.92894C5.31976 4.53842 5.95298 4.53842 6.34354 4.92894ZM17.6583 4.92894C18.0488 4.53842 18.682 4.53842 19.0726 4.92894C22.9782 8.83418 22.9782 15.1658 19.0726 19.0711C18.682 19.4616 18.0488 19.4616 17.6583 19.0711C17.2677 18.6806 17.2677 18.0474 17.6583 17.6569C20.7827 14.5327 20.7827 9.46735 17.6583 6.34315C17.2677 5.95263 17.2677 5.31946 17.6583 4.92894Z",fill:"currentColor"}),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.17222 7.75737C9.56278 8.14789 9.56278 8.78106 9.17222 9.17158C7.60998 10.7337 7.60998 13.2663 9.17222 14.8284C9.56278 15.219 9.56278 15.8521 9.17222 16.2426C8.78166 16.6332 8.14844 16.6332 7.75788 16.2426C5.41452 13.8995 5.41452 10.1005 7.75788 7.75737C8.14844 7.36684 8.78166 7.36684 9.17222 7.75737ZM14.8296 7.75737C15.2201 7.36684 15.8534 7.36684 16.2439 7.75737C18.5873 10.1005 18.5873 13.8995 16.2439 16.2426C15.8534 16.6332 15.2201 16.6332 14.8296 16.2426C14.439 15.8521 14.439 15.219 14.8296 14.8284C16.3918 13.2663 16.3918 10.7337 14.8296 9.17158C14.439 8.78106 14.439 8.14789 14.8296 7.75737Z",fill:"currentColor"}),p.createElement("path",{d:"M14.0011 12C14.0011 13.1046 13.1056 14 12.0009 14C10.8962 14 10.0007 13.1046 10.0007 12C10.0007 10.8954 10.8962 10 12.0009 10C13.1056 10 14.0011 10.8954 14.0011 12Z",fill:"currentColor"})),Pc="webp",Dc=96,Ec=96,Ac="srgb",Lc=4,Ic="uchar",Fc=288,Rc=!1,Oc=!1,Hc=!0,zc="/assets/cloud-foggy-o4a3hmky.webp",Uc={format:Pc,width:Dc,height:Ec,space:Ac,channels:Lc,depth:Ic,density:Fc,isProgressive:Rc,hasProfile:Oc,hasAlpha:Hc,src:zc},Bc="webp",Wc=96,Yc=96,qc="srgb",Gc=4,Vc="uchar",Zc=288,Kc=!1,Xc=!1,Jc=!0,Qc="/assets/cloudy-co8vwrk7.webp",el={format:Bc,width:Wc,height:Yc,space:qc,channels:Gc,depth:Vc,density:Zc,isProgressive:Kc,hasProfile:Xc,hasAlpha:Jc,src:Qc},tl="webp",sl=96,nl=96,rl="srgb",al=4,ol="uchar",il=288,cl=!1,ll=!1,dl=!0,ul="/assets/heavy-snow-mke52kag.webp",hl={format:tl,width:sl,height:nl,space:rl,channels:al,depth:ol,density:il,isProgressive:cl,hasProfile:ll,hasAlpha:dl,src:ul},fl="webp",ml=96,pl=96,gl="srgb",xl=4,yl="uchar",bl=288,wl=!1,vl=!1,_l=!0,jl="/assets/light-snow-mcy1l7t9.webp",$l={format:fl,width:ml,height:pl,space:gl,channels:xl,depth:yl,density:bl,isProgressive:wl,hasProfile:vl,hasAlpha:_l,src:jl},Nl="webp",kl=96,Cl=96,Sl="srgb",Tl=4,Ml="uchar",Pl=288,Dl=!1,El=!1,Al=!0,Ll="/assets/moon-drizzle-cplxr2ub.webp",Il={format:Nl,width:kl,height:Cl,space:Sl,channels:Tl,depth:Ml,density:Pl,isProgressive:Dl,hasProfile:El,hasAlpha:Al,src:Ll},Fl="webp",Rl=96,Ol=96,Hl="srgb",zl=4,Ul="uchar",Bl=288,Wl=!1,Yl=!1,ql=!0,Gl="/assets/moon-hazy-jvgt25bp.webp",Vl={format:Fl,width:Rl,height:Ol,space:Hl,channels:zl,depth:Ul,density:Bl,isProgressive:Wl,hasProfile:Yl,hasAlpha:ql,src:Gl},Zl="webp",Kl=96,Xl=96,Jl="srgb",Ql=4,ed="uchar",td=288,sd=!1,nd=!1,rd=!0,ad="/assets/moon-mostly-cloudy-cia3do0v.webp",od={format:Zl,width:Kl,height:Xl,space:Jl,channels:Ql,depth:ed,density:td,isProgressive:sd,hasProfile:nd,hasAlpha:rd,src:ad},id="webp",cd=96,ld=96,dd="srgb",ud=4,hd="uchar",fd=288,md=!1,pd=!1,gd=!0,xd="/assets/moon-mostly-sunny-n3mh1b6a.webp",yd={format:id,width:cd,height:ld,space:dd,channels:ud,depth:hd,density:fd,isProgressive:md,hasProfile:pd,hasAlpha:gd,src:xd},bd="webp",wd=96,vd=96,_d="srgb",jd=4,$d="uchar",Nd=288,kd=!1,Cd=!1,Sd=!0,Td="/assets/moon-shower-ntzhti9o.webp",Md={format:bd,width:wd,height:vd,space:_d,channels:jd,depth:$d,density:Nd,isProgressive:kd,hasProfile:Cd,hasAlpha:Sd,src:Td},Pd="webp",Dd=96,Ed=96,Ad="srgb",Ld=4,Id="uchar",Fd=288,Rd=!1,Od=!1,Hd=!0,zd="/assets/moon-sunny-eg2emh4d.webp",Ud={format:Pd,width:Dd,height:Ed,space:Ad,channels:Ld,depth:Id,density:Fd,isProgressive:Rd,hasProfile:Od,hasAlpha:Hd,src:zd},Bd="webp",Wd=96,Yd=96,qd="srgb",Gd=4,Vd="uchar",Zd=288,Kd=!1,Xd=!1,Jd=!0,Qd="/assets/rain-thunder-bx7a0l5g.webp",eu={format:Bd,width:Wd,height:Yd,space:qd,channels:Gd,depth:Vd,density:Zd,isProgressive:Kd,hasProfile:Xd,hasAlpha:Jd,src:Qd},tu="webp",su=96,nu=96,ru="srgb",au=4,ou="uchar",iu=288,cu=!1,lu=!1,du=!0,uu="/assets/rain-cxs76xuj.webp",hu={format:tu,width:su,height:nu,space:ru,channels:au,depth:ou,density:iu,isProgressive:cu,hasProfile:lu,hasAlpha:du,src:uu},fu="webp",mu=96,pu=96,gu="srgb",xu=4,yu="uchar",bu=288,wu=!1,vu=!1,_u=!0,ju="/assets/sleet-gc63vwmo.webp",$u={format:fu,width:mu,height:pu,space:gu,channels:xu,depth:yu,density:bu,isProgressive:wu,hasProfile:vu,hasAlpha:_u,src:ju},Nu="webp",ku=96,Cu=96,Su="srgb",Tu=4,Mu="uchar",Pu=288,Du=!1,Eu=!1,Au=!0,Lu="/assets/snow-d0k6tmmc.webp",Iu={format:Nu,width:ku,height:Cu,space:Su,channels:Tu,depth:Mu,density:Pu,isProgressive:Du,hasProfile:Eu,hasAlpha:Au,src:Lu},Fu="webp",Ru=96,Ou=96,Hu="srgb",zu=4,Uu="uchar",Bu=288,Wu=!1,Yu=!1,qu=!0,Gu="/assets/sun-drizzle-g94obr5e.webp",Vu={format:Fu,width:Ru,height:Ou,space:Hu,channels:zu,depth:Uu,density:Bu,isProgressive:Wu,hasProfile:Yu,hasAlpha:qu,src:Gu},Zu="webp",Ku=96,Xu=96,Ju="srgb",Qu=4,eh="uchar",th=288,sh=!1,nh=!1,rh=!0,ah="/assets/sun-hazy-c3z1j0hy.webp",oh={format:Zu,width:Ku,height:Xu,space:Ju,channels:Qu,depth:eh,density:th,isProgressive:sh,hasProfile:nh,hasAlpha:rh,src:ah},ih="webp",ch=96,lh=96,dh="srgb",uh=4,hh="uchar",fh=288,mh=!1,ph=!1,gh=!0,xh="/assets/sun-mostly-cloudy-d4o4zkga.webp",yh={format:ih,width:ch,height:lh,space:dh,channels:uh,depth:hh,density:fh,isProgressive:mh,hasProfile:ph,hasAlpha:gh,src:xh},bh="webp",wh=96,vh=96,_h="srgb",jh=4,$h="uchar",Nh=288,kh=!1,Ch=!1,Sh=!0,Th="/assets/sun-mostly-sunny-livrdkgu.webp",Mh={format:bh,width:wh,height:vh,space:_h,channels:jh,depth:$h,density:Nh,isProgressive:kh,hasProfile:Ch,hasAlpha:Sh,src:Th},Ph="webp",Dh=96,Eh=96,Ah="srgb",Lh=4,Ih="uchar",Fh=288,Rh=!1,Oh=!1,Hh=!0,zh="/assets/sun-shower-lvtjthah.webp",Uh={format:Ph,width:Dh,height:Eh,space:Ah,channels:Lh,depth:Ih,density:Fh,isProgressive:Rh,hasProfile:Oh,hasAlpha:Hh,src:zh},Bh="webp",Wh=96,Yh=96,qh="srgb",Gh=4,Vh="uchar",Zh=288,Kh=!1,Xh=!1,Jh=!0,Qh="/assets/sun-sunny-kqjpjzd8.webp",ef={format:Bh,width:Wh,height:Yh,space:qh,channels:Gh,depth:Vh,density:Zh,isProgressive:Kh,hasProfile:Xh,hasAlpha:Jh,src:Qh},tf="webp",sf=96,nf=96,rf="srgb",af=4,of="uchar",cf=288,lf=!1,df=!1,uf=!0,hf="/assets/thunder-jgjqg9ai.webp",ff={format:tf,width:sf,height:nf,space:rf,channels:af,depth:of,density:cf,isProgressive:lf,hasProfile:df,hasAlpha:uf,src:hf},mf="webp",pf=96,gf=96,xf="srgb",yf=4,bf="uchar",wf=288,vf=!1,_f=!1,jf=!0,$f="/assets/tornado-opa24tq3.webp",Nf={format:mf,width:pf,height:gf,space:xf,channels:yf,depth:bf,density:wf,isProgressive:vf,hasProfile:_f,hasAlpha:jf,src:$f},kf="webp",Cf=96,Sf=96,Tf="srgb",Mf=4,Pf="uchar",Df=288,Ef=!1,Af=!1,Lf=!0,If="/assets/windy-mw0a3u21.webp",Ff={format:kf,width:Cf,height:Sf,space:Tf,channels:Mf,depth:Pf,density:Df,isProgressive:Ef,hasProfile:Af,hasAlpha:Lf,src:If},Rf="webp",Of=96,Hf=96,zf="srgb",Uf=4,Bf="uchar",Wf=288,Yf=!1,qf=!1,Gf=!0,Vf="/assets/cloud-foggy-fhg0jn0w.webp",Zf={format:Rf,width:Of,height:Hf,space:zf,channels:Uf,depth:Bf,density:Wf,isProgressive:Yf,hasProfile:qf,hasAlpha:Gf,src:Vf},Kf="webp",Xf=96,Jf=96,Qf="srgb",em=4,tm="uchar",sm=288,nm=!1,rm=!1,am=!0,om="/assets/cloudy-disd26f3.webp",im={format:Kf,width:Xf,height:Jf,space:Qf,channels:em,depth:tm,density:sm,isProgressive:nm,hasProfile:rm,hasAlpha:am,src:om},cm="webp",lm=96,dm=96,um="srgb",hm=4,fm="uchar",mm=288,pm=!1,gm=!1,xm=!0,ym="/assets/heavy-snow-g6jjwo2d.webp",bm={format:cm,width:lm,height:dm,space:um,channels:hm,depth:fm,density:mm,isProgressive:pm,hasProfile:gm,hasAlpha:xm,src:ym},wm="webp",vm=96,_m=96,jm="srgb",$m=4,Nm="uchar",km=288,Cm=!1,Sm=!1,Tm=!0,Mm="/assets/light-snow-iz0efpkh.webp",Pm={format:wm,width:vm,height:_m,space:jm,channels:$m,depth:Nm,density:km,isProgressive:Cm,hasProfile:Sm,hasAlpha:Tm,src:Mm},Dm="webp",Em=96,Am=96,Lm="srgb",Im=4,Fm="uchar",Rm=288,Om=!1,Hm=!1,zm=!0,Um="/assets/moon-drizzle-b1nfv39c.webp",Bm={format:Dm,width:Em,height:Am,space:Lm,channels:Im,depth:Fm,density:Rm,isProgressive:Om,hasProfile:Hm,hasAlpha:zm,src:Um},Wm="webp",Ym=96,qm=96,Gm="srgb",Vm=4,Zm="uchar",Km=288,Xm=!1,Jm=!1,Qm=!0,ep="/assets/moon-hazy-nfnzea7a.webp",tp={format:Wm,width:Ym,height:qm,space:Gm,channels:Vm,depth:Zm,density:Km,isProgressive:Xm,hasProfile:Jm,hasAlpha:Qm,src:ep},sp="webp",np=96,rp=96,ap="srgb",op=4,ip="uchar",cp=288,lp=!1,dp=!1,up=!0,hp="/assets/moon-mostly-cloudy-e56e3z55.webp",fp={format:sp,width:np,height:rp,space:ap,channels:op,depth:ip,density:cp,isProgressive:lp,hasProfile:dp,hasAlpha:up,src:hp},mp="webp",pp=96,gp=96,xp="srgb",yp=4,bp="uchar",wp=288,vp=!1,_p=!1,jp=!0,$p="/assets/moon-mostly-sunny-ffu4gzf4.webp",Np={format:mp,width:pp,height:gp,space:xp,channels:yp,depth:bp,density:wp,isProgressive:vp,hasProfile:_p,hasAlpha:jp,src:$p},kp="webp",Cp=96,Sp=96,Tp="srgb",Mp=4,Pp="uchar",Dp=288,Ep=!1,Ap=!1,Lp=!0,Ip="/assets/moon-shower-e5dy9u48.webp",Fp={format:kp,width:Cp,height:Sp,space:Tp,channels:Mp,depth:Pp,density:Dp,isProgressive:Ep,hasProfile:Ap,hasAlpha:Lp,src:Ip},Rp="webp",Op=96,Hp=96,zp="srgb",Up=4,Bp="uchar",Wp=288,Yp=!1,qp=!1,Gp=!0,Vp="/assets/moon-sunny-d9o08xiw.webp",Zp={format:Rp,width:Op,height:Hp,space:zp,channels:Up,depth:Bp,density:Wp,isProgressive:Yp,hasProfile:qp,hasAlpha:Gp,src:Vp},Kp="webp",Xp=96,Jp=96,Qp="srgb",eg=4,tg="uchar",sg=288,ng=!1,rg=!1,ag=!0,og="/assets/rain-thunder-eplemvu1.webp",ig={format:Kp,width:Xp,height:Jp,space:Qp,channels:eg,depth:tg,density:sg,isProgressive:ng,hasProfile:rg,hasAlpha:ag,src:og},cg="webp",lg=96,dg=96,ug="srgb",hg=4,fg="uchar",mg=288,pg=!1,gg=!1,xg=!0,yg="/assets/rain-ogayr6kt.webp",bg={format:cg,width:lg,height:dg,space:ug,channels:hg,depth:fg,density:mg,isProgressive:pg,hasProfile:gg,hasAlpha:xg,src:yg},wg="webp",vg=96,_g=96,jg="srgb",$g=4,Ng="uchar",kg=288,Cg=!1,Sg=!1,Tg=!0,Mg="/assets/sleet-o8noil7l.webp",Pg={format:wg,width:vg,height:_g,space:jg,channels:$g,depth:Ng,density:kg,isProgressive:Cg,hasProfile:Sg,hasAlpha:Tg,src:Mg},Dg="webp",Eg=96,Ag=96,Lg="srgb",Ig=4,Fg="uchar",Rg=288,Og=!1,Hg=!1,zg=!0,Ug="/assets/snow-lq4cl3uc.webp",Bg={format:Dg,width:Eg,height:Ag,space:Lg,channels:Ig,depth:Fg,density:Rg,isProgressive:Og,hasProfile:Hg,hasAlpha:zg,src:Ug},Wg="webp",Yg=96,qg=96,Gg="srgb",Vg=4,Zg="uchar",Kg=288,Xg=!1,Jg=!1,Qg=!0,ex="/assets/sun-drizzle-htsohv65.webp",tx={format:Wg,width:Yg,height:qg,space:Gg,channels:Vg,depth:Zg,density:Kg,isProgressive:Xg,hasProfile:Jg,hasAlpha:Qg,src:ex},sx="webp",nx=96,rx=96,ax="srgb",ox=4,ix="uchar",cx=288,lx=!1,dx=!1,ux=!0,hx="/assets/sun-hazy-nfj7clcd.webp",fx={format:sx,width:nx,height:rx,space:ax,channels:ox,depth:ix,density:cx,isProgressive:lx,hasProfile:dx,hasAlpha:ux,src:hx},mx="webp",px=96,gx=96,xx="srgb",yx=4,bx="uchar",wx=288,vx=!1,_x=!1,jx=!0,$x="/assets/sun-mostly-cloudy-e3pqqgs7.webp",Nx={format:mx,width:px,height:gx,space:xx,channels:yx,depth:bx,density:wx,isProgressive:vx,hasProfile:_x,hasAlpha:jx,src:$x},kx="webp",Cx=96,Sx=96,Tx="srgb",Mx=4,Px="uchar",Dx=288,Ex=!1,Ax=!1,Lx=!0,Ix="/assets/sun-mostly-sunny-o99k1c7a.webp",Fx={format:kx,width:Cx,height:Sx,space:Tx,channels:Mx,depth:Px,density:Dx,isProgressive:Ex,hasProfile:Ax,hasAlpha:Lx,src:Ix},Rx="webp",Ox=96,Hx=96,zx="srgb",Ux=4,Bx="uchar",Wx=288,Yx=!1,qx=!1,Gx=!0,Vx="/assets/sun-shower-ldwl4jbp.webp",Zx={format:Rx,width:Ox,height:Hx,space:zx,channels:Ux,depth:Bx,density:Wx,isProgressive:Yx,hasProfile:qx,hasAlpha:Gx,src:Vx},Kx="webp",Xx=96,Jx=96,Qx="srgb",ey=4,ty="uchar",sy=!1,ny=!1,ry=!0,ay="/assets/sun-sunny-kqjpjzd8.webp",oy={format:Kx,width:Xx,height:Jx,space:Qx,channels:ey,depth:ty,isProgressive:sy,hasProfile:ny,hasAlpha:ry,src:ay},iy="webp",cy=96,ly=96,dy="srgb",uy=4,hy="uchar",fy=288,my=!1,py=!1,gy=!0,xy="/assets/thunder-xzn1cku3.webp",yy={format:iy,width:cy,height:ly,space:dy,channels:uy,depth:hy,density:fy,isProgressive:my,hasProfile:py,hasAlpha:gy,src:xy},by="webp",wy=96,vy=96,_y="srgb",jy=4,$y="uchar",Ny=288,ky=!1,Cy=!1,Sy=!0,Ty="/assets/tornado-diqu61wg.webp",My={format:by,width:wy,height:vy,space:_y,channels:jy,depth:$y,density:Ny,isProgressive:ky,hasProfile:Cy,hasAlpha:Sy,src:Ty},Py="webp",Dy=96,Ey=96,Ay="srgb",Ly=4,Iy="uchar",Fy=288,Ry=!1,Oy=!1,Hy=!0,zy="/assets/windy-n2v8wtyp.webp",Uy={format:Py,width:Dy,height:Ey,space:Ay,channels:Ly,depth:Iy,density:Fy,isProgressive:Ry,hasProfile:Oy,hasAlpha:Hy,src:zy},By={foggy:{default:Uc},cloudy:{default:el},"heavy-snow":{default:hl},"light-snow":{default:$l},sleet:{default:$u},drizzle:{default:Vu,night:Il},hazy:{default:oh,night:Vl},"mostly-cloudy":{default:yh,night:od},"mostly-sunny":{default:Mh,night:yd},shower:{default:Uh,night:Md},sunny:{default:ef,night:Ud},"rain-thunder":{default:eu},rain:{default:hu},snow:{default:Iu},thunder:{default:ff},tornado:{default:Nf},windy:{default:Ff}},Wy={foggy:{default:Zf},cloudy:{default:im},"heavy-snow":{default:bm},"light-snow":{default:Pm},sleet:{default:Pg},drizzle:{default:tx,night:Bm},hazy:{default:fx,night:tp},"mostly-cloudy":{default:Nx,night:fp},"mostly-sunny":{default:Fx,night:Np},shower:{default:Zx,night:Fp},sunny:{default:oy,night:Zp},"rain-thunder":{default:ig},rain:{default:bg},snow:{default:Bg},thunder:{default:yy},tornado:{default:My},windy:{default:Uy}};function Yy({weatherCode:e,isDarkMode:t,isNight:s}){const n=t?Wy:By,a=qy(e),o=n[a];return o.night&&s?o.night:o.default}function qy(e){switch(e){case 1:case 33:return"sunny";case 2:case 3:case 34:case 35:case 36:return"mostly-sunny";case 4:case 6:case 13:case 14:case 38:return"mostly-cloudy";case 5:case 37:return"hazy";case 7:case 8:return"cloudy";case 11:return"foggy";case 12:case 39:case 40:return"shower";case 15:case 16:case 17:case 41:case 42:return"thunder";case 18:return"rain";case 19:case 20:case 21:case 43:return"light-snow";case 22:case 23:case 44:return"snow";case 24:case 25:case 26:case 29:return"sleet";case 32:return"windy";default:return"cloudy"}}const Gy="C";function Vy(e,t){return Math.round(e==="F"?t*9/5+32:(t-32)*5/9)}function es(e,t,s=Gy){return e===s?`${Math.round(t)}Â°`:`${Vy(e,t)}Â°`}const Zy=7,ts=8,Ky=p.memo(function({weatherResults:t,dateRange:s,turnIndex:n,trackContentReferenceEvent:a}){const[o,i]=ib(),c=Qy(t);p.useEffect(()=>{a("Search Content Reference Shown","search_content_reference_shown","forecast")},[a]);const{daily:d,hourly:l,historical:h}=t;let m="daily";if(s||l&&d.length<2)m="hourly";else if(d.length>0)m="daily";else if(h&&h?.length>0)m="historical";else return null;return r.jsxs("div",{className:"relative",children:[c?r.jsxs(r.Fragment,{children:[r.jsx(Jy,{weatherResults:t}),r.jsx(eb,{weatherResults:t,temperatureUnit:o,setTemperatureUnit:i})]}):r.jsx("div",{className:"bg-token-main-surface-primary absolute end-0 top-3 z-10 rounded-sm",children:r.jsx(Gs,{onTemperatureUnitChange:i,temperatureUnit:o})}),r.jsx(rb,{turnIndex:n}),m==="hourly"&&r.jsx(tb,{weatherResults:t,temperatureUnit:o,dateRange:s}),m==="daily"&&r.jsx(sb,{dailyForecast:d.slice(0,Zy),temperatureUnit:o}),m==="historical"&&r.jsx(nb,{historical:h,temperatureUnit:o})]})});function Xy({weatherAlert:e}){const[t,s]=p.useState(!1),n=M(),a=Ge(),o=H(e.start_timestamp,e.utc_offset_sec),i=e.end_timestamp?H(e.end_timestamp,e.utc_offset_sec):null,c=r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsx(k,{id:"JnuGPS",defaultMessage:"{start}{separator}{end}",values:{start:n.formatDate(o,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),separator:i?" - ":"",end:i?n.formatDate(i,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):""}})}),r.jsx("div",{children:e.summary})]});return r.jsxs("button",{className:"my-2 flex w-full flex-col gap-2 rounded-xl border border-red-200 bg-red-100 px-4 py-3 text-start text-sm text-red-800",onClick:()=>s(!t),children:[r.jsxs("div",{className:"flex w-full items-center gap-4",children:[r.jsx(In,{className:"h-9 w-9 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-bold",children:r.jsx(k,{id:"y+fy/l",defaultMessage:"Severe Weather: {name}",values:{name:e.name}})}),a&&c]}),r.jsx("div",{className:"grow"}),r.jsx("div",{className:"opacity-30",children:t?r.jsx(na,{className:"icon-lg"}):r.jsx(sa,{className:"icon-lg"})})]}),t&&e.details&&r.jsxs(r.Fragment,{children:[!a&&c,r.jsx("div",{className:"mt-1 whitespace-pre-wrap",children:e.details.trim()})]})]})}function Jy({weatherResults:e}){const{severe:t}=e;return t?r.jsx("div",{className:"my-2",children:t.map((s,n)=>r.jsx(Xy,{weatherAlert:s},n))}):null}function Qy(e){const{historical:t,daily:s,hourly:n,current:a}=e;if(!a)return!1;let o=!1;const i=H(a.timestamp,a.utc_offset_sec);for(const c of[t,s,n])c&&(o=o||c?.some(d=>En(i,H(d.timestamp,d.utc_offset_sec))));return o}function eb({weatherResults:e,temperatureUnit:t,setTemperatureUnit:s}){const n=M(),{current:a}=e;if(!a)return null;const o=a.temperature.current,i=a.description,c=o!=null&&i&&" Â· ";return r.jsxs("div",{className:"not-prose flex items-center gap-4",children:[r.jsxs("div",{className:"grow",children:[r.jsxs("div",{className:"text-lg font-semibold",children:[o!=null&&r.jsx(k,{id:"FiwByI",defaultMessage:"Currently {temperature}",values:{temperature:W(n,o,t)}}),c,i.description]}),r.jsx("div",{className:"text-token-text-secondary",children:ob(e.location)})]}),r.jsxs("div",{className:"flex",children:[r.jsx(Gs,{onTemperatureUnitChange:s,temperatureUnit:t}),r.jsx(ot,{weatherDescriptionData:i,isNight:a.night})]})]})}function at({children:e}){return r.jsx("div",{className:"no-scrollbar not-prose mt-1 overflow-auto sm:overflow-hidden",children:r.jsx(A.Root,{className:"min-w-0",children:r.jsx(A.Body,{className:"border-token-border-medium border-b-[0.5px] [&_tr:last-child]:border-b-0",children:e})})})}function tb({weatherResults:e,temperatureUnit:t,dateRange:s}){const n=M(),{hourly:a,current:o}=e;let i=a??[];s&&(i=i.filter(h=>h.timestamp>=s.start_timestamp&&h.timestamp<s.end_timestamp));const[c,d]=p.useState(!1),l=i.length>ts;if(!c&&l){const h=i[0],m=H(h.timestamp,h.utc_offset_sec);let x=!1;if(o){const y=H(o.timestamp,o.utc_offset_sec);m.getTime()-y.getTime()>8*60*60*1e3&&i.length>18&&(i=i.slice(7,18),x=!0)}x||(i=i.slice(0,ts))}return r.jsxs(at,{children:[i.map((h,m)=>r.jsxs(A.Row,{children:[r.jsxs(F,{className:"w-44",children:[r.jsx(ot,{weatherDescriptionData:h.description,isNight:h.night,size:"small"}),r.jsx("div",{className:"ms-3 whitespace-nowrap",children:r.jsx("span",{className:"lowercase",children:ab(n,h)})})]}),r.jsx(F,{className:"w-[60px] tabular-nums",children:r.jsx("div",{children:W(n,h.temperature.current,t)})}),r.jsx(F,{children:h.description.description})]},m)),l&&r.jsx(A.Row,{children:r.jsx(F,{className:"w-44",children:r.jsx(K,{color:"secondary",onClick:()=>d(!c),size:"small",children:c?r.jsx(k,{id:"KoC8Ym",defaultMessage:"Show less"}):r.jsx(k,{id:"X8F8Y/",defaultMessage:"Show more"})})})})]})}function sb({dailyForecast:e,temperatureUnit:t}){const s=M();return r.jsx(at,{children:e.map((n,a)=>r.jsxs(A.Row,{children:[r.jsxs(F,{className:"w-[7.5rem] min-w-[7.5rem]",children:[r.jsx(ot,{weatherDescriptionData:n.description,isNight:n.night,size:"small"}),r.jsx("div",{className:"ms-3 whitespace-nowrap",children:We(s,H(n.timestamp,n.utc_offset_sec))})]}),r.jsxs(F,{className:"tabular-nums",children:[r.jsx("div",{children:W(s,n.temperature.max,t)}),r.jsx("div",{className:"text-token-text-secondary ms-1",children:W(s,n.temperature.min,t)})]}),r.jsx(F,{className:"min-w-80",children:n.description.description})]},a))})}function nb({historical:e,temperatureUnit:t}){const s=M();return e?r.jsx(at,{children:e.map((n,a)=>{const o=H(n.timestamp,n.utc_offset_sec);return r.jsxs(A.Row,{children:[r.jsx(F,{className:"w-[250px]",children:r.jsx("div",{className:"ms-3 whitespace-nowrap",children:s.formatDate(o,{weekday:"long",month:"short",day:"numeric"})})}),r.jsx(F,{className:"tabular-nums",children:n.temperature.max&&n.temperature.min?r.jsxs(r.Fragment,{children:[r.jsx("div",{children:W(s,n.temperature.max,t)}),r.jsx("div",{className:"text-token-text-secondary ms-1",children:W(s,n.temperature.min,t)})]}):r.jsx("div",{children:W(s,n.temperature.current,t)})}),r.jsx(F,{})]},a)})}):null}function F({className:e,children:t}){return r.jsx(A.Cell,{className:j("border-token-border-xlight! border-s-0! border-e-0! py-2! ps-4! pe-3! first:ps-0! last:pe-0!",e),divClassName:"items-start leading-relaxed",children:t})}function rb({turnIndex:e}){const t=Tr(n=>n.thread?.turns[e]?.use_location),[s]=$r();return!s.useLocation&&t?r.jsx("div",{className:"mt-3",children:r.jsx(K,{color:"secondary",icon:Mc,onClick:()=>{Nr.setSettingsModalOpen(!0)},children:r.jsx(k,{id:"f47VEc",defaultMessage:"Share precise location"})})}):null}function Gs({temperatureUnit:e,onTemperatureUnitChange:t}){const s=n=>e===n?"font-bold":"font-light";return r.jsx(ur,{size:"small",triggerButton:r.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-primary flex items-center justify-center p-1.5",children:r.jsx(An,{className:"icon-sm-heavy"})}),children:r.jsxs(hr.Item,{onClick:()=>{t(e==="C"?"F":"C")},className:"text-token-text-primary",children:[r.jsx(k,{id:"bQIoe/",defaultMessage:"Temperature"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:s("F"),children:r.jsx(k,{id:"bvDeBB",defaultMessage:"Â°F"})}),r.jsx("div",{className:"mx-1 h-4 border-s border-gray-300"}),r.jsx("div",{className:s("C"),children:r.jsx(k,{id:"iNiz6O",defaultMessage:"Â°C"})})]})]})})}function ot({weatherDescriptionData:e,isNight:t=!1,size:s="normal"}){const n=xe(),a=s==="small"?30:50;return r.jsx("img",{draggable:!1,alt:e.description,src:Yy({weatherCode:e.id,isDarkMode:n,isNight:t}).src,width:a,height:a})}function ab(e,t){const s=H(t.timestamp,t.utc_offset_sec);return e.formatDate(s,{hour:"numeric"})}function W(e,t,s){return t==null?"-":es(s?s??"F":Vs(e),t)}function Vs(e){const t=["en-US","en-BZ","en-BS","en-KY","en-PW"],s=e.locale||"en-US";return t.includes(s)?"F":"C"}function ob(e){const t=e.name.split(",").map(s=>s.trim());return e.country&&!t.includes(e.country)&&t.push(e.country),t.join(", ")}const ib=()=>{const e=M(),[t,s]=Ln("USER_TEMPERATURE_UNIT",Vs(e),n=>["F","C"].includes(n));return[t,s]},cb=fr(()=>mr(()=>import("./g5whi059640ky5td.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(e=>e.BusinessesMap));function lb(e){"use forget";const t=rs.c(114),{index:s,FormattedText:n,node:a}=e,o=parseInt(s,10),i=p.useContext(re);let c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c="756982148",t[0]=c):c=t[0];const{value:d}=Ke(c),l=as(i?.analyticsMetadata),h=p.useRef(!1);if(i==null)return null;const{contentReferences:m,onShowSearchResults:x,numImageResults:y,analyticsMetadata:g,message:w}=i,u=m?.[o],$=g?.clientThreadId==null;if(!u||g.turnIndex===void 0||u.type===void 0)return null;let _;t[1]===Symbol.for("react.memo_cache_sentinel")?(_={img:ub},t[1]=_):_=t[1];let C;t[2]!==u.alt?(C=r.jsx(et,{components:_,children:u.alt}),t[2]=u.alt,t[3]=C):C=t[3];const v=C;let b=null;e:switch(u.type){case"title_citation":{let f;t[4]!==u||t[5]!==l?(f=r.jsx(jc,{metadata:u,trackContentReferenceEvent:l}),t[4]=u,t[5]=l,t[6]=f):f=t[6],b=f;break e}case"location_search":{let f;t[7]!==u||t[8]!==l?(f=r.jsx(sc,{metadata:u,trackContentReferenceEvent:l}),t[7]=u,t[8]=l,t[9]=f):f=t[9],b=f;break e}case"time":{let f;t[10]!==u||t[11]!==l?(f=r.jsx(_c,{metadata:u,trackContentReferenceEvent:l}),t[10]=u,t[11]=l,t[12]=f):f=t[12],b=f;break e}case"image_v2":{const f=y??0;let L;t[13]!==g||t[14]!==u||t[15]!==l||t[16]!==f?(L=r.jsx(Ns,{metadata:u,numImageResults:f,analyticsMetadata:g,trackContentReferenceEvent:l}),t[13]=g,t[14]=u,t[15]=l,t[16]=f,t[17]=L):L=t[17],b=L;break e}case"nav_list":{let f;t[18]!==u||t[19]!==l?(f=r.jsx(nc,{metadata:u,trackContentReferenceEvent:l}),t[18]=u,t[19]=l,t[20]=f):f=t[20],b=f;break e}case"file_navlist":{let f;t[21]!==u||t[22]!==l?(f=r.jsx(gi,{metadata:u,trackContentReferenceEvent:l}),t[21]=u,t[22]=l,t[23]=f):f=t[23],b=f;break e}case"file":{let f;t[24]!==u||t[25]!==l||t[26]!==o?(f=r.jsx(hi,{fileRef:u,index:o,trackContentReferenceEvent:l}),t[24]=u,t[25]=l,t[26]=o,t[27]=f):f=t[27],b=f;break e}case"grouped_webpages_model_predicted_fallback":{let f;t[28]!==u||t[29]!==i.message.id||t[30]!==l||t[31]!==o||t[32]!==a?(f=r.jsx(Qr,{webpageRef:u,node:a,trackContentReferenceEvent:l,messageId:i.message.id,index:o}),t[28]=u,t[29]=i.message.id,t[30]=l,t[31]=o,t[32]=a,t[33]=f):f=t[33],b=f;break e}case"grouped_webpages":{let f;t[34]!==u||t[35]!==i.message.id||t[36]!==l||t[37]!==o||t[38]!==a?(f=r.jsx(Jr,{webpageRef:u,node:a,trackContentReferenceEvent:l,messageId:i.message.id,index:o}),t[34]=u,t[35]=i.message.id,t[36]=l,t[37]=o,t[38]=a,t[39]=f):f=t[39],b=f;break e}case"tldr":{let f;t[40]!==u||t[41]!==l||t[42]!==d||t[43]!==x?(f=d?r.jsx(xt,{navigation:{...u,type:"navigation",domains:[{title:u.page_title,subtitle:u.display_title,domain:u.breadcrumbs[0],url:u.url,sub_domains:[]}]},onShowSearchResults:x,trackContentReferenceEvent:l}):r.jsx(Fn,{tldr:u,trackContentReferenceEvent:l}),t[40]=u,t[41]=l,t[42]=d,t[43]=x,t[44]=f):f=t[44],b=f;break e}case"navigation":{let f;t[45]!==u||t[46]!==l||t[47]!==x?(f=r.jsx(xt,{navigation:u,onShowSearchResults:x,trackContentReferenceEvent:l}),t[45]=u,t[46]=l,t[47]=x,t[48]=f):f=t[48],b=f;break e}case"stock":{let f;t[49]!==u||t[50]!==l?(f=r.jsx(Ji,{contentReference:u,trackContentReferenceEvent:l}),t[49]=u,t[50]=l,t[51]=f):f=t[51],b=f;break e}case"calculator":{let f;t[52]!==u||t[53]!==l?(f=r.jsx(ri,{data:u,trackContentReferenceEvent:l}),t[52]=u,t[53]=l,t[54]=f):f=t[54],b=f;break e}case"code_execution":{let f;t[55]!==n||t[56]!==u||t[57]!==l?(f=r.jsx(ci,{FormattedText:n,displayInfo:u,trackContentReferenceEvent:l}),t[55]=n,t[56]=u,t[57]=l,t[58]=f):f=t[58],b=f;break e}case"forecast":{let f;t[59]!==g||t[60]!==u.date_range||t[61]!==u.forecast||t[62]!==l?(f=u?.forecast&&r.jsx(Ky,{weatherResults:u.forecast,dateRange:u.date_range,turnIndex:g.turnIndex,trackContentReferenceEvent:l}),t[59]=g,t[60]=u.date_range,t[61]=u.forecast,t[62]=l,t[63]=f):f=t[63],b=f;break e}case"businesses_map":{let f;t[64]!==u||t[65]!==l?(f=r.jsx(cb,{contentReference:u,trackContentReferenceEvent:l}),t[64]=u,t[65]=l,t[66]=f):f=t[66],b=f;break e}case"video":{let f;t[67]!==u||t[68]!==l?(f=r.jsx(Tc,{video:u,trackContentReferenceEvent:l}),t[67]=u,t[68]=l,t[69]=f):f=t[69],b=f;break e}case"sources_footnote":{let f;t[70]!==u||t[71]!==l||t[72]!==$||t[73]!==x?(f=r.jsx(Rn,{sourcesFootnote:u,onShowSearchResults:x,trackContentReferenceEvent:l,isSearchGptApp:$}),t[70]=u,t[71]=l,t[72]=$,t[73]=x,t[74]=f):f=t[74],b=f;break e}case"sports_standings":{let f;t[75]!==u||t[76]!==l?(f=r.jsx(wc,{standingsRef:u,trackContentReferenceEvent:l}),t[75]=u,t[76]=l,t[77]=f):f=t[77],b=f;break e}case"sports_schedule":{let f;t[78]!==u||t[79]!==l?(f=r.jsx(gc,{scheduleRef:u,trackContentReferenceEvent:l}),t[78]=u,t[79]=l,t[80]=f):f=t[80],b=f;break e}case"attribution":{let f;t[81]!==u?(f=r.jsx(ei,{attribution:u}),t[81]=u,t[82]=f):f=t[82],b=f;break e}case"debug":{let f;t[83]!==u?(f=Object.entries(u).map(db),t[83]=u,t[84]=f):f=t[84];let L;t[85]!==f?(L=r.jsx(r.Fragment,{children:f}),t[85]=f,t[86]=L):L=t[86],b=L;break e}case"image_inline":{let f;t[87]!==u||t[88]!==i.clientThreadId||t[89]!==l||t[90]!==w?(f=r.jsx(uo,{reference:u,clientThreadId:i.clientThreadId,trackContentReferenceEvent:l,message:w}),t[87]=u,t[88]=i.clientThreadId,t[89]=l,t[90]=w,t[91]=f):f=t[91],b=f;break e}case"product_entity":{let f;t[92]!==g.turnIndex||t[93]!==u||t[94]!==i.clientThreadId||t[95]!==i.message.id||t[96]!==l?(f=r.jsx(ho,{contentReference:u,clientThreadId:i.clientThreadId,messageId:i.message.id,turnIndex:g.turnIndex,trackContentReferenceEvent:l}),t[92]=g.turnIndex,t[93]=u,t[94]=i.clientThreadId,t[95]=i.message.id,t[96]=l,t[97]=f):f=t[97],b=f;break e}case"products":{let f;t[98]!==g||t[99]!==u||t[100]!==i.clientThreadId||t[101]!==i.message.id?(f=r.jsx(go,{contentReference:u,clientThreadId:i.clientThreadId,messageId:i.message.id,turnIndex:g.turnIndex,analyticsMetadata:g}),t[98]=g,t[99]=u,t[100]=i.clientThreadId,t[101]=i.message.id,t[102]=f):f=t[102],b=f;break e}case"product_reviews":{let f;t[103]!==u?(f=r.jsx(Lr,{contentReference:u,disableAnimation:!0}),t[103]=u,t[104]=f):f=t[104],b=f;break e}case"product_rationale":{let f;t[105]!==u?(f=r.jsx(Ar,{contentReference:u,disableAnimation:!0}),t[105]=u,t[106]=f):f=t[106],b=f;break e}}let N;t[107]!==v||t[108]!==u||t[109]!==l?(N=f=>(h.current||(l("Search Content Reference Failed","search_content_reference_failed",u.type),Ve.addError(`Error rendering content reference: ${u.type}`,{...f,contentReference:u}),h.current=!0),u?.alt?v:r.jsx("span",{className:`errored-object-${u.type}`})),t[107]=v,t[108]=u,t[109]=l,t[110]=N):N=t[110];let T;return t[111]!==b||t[112]!==N?(T=r.jsx(fs,{name:"content-reference-renderer",fallback:N,children:b}),t[111]=b,t[112]=N,t[113]=T):T=t[113],T}function db(e){const[t,s]=e;return r.jsx("sub",{className:"ms-1 w-fit rounded-md border-2 border-solid border-orange-500 px-1 leading-none",children:s},t)}function ub(e){const{src:t,alt:s}=e;return r.jsx("img",{src:t,alt:s,className:"max-h-28"})}const hb=({onClick:e})=>{const[t,s]=p.useState(!1),n=On(),a=M(),o=c=>{I.logEvent("ChatGPT Table Copy Clicked"),e(c),s(!0),setTimeout(()=>{n()&&s(!1)},2e3)},i=t?pr:gr;return r.jsx(oe,{label:a.formatMessage({id:"KrNQPS",defaultMessage:"Copy Table"}),className:"pointer-events-none absolute start-full top-4 z-10 hidden h-full w-fit ps-2 md:block",side:"top",align:"center",alignOffset:12,sideOffset:4,children:r.jsx("button",{onClick:o,className:"hover:bg-token-main-surface-secondary text-token-text-secondary pointer-events-auto rounded-lg px-1 py-1 opacity-0 transition-opacity duration-200 group-focus-within:opacity-100 group-hover:opacity-100",children:r.jsx(i,{className:"icon-md-heavy"})})})},fb=({node:e,children:t,...s})=>{const n=p.useRef(null),a=o=>{const i=n.current;i&&Hn({"text/html":i.outerHTML,"text/plain":zn(i)},void 0,o)};return r.jsxs("div",{className:"group pointer-events-none relative flex justify-center *:pointer-events-auto",children:[r.jsx(hb,{onClick:a}),r.jsx("div",{className:"tableContainer horzScrollShadows relative",children:r.jsx("table",{ref:n,className:"min-w-full",...s,children:t})})]})},mb=({node:e,children:t,...s})=>{const n=p.useMemo(()=>e!=null?pb(e):0,[e]);return r.jsx("td",{className:j("max-w-[calc(var(--thread-content-max-width)*2/3)]",n>80?"min-w-[calc(var(--thread-content-max-width)/2)]":n>40?"min-w-[calc(var(--thread-content-max-width)/3)]":null),...s,children:p.Children.map(t,(a,o)=>a==="<br>"?r.jsx("br",{},o):a)})};function pb(e){let t=0;return ge(e,"text",s=>{t+=s.value.length}),t}function gb(e){const{src:t,clientThreadId:s,...n}=e,a=Ze(s),o=p.useContext(re),i=ms(a,t,o?.useSafeUrls);return i==null?r.jsx("div",{}):r.jsx("img",{...n,src:i})}function xb(e){return r.jsx(lb,{...e,FormattedText:Zs})}function Zs({size:e="medium",children:t,className:s,clientThreadId:n,messageId:a,isActivelyStreaming:o=!1,componentOverrides:i,isDeepResearchResultMessage:c,forceDarkMode:d}){const l=xe()||d,h=qe(),m=p.useMemo(()=>({pre:({children:g,"data-start":w,"data-end":u,"data-is-last-node":$})=>r.jsx("pre",{className:"overflow-visible!","data-start":w,"data-end":u,"data-is-last-node":$,children:g}),code:g=>r.jsx(Dr,{...g,clientThreadId:n}),[us]:xb,[_r]:jr,a:g=>{const{node:w,children:u,...$}=g,_=w?.properties?.href;if(typeof _=="string"&&_.startsWith(le))return h?r.jsx(Vo,{...$}):n!=null&&a!=null?r.jsx(Go,{...$,clientThreadId:n,messageId:a,href:_,children:u}):null;if(typeof _=="string"&&_===ws){const C=w?.children?.map(v=>typeof v.value=="string"?v.value:"").join("").trim();return r.jsx(la,{...g,text:C,clientThreadId:n,messageId:a,className:"cursor-pointer"})}return _&&typeof _=="string"&&to(_)?u:r.jsx(tt,{...g,clientThreadId:n,messageId:a})},table:fb,td:mb,img:({node:g,...w})=>{const u=g?.properties?.src;return typeof u=="string"&&(u.startsWith(le)||u.startsWith("attachment:"))?null:r.jsx(gb,{...w,clientThreadId:n})},...ra,...i}),[i,n,a,h]),x=p.useMemo(()=>o?da(t):t,[t,o]),{value:y}=Ke("1839283687");return y?!1:r.jsx(fs,{name:"formatted_text_error",fallback:()=>r.jsx(r.Fragment,{children:x}),children:r.jsx(bb,{rehypePlugins:Is,remarkPlugins:rt,className:j(s,"markdown prose dark:prose-invert w-full break-words",l?"dark":"light",e==="small"&&"prose-xs",c&&"deep-research-result"),urlTransform:Ls,components:m,children:x})})}async function yb(e){const s=await ea().use(ta).use(rt).use(Rr).use(Qo).use(eo).process(e);return String(s)}const bb=p.memo(et),Yb=Object.freeze(Object.defineProperty({__proto__:null,FormattedText:Zs,markdownToHtml:yb},Symbol.toStringTag,{value:"Module"}));export{Zs as F,Yb as a,Wb as l};
//# sourceMappingURL=jows9759jdyt51hg.js.map
