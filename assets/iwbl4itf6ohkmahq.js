import{e as x,r as l,j as e,a8 as z,M as S}from"./khl8ktun31iepecq.js";import{bX as q,aG as A,bb as w,a as V,cr as H,P as E,cX as J,cL as K}from"./haannt40upmuwmtk.js";import{an as I,ao as Q,ap as D,aq as k,ar as y,as as Y,at as Z,au as p,av as ee,aw as te,ax as ae,ay as se,az as oe,aA as ne,aB as ie,aC as re,aD as le,aE as de}from"./n4exq6o15ap1g74l.js";import{u as ce}from"./i7mohl0pdm5438yu.js";import{I as ge}from"./ce74if69ckoer67u.js";const M="ChatGPT Image";function me({imageAsset:t,serverThreadId:s}){const{config:i}=w("2248456840"),o=i.get("enabled",!1),a=x(),d=I(),c=l.useCallback(()=>{const g=new Date,f=a.formatDate(g,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${M} ${f}.png`},[a]),r=D({imageAssetPointer:t,serverThreadId:s}),h=l.useCallback(()=>{o&&r?k({url:r,fileName:c()}):k({url:t.url,fileName:c()}),y.download({analyticsContext:d})},[o,r,t,c,d]);return e.jsx(n,{tooltip:a.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:h,children:e.jsx(de,{})})}function ue({onClose:t}){const s=x();return e.jsx(n,{tooltip:s.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:t,children:e.jsx(K,{className:"icon-lg"})})}function Ce({imageAsset:t,mode:s,setMode:i,inpaintingDrawingState:o,isLoadingNewImage:a,onClose:d,onInpaintClick:c,messageId:r,clientThreadId:h,serverThreadId:g}){const{value:f}=A("706943082"),{config:v}=w("2248456840"),j=I(),F=v.get("enabled",!1),{canUndoDrawing:_,undoDrawing:N,canRedoDrawing:G,redoDrawing:B}=o,m=x(),{rating:u,onLike:P,onDislike:T}=Q(),[L,b]=l.useState(!1),C=l.useCallback(()=>{const X=new Date,$=m.formatDate(X,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${M} ${$}.png`},[m]),W=()=>{T(),b(!0)},O=D({imageAssetPointer:t,serverThreadId:g}),R=l.useCallback(()=>{k({url:t.url,fileName:C()}),y.download({analyticsContext:j})},[t,C,j]),U=Y();return e.jsxs(e.Fragment,{children:[e.jsxs(z.div,{className:"grid h-16 w-full grid-cols-3 px-4",...Z,children:[e.jsx("div",{className:"flex items-center justify-self-start text-start",children:e.jsx(ue,{onClose:d})}),e.jsx("div",{className:"flex flex-col items-center justify-center justify-self-center p-2",children:(!f||s===p.Selecting)&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-token-text-primary font-semibold",children:e.jsx(S,{id:"imageEditorControls.imageName",defaultMessage:"Edit Selection"})})})}),e.jsx("div",{className:"flex items-center justify-self-end text-end",children:s===p.Selecting?e.jsxs(e.Fragment,{children:[e.jsx(n,{disabled:!_||a,onClick:N,children:e.jsx(ee,{})}),e.jsx(n,{disabled:!G||a,onClick:B,children:e.jsx(te,{})}),e.jsx(fe,{}),e.jsx(n,{onClick:()=>i(p.Default),disabled:a,children:e.jsx(S,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})})]}):e.jsxs(e.Fragment,{children:[u!==!1&&e.jsx(n,{tooltip:m.formatMessage({id:"imageEditorControls.likeButtonTooltip",defaultMessage:"Like"}),onClick:P,children:u===!0?e.jsx(ae,{}):e.jsx(se,{})}),u!==!0&&e.jsx(n,{tooltip:m.formatMessage({id:"imageEditorControls.dislikeButtonTooltip",defaultMessage:"Dislike"}),onClick:W,children:u===!1?e.jsx(oe,{}):e.jsx(ne,{})}),f&&e.jsx(n,{tooltip:m.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:c,children:e.jsx(ie,{className:"h-7 w-7 pe-1",fill:"black"})}),e.jsx(me,{imageAsset:t,serverThreadId:g}),r&&U()&&e.jsx(xe,{clientThreadId:h,messageId:r}),F&&O&&e.jsx(re,{onDownload:R,triggerClassName:"rounded-sm h-10 w-10 p-0 font-semibold hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary text-token-text-secondary",iconClassName:"h-6 w-6",dropdownClassName:"z-50 min-w-fit origin-top-right text-token-text-primary"})]})})]}),L&&e.jsx(ge,{messageId:r??"",serverThreadId:g??"",rating:u,onClose:()=>b(!1)})]})}function n({children:t,tooltip:s,disabled:i,onClick:o}){const a=e.jsx("button",{className:V("hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary rounded-sm p-2 font-semibold max-sm:p-1.5",i?"text-token-text-quaternary":"text-token-text-secondary"),disabled:i,onClick:o,children:t});return s!=null?e.jsx(H,{label:s,sideOffset:4,children:a}):a}const fe=q.div`mx-3 w-[1px] h-6 bg-token-border-default`;function xe({clientThreadId:t,messageId:s}){const i=x(),[o,a]=l.useState(!1),d=ce({clientThreadId:t,messageId:s});return l.useEffect(()=>{E.logEventWithStatsig("Share Post: Share Button Shown","chatgpt_post_share_button_shown",{source:"image_gen_editor_controls"})},[]),e.jsx(n,{tooltip:i.formatMessage({id:"imageEditorControls.share",defaultMessage:"Share image"}),onClick:async()=>{a(!0);try{await d()}finally{a(!1)}E.logEventWithStatsig("Share Post: Share Button Clicked","chatgpt_post_share_button_clicked",{source:"image_gen_editor_controls"})},disabled:o,children:o?e.jsx(J,{}):e.jsx(le,{})})}export{Ce as I,ue as a,n as b,me as c};
//# sourceMappingURL=iwbl4itf6ohkmahq.js.map
