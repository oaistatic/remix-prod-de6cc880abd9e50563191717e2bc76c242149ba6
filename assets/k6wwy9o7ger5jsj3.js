const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lv4lezp34hgbotc4.js","assets/haannt40upmuwmtk.js","assets/khl8ktun31iepecq.js","assets/root-eulobrch.css","assets/n4exq6o15ap1g74l.js","assets/conversation-small-bh1estgu.css","assets/jjqeoesb3rhorlyg.js","assets/dfz2bdgqh4yduujb.js","assets/opqccoi9jnqsmzvy.js","assets/b3mht1lg7zv7qd3d.js","assets/m4g7yy9fehqi204r.js","assets/d7qdtm0x38jq0qqt.js","assets/dblaaxd78ezocyc0.js","assets/iwbl4itf6ohkmahq.js","assets/i7mohl0pdm5438yu.js","assets/ce74if69ckoer67u.js","assets/hvdwpbr2ljyv44tg.js","assets/ft8yigokdj661ljd.js","assets/n9mj8uc7ojykmfw2.js","assets/ici1r2pdfnai9c6r.js","assets/kiredz58u04n7vci.js","assets/ipoayrdx44zri2vx.js","assets/e473oe6zkw5lqbph.js","assets/fv3oi4p503zks5q9.js","assets/hyae97tnl7ms3bn9.js","assets/eiq9v0oy1lyfg3c8.js","assets/dlwdwnl197lh1mf5.js","assets/idv9bn2ktilvswkf.js","assets/brlfaqq2l0eg9ucx.js","assets/jn7l19yr8qucsihu.js","assets/l6prrb6nf9agh4ql.js","assets/iuzjvviw85b4ghdw.js","assets/d4aio29is5rbz69m.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{am as B,P as T,dM as tt,I as st,cW as $,di as at,a as ot,cH as U,aA as nt,l as Re,dI as Be,eI as it,eH as rt,eF as lt,aj as dt,e6 as ct,aR as ut,aG as mt,fH as gt,gU as ve,fI as ft,co as G,cp as H,N as je,o as Y,V as pt,M as q,R as Fe,cX as ht,fO as we,gL as xt,ag as Mt,gV as kt,dT as Ne,bP as bt,bQ as Ct,eN as St,fD as yt,E as vt,aH as jt,b9 as wt}from"./haannt40upmuwmtk.js";import{r as i,j as e,a9 as We,f as Ue,b as ze,e as D,a8 as F,M as w,d as Ve,h as z,k as Nt}from"./khl8ktun31iepecq.js";import{kv as At,kw as Ge,kx as It,ky as Pt,kz as Ot,aF as He,a6 as qe,c3 as Et,kA as _t,kB as Tt,kC as Dt,kD as Lt,kE as Ae,kF as Rt,kG as Bt,kH as Ft,o as Qe,fM as Wt,cY as Ut,kI as zt,kJ as Vt,cV as V,kK as Gt,kL as Ht,kM as qt,eI as Qt,kN as Kt,kO as Yt,kP as Jt,kQ as Xt,kR as $t,kS as Zt,kT as es,kU as ts,kV as ss,kW as as,kX as os,kY as ns,kZ as is,k_ as rs,k$ as ls,l0 as ds,l1 as cs,l2 as us,l3 as ms,l4 as gs,l5 as fs,l6 as ps,l7 as hs,l8 as xs,l9 as Ms,la as ks,lb as bs,lc as Cs,ld as Ss,le as ys,lf as vs,lg as js,lh as ws,li as Ns,lj as As,lk as Is,ll as Ps,e_ as Os,aG as Q,a5 as Ie,db as Pe,cW as Z,lm as Es,ln as _s,lo as Oe,cc as Ts,ci as Ds,ch as Ee,cj as Ls,dr as Rs,at as J,lp as Bs,dJ as Fs,lq as Ws,b5 as Us,b6 as zs,b7 as Vs,P as Ke,lr as Gs,g8 as Hs,cr as X,cs as _e,ls as qs,lt as Qs,lu as Ks,lv as Ys,lw as Js,lx as Xs,ly as $s,lz as Zs,lA as ea,lB as ta,lC as sa,F as aa,lD as oa,K as na,lE as ia,lF as ra,T as Te,lG as la,lH as da,lI as ca,lJ as ua,et as ma,ca as ga}from"./n4exq6o15ap1g74l.js";import{b as fa}from"./dblaaxd78ezocyc0.js";import{b as pa,I as ha}from"./opqccoi9jnqsmzvy.js";import{b as xa,P as Ma}from"./i7mohl0pdm5438yu.js";import{u as ka,N as ba}from"./e473oe6zkw5lqbph.js";import{a as Ca,b as Sa,c as ya}from"./iwbl4itf6ohkmahq.js";import{e as va,C as ja,a as wa}from"./jjqeoesb3rhorlyg.js";import{C as Na}from"./fv3oi4p503zks5q9.js";import{M as Aa}from"./idv9bn2ktilvswkf.js";function Ia({clientThreadId:s}){const t=At(n=>n.notifications),a=i.useRef(new Set);return i.useEffect(()=>{t.filter(o=>o.clientThreadId===void 0||s===o.clientThreadId).map(o=>o.id).filter(o=>o!==void 0).forEach(o=>Ge(o)),t.forEach(o=>{o.id&&!a.current.has(o.id)&&(B.logEvent("chatgpt_notification_shown"),T.logEvent("Notifications: Notification Shown to User"),a.current.add(o.id))})},[s,t]),t.length===0||tt?null:e.jsx("div",{className:"pointer-events-auto fixed end-4 top-8 z-100 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(We,{children:t.map(n=>e.jsx(Oa,{...n},n.id))})})}function Pa({notification:s}){return s.icon?e.jsx(It,{size:"medium",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border",IconComponent:s.icon}):e.jsx(Pt,{iconName:"openai",size:"medium",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border"})}function Oa({...s}){const t=Ue(),a=ze(),n=D(),o=st(s.clientThreadId),d=()=>{B.logEvent("chatgpt_notification_clicked"),T.logEvent("Notifications: User Clicked Notification"),s.onClick!=null?s.onClick():o&&Ot(t,a,o),s.id&&Ge(s.id)};return e.jsxs(F.div,{onClick:d,className:"border-token-border-default bg-token-main-surface-primary z-100 inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(Pa,{notification:s}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"text-token-text-primary w-full truncate text-sm font-medium",children:s.title??n.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),s.subtitle&&e.jsx("div",{className:"text-token-text-tertiary w-full truncate text-sm",children:s.subtitle}),s.payload?.display_image_url&&e.jsx("img",{className:"mt-2 h-12 w-12 rounded-xs",src:s.payload.display_image_url,alt:s.payload.image_alt})]})]})}const Ea=()=>{const{isLoading:s,eligible:t}=He(qe.hasSeenContextualAnswerGoogleSyncFinished),a=Et(),{connectionInstanceData:n,isLoading:o}=_t({skip:!a}),d=Tt(n?.connection_statuses??[]),f=Dt({exposed:t&&a&&d})==="modal";return s||o?"loading":t&&a&&d&&f?"show":"hide"},_a=({onClose:s})=>{const t=D(),{markAsViewed:a}=He(qe.hasSeenContextualAnswerGoogleSyncFinished);i.useEffect(()=>{T.logEvent("Contextual Answers User Fully Synced Modal")},[]);const n=()=>{a(),s(),Rt()},o=()=>{a(),s()},d=e.jsx(U,{color:"secondary",onClick:o,children:e.jsx(w,{id:"341zvt",defaultMessage:"Maybe later"})}),f=e.jsx(U,{color:"primary",onClick:()=>n(),children:e.jsx(w,{id:"N6nDT7",defaultMessage:"Try an example"})});return e.jsx($,{isOpen:!0,noPadding:!0,onClose:s,shouldIgnoreClickOutside:!0,size:"xlarge",type:"success",testId:"modal-ca-synced-nux",children:e.jsxs("div",{className:"relative px-2 py-8",children:[e.jsx(at,{onClick:s,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"}),e.jsx("div",{className:"text-heading-3 text-center",children:e.jsx(w,{id:"cB19NT",defaultMessage:"Ask ChatGPT anything,{br}even about information in your Google Drive.",values:{br:e.jsx("br",{})}})}),e.jsx("div",{className:"border-token-border-light text-token-text-tertiary text-body-small-regular mx-auto mt-5 mb-5 w-max rounded-4xl border px-6 py-3 text-center italic",children:e.jsx(w,{id:"6cGGS5",defaultMessage:"What's the latest status on project widgets?"})}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx(K,{Logo:Lt,title:t.formatMessage({id:"E7Iqah",defaultMessage:"Project Widgets Budget"}),className:"z-10 translate-x-[2.5rem] translate-y-[2rem] rotate-[-4deg]"}),e.jsx(K,{Logo:Ae,title:t.formatMessage({id:"cVbcSP",defaultMessage:"Project Widgets PRD"}),className:"z-20"}),e.jsx(K,{Logo:Ae,title:t.formatMessage({id:"QbnI4s",defaultMessage:"Project Widgets Presentation"}),className:"z-10 translate-x-[-2.5rem] translate-y-[2rem] rotate-[4deg]"})]}),e.jsxs("div",{className:"mt-12 flex justify-center gap-3",children:[d,f]})]})})},K=({Logo:s,title:t,className:a})=>e.jsxs("div",{className:ot("border-token-border-light bg-token-bg-primary w-[14rem] rounded-2xl border p-3 shadow-sm",a),children:[e.jsxs("div",{className:"mb-3 flex items-center",children:[e.jsx(s,{}),e.jsx("span",{className:"text-body-small-regular text-token-interactive-label-accent-default ms-2",children:t})]}),e.jsx("div",{children:e.jsx(fa,{lines:5,size:"sm"})})]}),De="has-dismissed-welcome-back-modal",Ye=()=>{const[s,t]=i.useState(()=>sessionStorage.getItem(De)!=null),{layer:a}=nt("3637408529"),n=a.get("is_no_auth_welcome_back_modal_enabled",!1),o=Bt(),{isUnauthenticated:d,isLoading:f}=Re(),r=Ft(),u=xa(),m=()=>{t(!0),sessionStorage.setItem(De,"true")};return f?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:d&&n&&!s&&r&&!o&&!u,onClose:m}},Ta=({onClose:s})=>{const t=Qe(),a=Wt(),n=Ut(R.signUpCta),o=a?"center":"bottom",{isOpen:d,onClose:f}=Ye();return i.useEffect(()=>{d&&(T.logEvent("No Auth Welcome Back Modal Shown"),B.logEvent("chatgpt_no_auth_welcome_back_modal_shown"))},[d]),d?e.jsx($,{testId:"modal-no-auth-welcome-back",isOpen:!0,onClose:Be,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:o,children:e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[e.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:e.jsx(w,{...R.title})}),e.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:e.jsx(w,{...R.subtitle})}),e.jsx(U,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"welcome-login-button",onClick:()=>{t({authType:"login",callback:r=>{T.logLogInButtonClicked({provider:r,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(w,{...R.logInCta})}),e.jsx(U,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{t({authType:"signup",callback:r=>{T.logSignUpButtonClicked({provider:r,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(w,{...n})}),e.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:r=>{r.preventDefault(),T.logEvent("No Auth Welcome Modal Stay Logged Out Link Clicked"),B.logEvent("chatgpt_no_auth_welcome_back_modal_stay_logged_out_link_clicked"),s(),f()},"data-testid":"dismiss-welcome",children:e.jsx(w,{...R.stayLoggedOutLink})})]})}):null},R=Ve({title:{id:"NoAuthWelcomeBackModal.title",defaultMessage:"Welcome back"},subtitle:{id:"7WQi5y",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},signUpCta:{id:"NoAuthWelcomeBackModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthWelcomeBackModal.logInCta",defaultMessage:"Log in"},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),Da=({onClose:s})=>{const t=D(),a=V(Z.isBusinessWorkspace),n=V(d=>d.currentWorkspace),o=a?t.formatMessage(Le.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx($,{testId:"modal-onboarding",isOpen:!0,onClose:Be,type:"success",title:o,size:"custom",noPadding:!0,className:"max-w-3xl",description:t.formatMessage(Le.personalOnboardingSubheading),children:e.jsx(Es,{onClose:s,scope:_s.Personal})})},La=({onClose:s})=>{const t=ft.useStore();return i.useEffect(()=>(t.setOnCloseSideEffect(s),t.setManualVisibility(!0),()=>{t.setManualVisibility(!1)}),[s,t]),null};function Ra({clientThreadId:s}){const[t,a]=i.useState(0),{hasSeenOnboardingDate:n}=zt(),{hasSeenTeamOwnerOnboardingDate:o}=Vt(),d=V(Z.isBusinessWorkspace),[f,r]=i.useState(!1),u=z(),m=Gt(u),{data:p,isPending:A,isEnabled:M}=Ht(),k=qt(p,A&&M),I=it(),b=rt(),y=lt(),[v,j]=dt(s,x=>[!x||x.isLoading,x?.conversationOrigin]),{data:g,isError:S}=ct(),N=ut(g),C=g!=null,P=g&&g?.accountItems.length>1&&g.currentAccountId==null,c=g?.accountItems.some(x=>x.isPersonalAccount()),l=!!g?.accountItems&&g.accountItems.length>0&&g.accountItems.every(({canAccessWithCurrentSession:x})=>!x),{eligible:h,isLoading:O}=Qt(),{value:E}=mt("1542198993"),{punchOutRequireLoginInfo:ee}=Kt(),{state:te}=Yt(),{isOpen:se,isLoading:ae}=Jt(),{isOpen:oe,isLoading:ne}=Xt(),{isOpen:ie,isLoading:re}=$t(),{isOpen:le,isLoading:de}=Ye(),{state:ce}=Zt(),ue=es(),me=pa(),ge=ts(),fe=ss(),pe=as(),he=Ea(),xe=os(),Je="hide",Me=ns(),{isOpen:ke,isLoading:be}=is(),Xe=rs(s),{shouldShowCookieBanner:Ce,isCookieConsentBannerLoading:Se}=gt(),L=i.useMemo(()=>[{Component:ls,getModalState:()=>ee?"show":"hide",isDeferrable:!1},{Component:ds,getModalState:()=>te,isDeferrable:!1},{Component:cs,getModalState:()=>ce,isDeferrable:!1},{Component:us,getModalState:()=>be?"loading":ke?"show":"hide",isDeferrable:!1},{Component:ms,getModalState:()=>ge,isDeferrable:!0},{Component:gs,getModalState:()=>ae||v?"loading":j===ve.APPLE?"hide":se?"show":"hide",isDeferrable:!0},{Component:Ta,getModalState:()=>de||v?"loading":j===ve.APPLE?"hide":le?"show":"hide",isDeferrable:!0},{Component:La,getModalState:()=>Se?"loading":Ce?"show":"hide",isDeferrable:!1},{Component:Da,getModalState:()=>d||m?"hide":n===null?"loading":n===!1?"show":"hide",isDeferrable:!0},{Component:fs,getModalState:()=>S?"hide":P?"show":C?"hide":"loading",isDeferrable:!1},{Component:ps,getModalState:()=>I!==null?"show":S||C?"hide":"loading",isDeferrable:!1},{Component:hs,getModalState:()=>b!==null?"show":S||C?"hide":"loading",isDeferrable:!1},{Component:xs,getModalState:()=>y!=null?"show":S||C?"hide":"loading",isDeferrable:!1},{Component:Ms,getModalState:()=>C?l?"show":"hide":"loading",isDeferrable:!1},{Component:ks,getModalState:()=>ne?"loading":oe?"show":"hide",isDeferrable:!1},{Component:bs,getModalState:()=>re?"loading":ie?"show":"hide",isDeferrable:!1},{Component:Cs,getModalState:()=>"hide",isDeferrable:!1},{Component:Ss,getModalState:()=>!N?.isTeam()||!N?.isOwnerOfAccount()||!c?"hide":!C||o===null?"loading":o===!1?"show":"hide",isDeferrable:!1},{Component:ys,getModalState:()=>d?n===null?"loading":n===!1?"show":"hide":"hide",isDeferrable:!0},{Component:vs,getModalState:()=>O?"loading":h&&E?"show":"hide",isDeferrable:!1},{Component:js,getModalState:()=>k,isDeferrable:!1},{Component:ws,getModalState:()=>ue,isDeferrable:!1},{Component:x=>e.jsx(ha,{clientThreadId:s,...x}),getModalState:()=>me,isDeferrable:!1},{Component:_a,getModalState:()=>he,isDeferrable:!1},{Component:Ns,getModalState:()=>fe,isDeferrable:!1},{Component:As,getModalState:()=>pe,isDeferrable:!1},{Component:Is,getModalState:()=>xe,isDeferrable:!0},{Component:Ps,getModalState:()=>Me,isDeferrable:!1}],[ee,te,ce,be,ke,ge,ae,v,j,se,de,le,Se,Ce,d,m,n,S,P,C,I,b,y,l,ne,oe,re,ie,N,c,o,O,h,E,k,ue,s,me,he,fe,pe,xe,Je,Me])[t],$e=f||Xe;let _;L&&(L.isDeferrable&&$e?_="hide":_=L.getModalState()),i.useEffect(()=>{_==="hide"&&a(t+1)},[t,_]);const{pathname:W}=z(),ye=i.useRef(W);if(i.useEffect(()=>{ye.current!==W&&(ye.current=W,a(0))},[W]),i.useEffect(()=>{const x=_==="show",et=Os.getState().activeModals.has(Q.BlockingInitialComponent);x!==et&&(x?Ie.openModal(Q.BlockingInitialComponent):Ie.closeModal(Q.BlockingInitialComponent))},[_]),L==null)return Pe.trackNamespace(Pe.NS_COMPOSER),e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(_!=="show")return null;const Ze=L.Component;return e.jsx(Ze,{onClose:()=>{r(!0),a(x=>x+1)}})}const Le=Ve({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ba=G(async()=>H(()=>import("./lv4lezp34hgbotc4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(s=>s.ImageGenNewEditor));function Fa({postWithProfile:s,clientThreadId:t,closeModal:a}){const n=i.useRef(null),[o,d]=i.useState(!1),[f,r]=i.useState(!1),u=Ue(),{post:m}=s,p=m.attachments[m.attachments.length-1],A={url:p.url,content_type:je.ImageAssetPointer,asset_pointer:p.asset_pointer??Oe(p.id),size_bytes:0,width:p.width,height:p.height},M=D(),k=Ts(),I=Y(t),b=pt(),y=i.useCallback(c=>k.getState().files.find(l=>l.tempId===c),[k]),v=p.url,j=i.useCallback(async c=>{if(n.current){const l=await n.current,h=l?y(l?.tempId):null;if(h)return h}return n.current=fetch(c).then(l=>l.blob()).then(l=>{const h=new File([l],"image.png",{type:"image/png"}),O=Ds(h);return Ee.uploadFile(k,O,h,Ls.Multimodal,[h.type],M,b).then(()=>{const E=y(O);return E&&E.status===Rs.Ready&&E.fileId?E:null})}),n.current},[k,M,b,y]),{onRequestCompletion:g}=va(),{isUnauthenticated:S}=Re(),N=i.useCallback(async c=>{if(!(!c.promptMessage||S)){r(!0);try{const l=await j(v);if(!l||!l.fileId||!l.fileSpec)return;const h=[{content_type:je.ImageAssetPointer,asset_pointer:Oe(l.fileId),size_bytes:l.fileSpec.size,width:p.width,height:p.height},...c.promptMessage.content.content_type===q.MultimodalText||c.promptMessage.content.content_type===q.Text?c.promptMessage.content.parts:[]],O={...c,promptMessage:{...c.promptMessage,content:{content_type:q.MultimodalText,parts:h}}};g(O),a(),Ee.reset(k)}catch{b.danger(M.formatMessage({id:"postReceiverModal.editImageError",defaultMessage:"Failed to edit the image"}))}finally{r(!1)}}},[p.height,p.width,j,g,k,v,a,S,M,b]),C=i.useCallback(async()=>{if(window.confirm(M.formatMessage({id:"postReceiverModal.deletePostConfirmation",defaultMessage:"Are you sure you want to delete this post?"})))try{await Fe.safeDelete("/share/post/{post_id}",{parameters:{path:{post_id:m.id}}}),u("/",{replace:!0})}catch{b.danger(M.formatMessage({id:"postReceiverModal.deletePostError",defaultMessage:"Failed to delete the post"}))}},[m.id,M,b,u]),P=e.jsx(e.Fragment,{children:e.jsxs(F.div,{className:"flex h-16 w-full px-2 sm:px-4",...J,children:[e.jsx("div",{className:"flex items-center justify-self-start text-start",children:e.jsx(Ca,{onClose:()=>{a(),u("/",{replace:!0})}})}),e.jsx("div",{className:"flex w-full flex-1 flex-col items-center justify-center justify-self-stretch",children:e.jsx(Bs,{areButtonsFullWidth:!0,post:m,setIsReportModalOpen:()=>{d(!0)}})}),e.jsxs("div",{className:"flex items-center justify-self-end text-end",children:[m.permissions.can_delete&&e.jsx(Sa,{tooltip:M.formatMessage({id:"postReceiverModal.deletePost",defaultMessage:"Delete"}),onClick:C,children:e.jsx(Fs,{})}),e.jsx(ya,{imageAsset:A,serverThreadId:I})]})]})});return e.jsxs("div",{className:"bg-token-main-surface-primary absolute start-0 end-0 top-0 bottom-0 h-full w-full",children:[e.jsx(Ws,{children:e.jsx(Ba,{image:A,isLoadingNewImage:!1,clientThreadId:t,onClose:()=>{a(),u("/",{replace:!0})},onRequestCompletion:N,editorControls:P,messageId:m.id,footer:f?e.jsx(Wa,{}):null})}),o&&e.jsx(Ua,{post:m,onClose:()=>d(!1)})]})}function Wa(){const s=D();return e.jsxs(F.div,{className:"shadow-token-border-default pointer-events-none inline-flex items-center justify-center gap-1.5 self-center rounded-[16px] px-3.5 py-2 text-sm shadow-lg",transition:{duration:.3,ease:"easeInOut"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(ht,{}),e.jsx("span",{children:s.formatMessage({id:"postReceiverModal.preparingImage",defaultMessage:"Preparing image..."})})]})}function Ua({post:s,onClose:t}){const{data:a}=Us(we.Post),n=D(),o=zs(n,s.id,we.Post);if(a==null)return null;const d=`Report ${s.text??"Post"}`;return e.jsx(Vs,{reasons:a.reasons,submitReport:o,title:d,onClose:t,header:a.header,subHeader:a.header_explanation})}function za({clientThreadId:s}){const t=ka();return e.jsxs(e.Fragment,{children:[t&&e.jsx(ba,{}),e.jsx(Va,{clientThreadId:s})]})}function Va({clientThreadId:s}){const t=i.useContext(Ma),[a,n]=i.useState(!!t?.postWithProfile);return!t?.postWithProfile||!a?null:e.jsx(Ke,{clientThreadId:s,children:e.jsx(Fa,{clientThreadId:s,postWithProfile:t.postWithProfile,closeModal:()=>n(!1)})})}const Ga=450;function Ha({children:s,clientThreadId:t,isOpen:a,onClose:n,type:o}){return e.jsx(We,{children:a&&e.jsx(xt,{children:e.jsx(Gs.Provider,{value:{isEmbeddedInFocusedView:!0,type:o},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(F.div,{className:"bg-token-main-surface-secondary h-full w-full",...J}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"grow overflow-auto",children:s}),e.jsx(F.div,{className:"border-token-border-medium bg-token-main-surface-primary relative shrink-0 border-s",style:{width:Ga},...J,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Aa,{clientThreadId:t,hideHeader:!0,hideToolsOverlay:!0,hideDisclaimer:!0,messagesVerticalAlign:"bottom"},t)})})]})]})})})})}const qa=G(()=>H(()=>import("./ft8yigokdj661ljd.js"),__vite__mapDeps([17,1,2,3,4,5,18,19,20]))),Qa=G(()=>H(()=>import("./ipoayrdx44zri2vx.js"),__vite__mapDeps([21,1,2,3,4,5,12,8,6,7,9,10,11,14,22,13,15,16,23,24,25,26,27,28,29,30,31])).then(s=>s.ImageEditor));function Ka({clientThreadId:s}){const t=Hs();i.useEffect(()=>{X.close()},[s]);let a;return t?.type===_e.ADAVisualization?a=e.jsx(qa,{clientThreadId:s,visualization:t.visualization}):t?.type===_e.Image&&(a=e.jsx(Qa,{clientThreadId:s,messageId:t.messageId,image:t.image,allImages:t.allImages},t.image.asset_pointer)),e.jsx(Ha,{clientThreadId:s,isOpen:t!=null,onClose:X.close,type:t?.type,children:a})}var Ya={};const Ja=G(()=>H(()=>import("./d4aio29is5rbz69m.js"),__vite__mapDeps([32,2,1,3,6,4,5,7,27,22,10,9,14,8,11,12,28,29,30,31,33])));function uo(s){const{urlThreadId:t,clientThreadId:a,prefetchSearch:n}=s,o=Mt(),d=z(),[f]=Nt(),[r,u]=i.useState(()=>{if(t!==void 0){const l=t;return kt(l)??l}return a!==void 0?a:Ne()});t!==void 0&&r!==t&&(Y(r)===t||u(t));const m=qs(z());i.useEffect(()=>{t===void 0&&Y(r)!==void 0&&u(Ne())},[t,r,m]);const p=V(Z.workspaceId),{eligible:A,isLoading:M,markAsViewed:k}=Qs(),I=Ks(),{eligible:b,isLoading:y,markAsViewed:v}=Ys(),j=Js(),{eligible:g,isLoading:S,markAsViewed:N}=Xs(),C=$s(),P=Qe();i.useEffect(()=>{bt(!0).then(l=>{l.force_login&&P({authType:"login"}),Zs.initializeAndGatherData(l),Ct.initializeAndGatherData(l)})},[P]),i.useEffect(()=>{const l=f.get(ea)==="true";o!==l&&St.setIsTemporaryChatEnabled(l)},[o,f]),i.useEffect(()=>{d.state?.focusObject&&X.setFocusedObject(d.state.focusObject)},[d.state?.focusObject]),i.useEffect(()=>{!M&&A&&(k(),I())},[A,M,k,I]),i.useEffect(()=>{!y&&b&&(v(),j())},[b,y,v,j]),i.useEffect(()=>{!S&&g&&(N(),C())},[g,S,N,C]),ta(r);const c=ze();return i.useEffect(()=>{B.checkGate("1661641186")&&c.fetchQuery({queryKey:["recent","images","bootstrap"],queryFn:()=>Fe.safeGet("/images/bootstrap",{})})},[c]),i.useEffect(()=>yt(wt,{completionFinished:l=>{if(l.serverThreadId!=null&&!o){const h=vt(l.serverThreadId)?.mode;h?.kind===jt.GizmoInteraction&&ma.handleGizmoInteracted(c,h.gizmo_id)}}}),[o,c]),e.jsx(sa.Provider,{value:null,children:e.jsx(aa,{children:e.jsxs(oa,{clientThreadId:r,children:[e.jsxs(ja,{clientThreadId:r,children:[e.jsx(Ke,{clientThreadId:r,children:e.jsx(Ra,{clientThreadId:r},p)}),e.jsx(Xa,{clientThreadId:r,setClientThreadId:u}),e.jsx(na,{}),e.jsx(ia,{}),e.jsx(ra,{}),e.jsx(wa,{clientThreadId:r,setClientThreadId:u,prefetchSearchPromises:n,children:e.jsxs(Te,{clientThreadId:r,children:[e.jsx(la,{}),e.jsx(Na,{urlThreadId:t,clientThreadId:r,setClientThreadId:u}),e.jsx(za,{clientThreadId:r})]})})]}),e.jsx(Te,{clientThreadId:r,children:e.jsx(Ka,{clientThreadId:r})}),e.jsx(da,{clientThreadId:r}),e.jsx(ca,{}),e.jsx(Ia,{clientThreadId:r}),e.jsx(ua,{})]})})})}function Xa({clientThreadId:s,setClientThreadId:t}){const{isOpen:a,isLoading:n}=ga();return!n&&a?e.jsx(Ja,{clientThreadId:s,setClientThreadId:t}):null}typeof window<"u"&&(window._g=Ya.GOKU_SERVICE);export{uo as C,Ga as F};
//# sourceMappingURL=k6wwy9o7ger5jsj3.js.map
