const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cepevu7y2tc50pjk.js","assets/khl8ktun31iepecq.js"])))=>i.map(i=>d[i]);
import{bM as u,aj as f,ae as c,cp as U,aN as l,F as S,l as b,E as w}from"./haannt40upmuwmtk.js";import{r as i,u as y,n as g}from"./khl8ktun31iepecq.js";import{d as h}from"./n4exq6o15ap1g74l.js";async function m(e){const t=await U(()=>import("./cepevu7y2tc50pjk.js").then(n=>n.i),__vite__mapDeps([0,1]));if(l!=null&&e?.startsWith(l))return!0;try{return t.get(new URL(e??"").hostname)==="openai.com"}catch{return!1}}function D(e,t){const n=u(),{isUnauthenticated:s}=b();return y({queryKey:["safe-url",{serverThreadId:e,url:t,isHistoryAndTrainingDisabled:n}],queryFn:async()=>{if(e==null||t==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await m(t)||S.isThreadUrlSafe(w(e),t)?{safe:!0}:s?{safe:!1}:c.getConversationSafeUrls(e,t,n)},enabled:e!=null&&t!=null})}function E(e,t,n=!0){const s=f(e,r=>t!=null&&S.isThreadUrlSafe(r,t)),{data:{safe:o}={}}=D(e,s?void 0:t);return s||o||!n?t:void 0}function C(e,t,n=!0){const s=_(t,500);return E(e,s,n)}function _(e,t){const[n,s]=i.useState(void 0),[o]=i.useState(()=>h(r=>{s(r)},t));return i.useEffect(()=>{o(e)},[o,e]),n===e?e:void 0}function P(e,t){const n=u(),s=f(e,r=>r?.safeUrls??[]),{data:o=[]}=y({queryKey:["safe-urls",e,t,n,s],queryFn:async()=>{const r=s.filter(a=>t.includes(a)),d=t.filter(a=>!r.includes(a)),p=(await Promise.allSettled(d.map(async a=>{if(await m(a))return a;if(e==null)return null;try{return(await c.getConversationSafeUrls(e,a,n)).safe?a:null}catch{return null}}))).map(a=>a.status==="fulfilled"?a.value:null).filter(a=>a!=null);return r.concat(p)},enabled:e!=null&&t.length>0});return o}const x=e=>{"use forget";const t=g.c(3),n=i.useRef(void 0);let s,o;return t[0]!==e?(s=()=>{n.current=e},o=[e],t[0]=e,t[1]=s,t[2]=o):(s=t[1],o=t[2]),i.useEffect(s,o),n};export{P as a,C as b,x as u};
//# sourceMappingURL=kw97lv1qq6sjlhnf.js.map
