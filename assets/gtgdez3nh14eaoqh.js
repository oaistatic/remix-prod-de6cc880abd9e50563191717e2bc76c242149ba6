import{fB as R,dk as g,dN as E,dV as M,aH as B,af as y,dD as F,B as N}from"./haannt40upmuwmtk.js";import{C as H,k as O,f as k,r as s,b as A,j as e}from"./khl8ktun31iepecq.js";import{r as D,t as T,a as m,u as _,s as L,C as j,b as Q,g as b,P as V,T as $,c as q,d as K}from"./n4exq6o15ap1g74l.js";import{C as G}from"./m7dukzpngt1iaaya.js";import{T as W,C as z}from"./kou4q49xqyhhfyp0.js";import{g as J}from"./jf5c1e7milql0vok.js";import{C as w,T as U}from"./egygp32u90enqkm4.js";import{C as X}from"./jjqeoesb3rhorlyg.js";import"./jy1u8exw8iz2slve.js";import"./gy64pge8qevmvg7e.js";import"./kiredz58u04n7vci.js";import"./4yav5vtwjczc7whm.js";import"./l6prrb6nf9agh4ql.js";import"./dblaaxd78ezocyc0.js";import"./o1bzkr20ape07jec.js";import"./oghjpi4z21x1edph.js";import"./dfz2bdgqh4yduujb.js";import"./jjzyh6kngpoa9x2y.js";import"./fzrn137102spawew.js";import"./n4mh0ete7jlifz2u.js";import"./iuzjvviw85b4ghdw.js";import"./k1s179c6hw2g8g6f.js";import"./iqn1sco9xm33m83q.js";import"./lg9iewuzavytplg0.js";import"./mhqi8r5v3dwotfod.js";import"./e473oe6zkw5lqbph.js";import"./m4g7yy9fehqi204r.js";import"./b3mht1lg7zv7qd3d.js";import"./kw97lv1qq6sjlhnf.js";const Re=()=>(D(),null),Ee=R(function(){const a=H(),[o]=O(),u=k(),p=T(a.conversationId),i=m(o.get("readonly"),!1),c=m(o.get("isFullScreen"),!1),d=m(o.get("header"),!0),l=m(o.get("appPreview"),!1),r=g(()=>E()),C=g(()=>M()),P=m(o.get("hideBottomComposer"),!!i),n=T(a.canmoreId),t=p,f=_();s.useEffect(()=>{L({type:j.Textdoc,textdocId:n})},[n]),Q(t,{kind:B.PrimaryAssistant});const h=A();if(s.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),s.useEffect(()=>{n||u("/")},[n,u]),s.useEffect(()=>{b().sendMessage({type:w.Loaded})},[n]),!n||f?.type!==j.Textdoc)return null;const I=()=>{b().sendMessage({type:w.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(V,{clientThreadId:t,children:e.jsx(X,{clientThreadId:t,children:e.jsx($,{clientThreadId:t,children:l?e.jsx(F,{children:e.jsx(Y,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(W,{clientThreadId:t,disableScroll:!r,textdocId:f.textdocId}),e.jsx(z,{})]}):e.jsx(U,{isEmbedded:!0,hideRunCode:!r,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:I},"textdocContent")})})})]})}),Y=({textdocId:x})=>{const a=s.useRef(null),o=q(x),[u,p]=s.useState(!1),i=o?.versions??[],c=N(i),d=s.useCallback(K(async l=>{const r=J(l.type,l.content);if(a.current&&(r==="react"||r==="html")){p(!0);const v=a.current.evalAsync({language:r,code:l.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(G,{visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Re as clientLoader,Ee as default};
//# sourceMappingURL=gtgdez3nh14eaoqh.js.map
