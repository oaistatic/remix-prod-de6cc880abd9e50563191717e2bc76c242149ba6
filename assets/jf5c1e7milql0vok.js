import{g as y,j as r,a8 as c,r as o,d as M,M as a}from"./khl8ktun31iepecq.js";import{q as G,gZ as U,gY as V,a as N,g_ as H,cr as k,P as g,o as Y}from"./haannt40upmuwmtk.js";import{d1 as x,lT as F,d2 as i,lU as Z,c1 as q,aF as B,a6 as d,gC as X,a7 as b,lV as J}from"./n4exq6o15ap1g74l.js";import{N as K}from"./jy1u8exw8iz2slve.js";import{S as z}from"./o1bzkr20ape07jec.js";var $=G;function Q(t){return typeof t=="function"?t:$}var L=Q,W=U,tt=L,st=V,rt=9007199254740991,_=4294967295,et=Math.min;function it(t,s){if(t=st(t),t<1||t>rt)return[];var e=_,n=et(t,_);s=tt(s),t-=_;for(var u=W(n,s);++e<t;)s(e);return u}var nt=it;const at=y(nt),wt=({gap:t,padding:s=4,size:e=3})=>r.jsx(c.div,{className:N("grid h-full max-w-full flex-1 grid-cols-3 items-center"),style:{gap:t,padding:s},children:at(3,n=>r.jsx(c.div,{className:"dark:bg-white-400 aspect-square rounded-full bg-gray-400",animate:{translateY:["0%","-50%","0%","0%","0%"]},style:{translateX:.5,width:e,height:e},transition:{repeat:1/0,type:"keyframes",delay:n/10,duration:.7}},n))});var lt=(t=>(t.READY="ready",t.LOG="log",t.RUN_START="run_start",t.ENVIRONMENT_STATUS="environment_status",t.ENVIRONMENT_ERROR="environment_error",t.SET_BACKGROUND_COLOR="set_background_color",t.INSTRUMENT="instrument",t.OUTPUT="output",t.ERROR="error",t.RUN_COMPLETE="run_complete",t))(lt||{}),ct=(t=>(t.SW_RECONNECT="sw_reconnect",t.SW_NOT_SUPPORTED="sw_not_supported",t))(ct||{});const ot=["python","javascript","typescript","html","react"];function ut(t){return ot.includes(t)}var pt=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.INSTALLING_PACKAGES=1]="INSTALLING_PACKAGES",t[t.RUNNING_CODE=2]="RUNNING_CODE",t))(pt||{}),mt=(t=>(t.RUN_CODE="run",t.STOP_CODE="stop",t.PREPARE_ENVIRONMENT="prepare_environment",t))(mt||{}),Et=(t=>(t.SW_RECONNECT_RESPONSE="sw_reconnect_response",t))(Et||{}),ht=(t=>(t.FLUSH="flush",t.SW_RECONNECT_RESPONSE="sw_reconnect_response",t.FETCH_RESPONSE="fetch_response",t.INIT="init",t.PING="ping",t.DISCONNECT="disconnect",t))(ht||{}),A=(t=>(t.javascript="javascript",t.typescript="typescript",t.bash="bash",t.zsh="zsh",t.html="html",t.css="css",t.python="python",t.json="json",t.sql="sql",t.go="go",t.yaml="yaml",t.java="java",t.rust="rust",t.cpp="cpp",t.swift="swift",t.php="php",t.xml="xml",t.ruby="ruby",t.haskell="haskell",t.kotlin="kotlin",t.csharp="csharp",t.c="c",t.objectivec="objectivec",t.r="r",t.lua="lua",t.dart="dart",t.scala="scala",t.perl="perl",t.commonlisp="commonlisp",t.clojure="clojure",t.ocaml="ocaml",t.powershell="powershell",t.verilog="verilog",t.dockerfile="dockerfile",t.vue="vue",t.other="other",t))(A||{});function I(t){if(x(t))switch(t){case i.CODE_REACT:return"typescript";default:return F(t.replace(/^code\//,""),Object.values(A),"other")}}function C(t){return t.includes("'react'")||t.includes('"react"')}function Dt(t,s){switch(t){case i.CODE_HTML:case i.CODE_REACT:return!0;case i.CODE_JAVASCRIPT:case i.CODE_TYPESCRIPT:return C(s);default:return!1}}function jt(t){return Z([i.CODE_PYTHON],t)}function Pt(t,s){let e=I(t)??null;return(C(s)||t===i.CODE_REACT)&&(e="react"),e&&ut(e)?e:null}const _t=36,Tt=-24,Nt=280,yt=Nt+_t,Mt=40;var ft=(t=>(t.COLLAPSED="collapsed",t.EXPANDED="expanded",t))(ft||{});const vt=[H],Gt=()=>t=>{q(t,"textDirective",s=>{vt.includes(s.name)||(s.type="text",s.value=`:${s.name}`)})},Rt=t=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...t},o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM9 8.963v6.074c0 .9.996 1.444 1.754.957l4.723-3.037a1.138 1.138 0 0 0 0-1.914l-4.723-3.037A1.138 1.138 0 0 0 9 8.963Z",clipRule:"evenodd"}));function Ut({isDisabled:t=!1,isCodePreviewable:s=!1,isCodeRunning:e,disabledTooltip:n,clientThreadId:u,textdocType:p,onClick:S}){const[m,f]=o.useState(e),E=B(d.hasSeenCanvasCodeExecutionNux),[{width:v},w]=X();o.useEffect(()=>{let O=null;return!e||s?f(e):(O=setTimeout(()=>{f(e)},200),()=>clearTimeout(O))},[e,s]);const D=()=>({conversation_id:u?Y(u):void 0}),j=()=>{g.logEventWithStatsig("Canvas Run Code Button Clicked","chatgpt_canvas_run_code_button_clicked",D()),setTimeout(()=>S?.())},h=r.jsx(c.button,{disabled:t||e&&!m,onClick:j,className:N("btn rounded-full border transition-colors",m?N(K,"border-transparent"):"border-token-border-default hover:bg-token-surface-hover bg-transparent"),animate:{width:v??0},initial:{width:v??0},transition:{type:"spring",bounce:.24,duration:.4},children:r.jsx("div",{ref:w,children:m?r.jsxs(c.div,{className:"flex items-center gap-2 px-3 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(z,{className:"icon-md"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(a,{...l.stopCode})})]}):r.jsxs(c.div,{className:"flex items-center gap-2 px-3 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(Rt,{className:"icon-md"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(a,{...s?l.previewCode:l.runCode})})]})})}),P=!E.isLoading&&E.eligible,R=t&&n?n:e?null:r.jsx(a,{...s?l.previewCodeTooltip:l.runCodeTooltip}),T=o.useMemo(()=>{if(!p)return"canvas";switch(p){case i.CODE_JAVASCRIPT:return"JavaScript";case i.CODE_TYPESCRIPT:return"TypeScript";case i.CODE_HTML:return"HTML";case i.CODE_PYTHON:return"Python";case i.CODE_REACT:return"React"}return I(p)??"canvas"},[p]);return P?r.jsx(b,{announcementKey:d.hasSeenCanvasCodeExecutionNux,show:!0,side:"bottom",align:"end",theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:s?r.jsx(a,{id:"O8VBVO",defaultMessage:"Preview your output"}):r.jsx(a,{id:"2sN/zT",defaultMessage:"Run {language}",values:{language:T}}),description:s?r.jsx(a,{id:"CMJOVI",defaultMessage:"Run your code to see how it looks and interact with the output."}):r.jsx(a,{id:"ew1tTJ",defaultMessage:"See your output and get help debugging without leaving the canvas."}),onDismiss:E.markAsViewed,sideOffset:0,children:h}):R?r.jsx(k,{label:R,children:h}):h}const l=M({previewCode:{id:"a08baM",defaultMessage:"Preview"},runCode:{id:"O/1aYA",defaultMessage:"Run"},stopCode:{id:"nCwG4+",defaultMessage:"Stop"},runCodeTooltip:{id:"UeNB/S",defaultMessage:"See output and debug"},previewCodeTooltip:{id:"XLZZHl",defaultMessage:"Preview your output"}});class Ot{constructor(s){this.params=s}get isReadonly(){return Object.values(this.params).some(s=>!!s)}get isHistoricalVersion(){return!!this.params.isHistoricalVersion}get isStreaming(){return!!this.params.isTextdocStreaming||!!this.params.isRequestActive}get isTextdocStreaming(){return!!this.params.isTextdocStreaming}get isStreamingFromNative(){return this.isStreaming&&this.params.streamingSource===J.NATIVE}get isRestoring(){return!!this.params.isRestoring}get isShowingChanges(){return!!this.params.isShowingChanges}get isReadonlyFromQueryParam(){return!!this.params.isReadonlyFromQueryParam}}const Vt=t=>new Ot(t);export{Mt as C,Nt as E,ft as G,lt as M,wt as T,I as a,Vt as b,yt as c,jt as d,Ut as e,A as f,Pt as g,vt as h,Dt as i,_t as j,Gt as k,ht as l,l as m,ct as n,Et as o,pt as p,mt as q,Tt as r};
//# sourceMappingURL=jf5c1e7milql0vok.js.map
