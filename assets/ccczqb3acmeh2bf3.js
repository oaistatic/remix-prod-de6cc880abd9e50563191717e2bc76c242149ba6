import{e as M,r as y,j as e,M as i,f as Q}from"./khl8ktun31iepecq.js";import{bm as O,bn as $,bo as q,bp as n,bq as ee,br as z,bs as te,bt as se,bh as L,bu as T,bv as D,bw as P,bx as ae,by as I,bz as ne}from"./n4exq6o15ap1g74l.js";import{W as le}from"./dpa3s8fe1cgkjbnk.js";import{bX as oe,V as U,bb as X,b5 as G,aW as E,P as w,am as H,cW as _,eG as S,bZ as ce,a as re,ae as Y,D as ie}from"./haannt40upmuwmtk.js";import{c as me}from"./iej0cupg2dqkmejt.js";var Z=(s=>(s.FLEXIBLE="month",s.ANNUAL="year",s))(Z||{});const V=me(Z),J=({isOpen:s,onClose:a,onSubmit:g})=>{const d=E(),[c,r]=y.useState(""),l=y.useMemo(()=>d?.subscriptionAnalyticsParams,[d]);y.useEffect(()=>{w.logEvent("Account Pay: Create Workspace Modal Show",l),H.logEvent("chatgpt_select_team_plan_modal_show",null,{})},[l]);const t=k=>{w.logEvent("Account Pay: Create Workspace Modal Clicked",{...l,...k})},m=()=>{w.logEvent("Account Pay: Create Workspace Modal Dismiss",l)},o=M();return e.jsxs(_,{testId:"modal-workspace-name-collection",type:"success",isOpen:s,onClose:()=>{a(),m()},className:"max-w-lg",showCloseButton:!0,title:e.jsx(i,{...n.createWorkspace}),children:[e.jsx("div",{className:"bg-token-main-surface-primary flex flex-col justify-center pb-2",children:e.jsx(le,{workspaceName:c,onChangeWorkspaceName:r})}),e.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[e.jsx(S,{title:o.formatMessage(n.cancel),onClick:()=>{a(),t({buttonType:"Cancel"})}}),e.jsx(S,{title:o.formatMessage(n.selectBillingOption),onClick:()=>{g(c),t({buttonType:"Billing Options"})},disabled:c==="",color:"primary",className:"ms-4"})]})]})},F=oe.p`text-base font-medium mb-3`,K=({isOpen:s,onClose:a,onSubmit:g,minimumSeats:d,billingDetails:c,isDirectFlow:r=!1})=>{const l=E(),[t,m]=y.useState("month"),[o,k]=y.useState(!1),j=M(),[f,v]=y.useState(Math.max(ee,d)),p=Math.max(d,P),{flexibleBillingPlan:N,annualBillingPlan:u}=z(c.currency),h=te(isNaN(f)?0:f,p,se),b=y.useMemo(()=>l?.subscriptionAnalyticsParams,[l]);y.useEffect(()=>{w.logEvent("Account Pay: Select Team Plan Modal Show",b)},[b]);const A=x=>{switch(x){case"month":w.logEvent("Account Pay: Team Plan Selection Clicked",{...b,buttonType:"Continue",numberOfSeats:f,planLength:I.MONTHLY});break;case"year":w.logEvent("Account Pay: Select Team Plan Modal Clicked",{...b,buttonType:"Continue",numberOfSeats:f,planLength:I.ANNUAL});break}},B=(x,W)=>{w.logEvent("Account Pay: Select Team Plan Modal Clicked",{...b,buttonType:"Continue",numberOfSeats:W,planLength:x}),H.logEvent("chatgpt_select_team_plan_modal_continue_to_billing_clicked",x,{number_of_seats:W.toString()})},C=()=>{w.logEvent("Account Pay: Select Team Plan Modal Dismiss",b)};return r?e.jsx(_,{testId:"modal-workspace-purchase",type:"success",isOpen:s,onClose:()=>{a(),C()},size:"fullscreen",noPadding:!0,removePopoverStyling:!0,showCloseButton:!0,children:e.jsxs("div",{className:"grid grid-flow-row grid-cols-1 md:h-full md:grid-cols-2",children:[e.jsx("div",{className:"flex-column col-span-1 flex justify-center p-5 md:grid-cols-2",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col items-center",children:[e.jsx(ce,{className:"mt-8 mb-6 h-8 w-8 md:fixed md:start-4 md:top-4 md:mt-0 md:h-6 md:w-6"}),e.jsx("div",{className:"mb-8 text-3xl font-medium md:mt-[120px]",children:e.jsx(i,{id:"selectTeamPlanModal.title",defaultMessage:"Pick your plan"})}),e.jsxs(L,{className:"col-span-3 mb-6 grid w-full gap-4 md:col-span-2 md:grid-cols-2",defaultValue:t,onValueChange:x=>{V(x)&&(m(x),A(x))},children:[e.jsx(T,{billingType:"year",...u,selectedValue:t,hideDetails:!0}),e.jsx(T,{billingType:"month",...N,selectedValue:t,hideDetails:!0})]}),e.jsx(D,{numSeats:f,minSeats:p,setNumSeats:v}),e.jsx("div",{className:"text-token-text-secondary self-start text-xs",children:j.formatMessage({id:"selectTeamPlanModal.seatsDescription",defaultMessage:"Add more seats at any time. Minimum of {minSeats} seats."},{minSeats:P})})]})}),e.jsx("div",{className:"col-span-3 flex h-full flex-col items-center overflow-hidden p-6 md:col-span-1 md:shadow-lg",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col md:mt-[120px]",children:[e.jsx(F,{className:"mb-8 text-xl font-medium",children:e.jsx(i,{...n.summaryTitle})}),e.jsx(R,{numSeats:h,selectedPlan:t,billingDetails:c,totalLabel:n.allPlansTodayTotal,billDate:e.jsx(i,{...n.today})}),e.jsx(S,{title:j.formatMessage(n.continueToBillingButton),onClick:()=>{k(!0),g(t,h),B(t,h)},disabled:!1,loading:o,color:"green",className:"w-full rounded-xl"}),e.jsx(S,{title:j.formatMessage(n.cancel),onClick:()=>{a(),C()},color:"ghost",className:"mt-4 w-full rounded-xl"})]})})]})}):e.jsx(_,{testId:"modal-select-team-plan",type:"success",isOpen:s,onClose:()=>{a(),C()},size:"custom",noPadding:!0,removePopoverStyling:!0,className:"max-w-4xl",showCloseButton:!0,title:j.formatMessage(n.selectTeamPlanModalTitle),children:e.jsxs("div",{className:"grid h-full grid-flow-row grid-cols-3",children:[e.jsxs("div",{className:"flex-column col-span-3 p-5 md:col-span-2 md:grid-cols-2",children:[e.jsx(D,{numSeats:f,minSeats:p,setNumSeats:v}),e.jsxs(L,{className:"col-span-3 mt-5 grid gap-4 md:col-span-2 md:grid-cols-2",defaultValue:t,onValueChange:x=>{V(x)&&(m(x),A(x))},children:[e.jsx(T,{billingType:"year",...u,selectedValue:t}),e.jsx(T,{billingType:"month",...N,selectedValue:t})]})]}),e.jsxs("div",{className:"border-token-main-surface-tertiary bg-token-main-surface-secondary col-span-3 flex h-full flex-col overflow-hidden border-s p-6 md:col-span-1",children:[e.jsx(F,{children:e.jsx(i,{...n.summaryTitle})}),e.jsx(R,{numSeats:h,selectedPlan:t,billingDetails:c,totalLabel:n.allPlansTodayTotal,billDate:e.jsx(i,{...n.today})}),e.jsx(S,{title:j.formatMessage(n.continueToBillingButton),onClick:()=>{k(!0),g(t,h),B(t,h)},disabled:!1,loading:o,color:"primary",className:"w-full rounded-xl"})]})]})})},R=({numSeats:s,selectedPlan:a,billingDetails:g,totalLabel:d,billDate:c})=>{const r=M(),{flexibleBillingPlan:l,annualBillingPlan:t}=z(g.currency),m=a==="month"?l:t,o=ne[a];return e.jsxs("div",{className:"flex grow flex-col text-sm",children:[e.jsxs("div",{className:"text-token-text-secondary flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(i,{...o.name})}),e.jsx("div",{className:"flex",children:e.jsx(i,{...n.allPlansPreDiscountTotal,values:{currencySign:r.formatMessage(m.currencySign),preDiscountTotalAmount:((s||0)*(a==="year"?t.monthlyCost*12:l.monthlyCost)).toLocaleString()}})})]}),e.jsxs("div",{className:"text-token-text-tertiary flex w-full justify-between text-xs",children:[e.jsx("div",{className:"flex",children:e.jsx(i,{...o.breakdown,values:{numSeats:s}})}),e.jsx("div",{className:"flex",children:e.jsx(i,{...n.breakdownAmount,values:{currencySign:r.formatMessage(m.currencySign),amount:m.monthlyCost}})})]}),e.jsxs("div",{className:"text-token-text-secondary mt-3 flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(i,{...n.planDiscountLabel})}),e.jsx("div",{className:re("flex",a==="year"&&t.discountedMonthlyCost<t.monthlyCost&&"font-medium text-[#10A37F]"),children:e.jsx(i,{...o.discountAmount,values:{currencySign:r.formatMessage(l.currencySign),discountAmount:((s||0)*(a==="year"?(t.monthlyCost-t.discountedMonthlyCost)*12:l.monthlyCost-l.discountedMonthlyCost)).toLocaleString()}})})]}),o.discountDescription&&t.discountedMonthlyCost<t.monthlyCost&&a==="year"&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(i,{...o.discountDescription,values:{discountPercentage:Math.floor((1-t.discountedMonthlyCost/t.monthlyCost)*100)}})}),e.jsx("hr",{className:"border-token-border-default my-3"}),e.jsxs("div",{className:"flex w-full justify-between text-base font-medium",children:[e.jsx("div",{className:"flex",children:e.jsx(i,{...d})}),e.jsx("div",{className:"flex",children:e.jsx(i,{...o.total,values:{currencyCode:r.formatMessage(m.currencyCode),currencySign:r.formatMessage(m.currencySign),totalAmount:((s||0)*m.unitCost).toLocaleString()}})})]}),e.jsx("div",{className:"text-token-text-tertiary mb-8 text-xs",children:e.jsx(i,{...o.billed,values:{billDate:c}})})]})};function pe(){const s=E(),a=Q(),{initialBillingDetails:g}=ae(s,!0),d=M(),c=O(),r=q(d,void 0,c),{config:l}=X("3217984440"),t=l.get("enabled",!1),[m,o]=y.useState(t?r:""),k=G(),j=U(),f=async(p,N)=>{try{const u=await Y.getCheckoutLink(k,"Teams",{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:r,price_interval:p,seat_quantity:N},billing_details:g});window.location.href=u.url}catch(u){ie.addError(u),j.warning(d.formatMessage(n.paymentErrorWarning),{hasCloseButton:!0})}},v=()=>{a("/")};return m===""?e.jsx(J,{isOpen:!0,onClose:v,onSubmit:p=>o(p)}):e.jsx(K,{isOpen:!0,onClose:v,onSubmit:(p,N)=>f(p,N),isDirectFlow:!0,minimumSeats:P,billingDetails:g})}function he({isOpen:s,onClose:a,minimumSeats:g,billingDetails:d,existingAccount:c=void 0}){const r=M(),l=U(),t=O(),m=c?$(r,c):"",o=q(r,c,t),{config:k}=X("3217984440"),j=k.get("enabled",!1),[f,v]=y.useState(j?o:m),p=G(),N=async(u,h)=>{try{const b=await Y.getCheckoutLink(p,"Teams",{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:f,price_interval:u,seat_quantity:h,existing_workspace_id:c?.id},billing_details:d});window.location.href=b.url}catch{l.warning(r.formatMessage(n.paymentErrorWarning),{hasCloseButton:!0})}};return f===""?e.jsx(J,{isOpen:s,onClose:a,onSubmit:u=>{v(u)}}):e.jsx(K,{isOpen:s,onClose:a,onSubmit:(u,h)=>N(u,h),minimumSeats:g,billingDetails:d})}export{R as B,pe as T,he as a};
//# sourceMappingURL=ccczqb3acmeh2bf3.js.map
