import{r as p,j as s,L as Te,n as X,e as Z,f as ce,M as N,d as ye,v as de,ad as Oe}from"./khl8ktun31iepecq.js";import{aG as ve,a as W,aL as be,m as We,dE as De,cX as Se,P as D,aV as Q,cH as q,bX as Ie,g as me,L as ue,aW as je,cx as Ue,eU as Fe,gh as Be,ek as He,cr as Ve,fF as Ke}from"./haannt40upmuwmtk.js";import{z as ae,bK as Qe,fI as ke,fJ as $e,fK as qe,fL as we,fM as Xe,fN as Ye,I as Y,dN as ze,e9 as Ne,fO as Je,cB as Ze,du as es,fP as fe,Q as ss,fQ as ts,d4 as $,fR as rs,fS as J,f7 as os,e6 as as,e4 as is,b9 as ls}from"./n4exq6o15ap1g74l.js";import{S as Re}from"./dshcxoxawhwwl12e.js";import{A as ge}from"./kcog7bo1l2c0hhih.js";import{G as Ge}from"./m4g7yy9fehqi204r.js";import{G as Ce,a as Le,c as cs,E as ns,P as ds}from"./e473oe6zkw5lqbph.js";import{G as ne}from"./cmnfbk2gsf7cr678.js";import{C as ms}from"./h8re7wo6sx6nawbp.js";function Me({gizmo:r,children:e,onClick:t,onModalOpen:o,onModalClose:a,selectOnly:l,className:m}){const g=ve("1825130190").value,[x,u]=p.useState(!1);return l?s.jsx("a",{className:W("gizmo-link cursor-pointer",m),href:"#",onClick:h=>{h.preventDefault(),t?.(h)},children:e}):g?s.jsxs(s.Fragment,{children:[x&&s.jsx(Ce,{gizmoId:r.gizmo.id,creatorId:r.gizmo.author.user_id,onClose:()=>{u(!1),a?.()},children:s.jsx(Le,{as:"link",to:ae(r)})}),s.jsx("a",{className:W("gizmo-link cursor-pointer",m),href:"#",onClick:h=>{h.preventDefault(),t?.(h),u(!0),o?.()},children:e})]}):s.jsx(Te,{to:ae(r),className:W("gizmo-link",m),target:"_blank",onClick:t,children:e})}function us(r){"use forget";const e=X.c(26),{placeholder:t,effectiveRole:o,onSelect:a,popoverClassName:l}=r,m=Z(),[g,x]=p.useState("ALL"),[u,h]=p.useState(""),[y,S]=p.useState(""),[i,n]=p.useState(null),b=be()?.isWorkspaceAccount();let w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w="3054422710",e[0]=w):w=e[0];const f=ve(w).value,G=b!==void 0&&b&&f;let k,d;e[1]!==u?(k=()=>{const E=setTimeout(()=>{S(u)},250);return()=>{clearTimeout(E)}},d=[u],e[1]=u,e[2]=k,e[3]=d):(k=e[2],d=e[3]),p.useEffect(k,d);const v=We(),z=ce();let L;e[4]!==a||e[5]!==z||e[6]!==v?(L=E=>{if(a){a(E);return}if(!De(v,"1825130190")){const P=ae(E);z(P);return}n(E)},e[4]=a,e[5]=z,e[6]=v,e[7]=L):L=e[7];const U=L;let M;e[8]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(Qe,{className:"text-token-text-tertiary icon-md absolute start-5 top-1/2 z-30 -translate-y-1/2"}),e[8]=M):M=e[8];let A;e[9]!==m||e[10]!==t||e[11]!==l||e[12]!==u?(A=(E,_)=>s.jsxs(ms,{label:t??m.formatMessage(O.discoverySearch),inputClassName:"bg-token-main-surface-primary! py-4 px-3 rounded-xl font-normal text-base! ps-12",popoverClassName:W("-top-3! border-token-border-default! rounded-xl",l??"bg-token-main-surface-primary!"),className:"border-token-border-default! rounded-xl! p-0! ring-0!",name:"search",inputValue:u,onInputChange:h,onTabChange:P=>x(P==="WORKSPACE"?"WORKSPACE":"ALL"),suggestions:E,RenderTab:gs,children:[_,_==null&&s.jsx("div",{className:"w-full py-4",children:s.jsx(hs,{})})]}),e[9]=m,e[10]=t,e[11]=l,e[12]=u,e[13]=A):A=e[13];let F;e[14]!==g||e[15]!==y||e[16]!==o||e[17]!==U||e[18]!==G||e[19]!==A?(F=s.jsx(ps,{activeTab:g,query:y,effectiveRole:o,setPopoverForceOpen:fs,onSelect:U,showWorkspaceResults:G,renderCombobox:A}),e[14]=g,e[15]=y,e[16]=o,e[17]=U,e[18]=G,e[19]=A,e[20]=F):F=e[20];let R;e[21]!==i?(R=i&&s.jsx(Ce,{gizmoId:i.gizmo.id,creatorId:i.gizmo.author.user_id,onClose:()=>{n(null)},children:s.jsx(Le,{as:"link",to:ae(i)})}),e[21]=i,e[22]=R):R=e[22];let H;return e[23]!==F||e[24]!==R?(H=s.jsxs("div",{className:"relative z-0",children:[M,F,R]}),e[23]=F,e[24]=R,e[25]=H):H=e[25],H}function fs(){}function gs(r){"use forget";const e=X.c(4),{tab:t}=r,o=ke();if(t==="ALL"){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(N,{...O.discoveryAllResultsHeader}),e[0]=a):a=e[0],a}if(t==="WORKSPACE"){let a;return e[1]!==o?(a=s.jsx(N,{...O.discoveryWorkspaceResultsHeader,values:{workspaceName:o}}),e[1]=o,e[2]=a):a=e[2],a}if(t==="discoverySearchRecentlyUsed"){let a;return e[3]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(N,{...O.discoverySearchRecentlyUsed}),e[3]=a):a=e[3],a}return t}function hs(){return s.jsx("div",{className:"flex items-center justify-center py-1",children:s.jsx(Se,{})})}function ps(r){"use forget";const e=X.c(20),{activeTab:t,query:o,effectiveRole:a,setPopoverForceOpen:l,showWorkspaceResults:m,onSelect:g,renderCombobox:x}=r;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[0]=u):u=e[0],p.useEffect(vs,u);const{data:h,isLoading:y}=$e(o),{data:S,isLoading:i}=qe(o,m);let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n={cutId:"recent",limit:3},e[1]=n):n=e[1];const{data:b,isLoading:w}=we(n),f=h?.items,G=h?.cursor,k=S?.items,d=S?.cursor;let v;e[2]!==b?.pages?(v=b?.pages.flatMap(xs)??[],e[2]=b?.pages,e[3]=v):v=e[3];let z;return e[4]!==t||e[5]!==a||e[6]!==w||e[7]!==y||e[8]!==i||e[9]!==g||e[10]!==o||e[11]!==x||e[12]!==l||e[13]!==m||e[14]!==f||e[15]!==G||e[16]!==k||e[17]!==d||e[18]!==v?(z=s.jsx(bs,{debouncedQuery:o,searchResults:f,isLoadingSearch:y,searchResultsCursor:G,showWorkspaceResults:m,workspaceSearchResults:k,workspaceSearchResultsCursor:d,isLoadingWorkspaceSearch:i,isLoadingRecent:w,recent:v,effectiveRole:a,setPopoverForceOpen:l,onSelect:g,activeTab:t,renderCombobox:x}),e[4]=t,e[5]=a,e[6]=w,e[7]=y,e[8]=i,e[9]=g,e[10]=o,e[11]=x,e[12]=l,e[13]=m,e[14]=f,e[15]=G,e[16]=k,e[17]=d,e[18]=v,e[19]=z):z=e[19],z}function xs(r){return r.list.items.map(ys)}function ys(r){return r.resource}function vs(){D.logEvent("Search Start")}function bs(r){"use forget";const e=X.c(25),{activeTab:t,debouncedQuery:o,searchResults:a,isLoadingSearch:l,searchResultsCursor:m,showWorkspaceResults:g,workspaceSearchResults:x,workspaceSearchResultsCursor:u,isLoadingWorkspaceSearch:h,recent:y,isLoadingRecent:S,effectiveRole:i,setPopoverForceOpen:n,onSelect:b,renderCombobox:w}=r;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=de(),e[0]=f):f=e[0];const G=p.useRef(f);let k;e[1]===Symbol.for("react.memo_cache_sentinel")?(k=[],e[1]=k):k=e[1],p.useEffect(Ss,k);let d,v;e[2]!==o||e[3]!==l||e[4]!==a?(d=()=>{!l&&a&&(G.current=de(),a.length>0?Promise.all(a.map((U,M)=>{D.logEvent("Search Display Result",{search_id:G.current,gizmo_id:U.gizmo.id,position:M,query:o})})):D.logEvent("Search No Results",{query:o}))},v=[a,l,o],e[2]=o,e[3]=l,e[4]=a,e[5]=d,e[6]=v):(d=e[5],v=e[6]),p.useEffect(d,v);let z;e[7]!==y?(z=y??[],e[7]=y,e[8]=z):z=e[8];let L;return e[9]!==t||e[10]!==o||e[11]!==i||e[12]!==S||e[13]!==l||e[14]!==h||e[15]!==b||e[16]!==w||e[17]!==a||e[18]!==m||e[19]!==n||e[20]!==g||e[21]!==z||e[22]!==x||e[23]!==u?(L=s.jsx(js,{query:o,activeTab:t,searchIdRef:G,searchResults:a,searchResultsCursor:m,isLoadingSearch:l,showWorkspaceResults:g,workspaceSearchResults:x,workspaceSearchResultsCursor:u,isLoadingWorkspaceSearch:h,isLoadingRecent:S,recentSearchResults:z,setPopoverForceOpen:n,effectiveRole:i,onSelect:b,renderCombobox:w}),e[9]=t,e[10]=o,e[11]=i,e[12]=S,e[13]=l,e[14]=h,e[15]=b,e[16]=w,e[17]=a,e[18]=m,e[19]=n,e[20]=g,e[21]=z,e[22]=x,e[23]=u,e[24]=L):L=e[24],L}function Ss(){D.logEvent("Search Start")}function le(r){"use forget";const e=X.c(6),{children:t,onClick:o,isSelected:a,isClickable:l}=r,m=`text-token-text-tertiary px-3 pb-2 text-xs ${a?"border-b-2 font-bold":"font-semibold"} ${l?"cursor-pointer":""}`;let g;e[0]!==o?(g=()=>{o?.()},e[0]=o,e[1]=g):g=e[1];let x;return e[2]!==t||e[3]!==m||e[4]!==g?(x=s.jsx("div",{className:m,onClick:g,children:t}),e[2]=t,e[3]=m,e[4]=g,e[5]=x):x=e[5],x}function js(r){"use forget";const e=X.c(74),{query:t,searchIdRef:o,isLoadingRecent:a,searchResults:l,searchResultsCursor:m,isLoadingSearch:g,showWorkspaceResults:x,workspaceSearchResults:u,workspaceSearchResultsCursor:h,isLoadingWorkspaceSearch:y,recentSearchResults:S,setPopoverForceOpen:i,activeTab:n,effectiveRole:b,onSelect:w,renderCombobox:f}=r;let G;e[0]!==l?(G=l===void 0?[]:l,e[0]=l,e[1]=G):G=e[1];const k=G;let d;e[2]!==u?(d=u===void 0?[]:u,e[2]=u,e[3]=d):d=e[3];const v=d,z=Xe(),[L,U]=p.useState(!1),M=Ye(t,L,n==="WORKSPACE",n==="WORKSPACE"?h:m);let A;e[4]!==M.data?.pages?(A=M.data?.pages.flatMap(zs)??[],e[4]=M.data?.pages,e[5]=A):A=e[5];let F;e[6]!==M||e[7]!==A?(F={...M,data:A},e[6]=M,e[7]=A,e[8]=F):F=e[8];const{data:R,hasNextPage:H,fetchNextPage:E,isFetchingNextPage:_,isError:P}=F,[ee,Ae]=p.useState(R.length),_e=p.useRef(null);let se,te;e[9]!==ee||e[10]!==R.length?(se=()=>{R.length>ee&&(Ae(R.length),_e.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},te=[R.length,ee],e[9]=ee,e[10]=R.length,e[11]=se,e[12]=te):(se=e[11],te=e[12]),p.useEffect(se,te);let re;e[13]!==b||e[14]!==z||e[15]!==w||e[16]!==t||e[17]!==o?(re=(c,j)=>{const C=c.gizmo.vanity_metrics?.num_conversations_str,B=c.gizmo.tags?.includes(Y.WorkspaceDisabled)&&b!==Q.OWNER;return{id:c.gizmo.id,className:W("group flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50 dark:hover:bg-white/10",B&&"opacity-50 hover:opacity-100"),focusedClassName:"bg-gray-50 dark:bg-white/10",onClick:()=>{w?w(c):D.logEvent("Store Click Gizmo",{search_id:o.current,gizmo_id:c.gizmo.id,position:j,query:t,section:"search"})},children:s.jsx(Rs,{resource:c,grayedOut:B??!1,isScreenSm:z,numConvos:C})}},e[13]=b,e[14]=z,e[15]=w,e[16]=t,e[17]=o,e[18]=re):re=e[18];const V=re;if(t===""&&S&&S.length>0){let c;return e[19]!==V||e[20]!==S||e[21]!==f?(c=f({discoverySearchRecentlyUsed:S.map(V)},null),e[19]=V,e[20]=S,e[21]=f,e[22]=c):c=e[22],c}if(t===""&&a){let c;return e[23]!==f?(c=f([],null),e[23]=f,e[24]=c):c=e[24],c}if(t===""){let c;if(e[25]!==f){let j;e[27]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(N,{...O.discoverySearchRecentlyUsedEmpty})}),e[27]=j):j=e[27],c=f([],j),e[25]=f,e[26]=c}else c=e[26];return c}if(t!==""&&!g&&n==="ALL"&&(k==null||k.length===0)){let c;if(e[28]!==f){let j;e[30]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(N,{...O.discoveryNoResultsSearch})}),e[30]=j):j=e[30],c=f([],j),e[28]=f,e[29]=c}else c=e[29];return c}if(t!==""&&!y&&n==="WORKSPACE"&&(v==null||v.length===0)){let c;if(e[31]!==f){let j;e[33]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(N,{...O.discoveryNoResultsSearch})}),e[33]=j):j=e[33],c=f([],j),e[31]=f,e[32]=c}else c=e[32];return c}if(x){if(t!==""&&!g&&!y&&(!k||k.length===0)&&(!v||v.length===0)){let c;if(e[34]!==f){let j;e[36]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"mx-2",children:s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(N,{...O.discoveryNoResultsSearch})})}),e[36]=j):j=e[36],c=f([],j),e[34]=f,e[35]=c}else c=e[35];return c}}else{if(g){let c;return e[37]!==f?(c=f([],null),e[37]=f,e[38]=c):c=e[38],c}if(t!==""&&!g&&(!k||k.length===0)){let c;if(e[39]!==f){let j;e[41]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"mx-2",children:s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(N,{...O.discoveryNoResultsSearch})})}),e[41]=j):j=e[41],c=f([],j),e[39]=f,e[40]=c}else c=e[40];return c}}let oe;if(e[42]!==E||e[43]!==H||e[44]!==P||e[45]!==_||e[46]!==L||e[47]!==R||e[48]!==V||e[49]!==f||e[50]!==k||e[51]!==m||e[52]!==i||e[53]!==v||e[54]!==h){let c=[];if(k){const C=k.map(V);c=[...c,...C]}if(k&&R){const C=R.map(V);c=[...c,...C]}if((!L&&R.length===0||H||_||P)&&m!=null){let C;e[56]!==E||e[57]!==i?(C=()=>{U(!0),E(),i?.(!0)},e[56]=E,e[57]=i,e[58]=C):C=e[58];const B=P?"danger-outline":"secondary";let T;e[59]!==P?(T=P?s.jsx(N,{...O.discoveryLoadMoreError}):s.jsx(N,{...O.discoveryLoadMore}),e[59]=P,e[60]=T):T=e[60];let K;e[61]!==_||e[62]!==B||e[63]!==T?(K=s.jsx(q,{color:B,onClick:ws,loading:_,fullWidth:!0,className:"mt-2 md:mt-3",children:T}),e[61]=_,e[62]=B,e[63]=T,e[64]=K):K=e[64];const ie={id:"all-load-more-button",className:"",onClick:C,children:K};c=[...c,ie]}const j={ALL:c};if(v){const C=v.map(V);j.WORKSPACE=C}if(v&&R){const C=R.map(V);j.WORKSPACE=[...j.WORKSPACE,...C]}if((!L&&R.length===0||H||_||P)&&h!=null){let C;e[65]!==E||e[66]!==i?(C=()=>{U(!0),E(),i?.(!0)},e[65]=E,e[66]=i,e[67]=C):C=e[67];const B=P?"danger-outline":"secondary";let T;e[68]!==P?(T=P?s.jsx(N,{...O.discoveryLoadMoreError}):s.jsx(N,{...O.discoveryLoadMore}),e[68]=P,e[69]=T):T=e[69];let K;e[70]!==_||e[71]!==B||e[72]!==T?(K=s.jsx(q,{color:B,onClick:ks,fullWidth:!0,className:"mt-2 md:mt-3",loading:_,children:T}),e[70]=_,e[71]=B,e[72]=T,e[73]=K):K=e[73];const ie={id:"workspace-load-more-button",className:"",onClick:C,children:K};j.WORKSPACE=[...j.WORKSPACE,ie]}oe=f(j,null),e[42]=E,e[43]=H,e[44]=P,e[45]=_,e[46]=L,e[47]=R,e[48]=V,e[49]=f,e[50]=k,e[51]=m,e[52]=i,e[53]=v,e[54]=h,e[55]=oe}else oe=e[55];return oe}function ks(){}function ws(){}function zs(r){return r.items.map(Ns)}function Ns(r){return r}function Rs(r){"use forget";const e=X.c(25),{resource:t,grayedOut:o,isScreenSm:a,numConvos:l}=r,m=!!t.gizmo.tags?.includes(Y.FirstParty),g=t.gizmo.display.profile_picture_url??void 0,x=o&&"grayscale group-hover:grayscale-0";let u;e[0]!==x?(u=W("h-8 w-8 shrink-0",x),e[0]=x,e[1]=u):u=e[1];let h;e[2]!==m||e[3]!==g||e[4]!==u?(h=s.jsx(Ge,{isFirstParty:m,src:g,className:u}),e[2]=m,e[3]=g,e[4]=u,e[5]=h):h=e[5];let y;e[6]!==t.gizmo.display.name?(y=s.jsx("div",{className:"flex flex-row items-end space-x-2",children:s.jsx("span",{className:"shrink-0 truncate text-sm font-semibold",children:t.gizmo.display.name})}),e[6]=t.gizmo.display.name,e[7]=y):y=e[7];let S;e[8]!==a||e[9]!==t.gizmo.display.description?(S=a&&s.jsx("span",{className:"text-token-text-tertiary max-w-md truncate text-xs",children:t.gizmo.display.description}),e[8]=a,e[9]=t.gizmo.display.description,e[10]=S):S=e[10];let i;e[11]!==t?(i=s.jsx("div",{className:"-mt-1",children:s.jsx(ze,{gizmo:t,className:"text-token-text-tertiary truncate text-xs",hideLink:!0})}),e[11]=t,e[12]=i):i=e[12];let n;e[13]!==l?(n=l&&s.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 font-semibold",style:{marginTop:"-2px"},children:[s.jsx(Ne,{className:"icon-xs"}),s.jsx("span",{className:"line-clamp-1 text-xs",children:l})]}),e[13]=l,e[14]=n):n=e[14];let b;e[15]!==i||e[16]!==n?(b=s.jsxs("div",{className:"flex items-center gap-2",children:[i,n]}),e[15]=i,e[16]=n,e[17]=b):b=e[17];let w;e[18]!==b||e[19]!==y||e[20]!==S?(w=s.jsxs("div",{className:"flex flex-col space-y-1 truncate",children:[y,S,b]}),e[18]=b,e[19]=y,e[20]=S,e[21]=w):w=e[21];let f;return e[22]!==w||e[23]!==h?(f=s.jsxs(s.Fragment,{children:[h,w]}),e[22]=w,e[23]=h,e[24]=f):f=e[24],f}const O=ye({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"}}),Ee=Ie.div`grid grid-cols-1 gap-x-1.5 gap-y-1 md:gap-x-2 md:gap-y-1.5 lg:grid-cols-2 lg:gap-x-3 lg:gap-y-2.5`,he="gpt_store";function Gs(r,e){e.scrollLeft>r.offsetLeft?e.scrollBy({left:r.offsetLeft-e.scrollLeft-20,behavior:"smooth"}):e.scrollLeft+e.clientWidth<r.offsetLeft+r.clientWidth&&e.scrollBy({left:r.offsetLeft+r.clientWidth-e.clientWidth-e.scrollLeft+20,behavior:"smooth"})}function $s({anon:r}){const[e,t]=p.useState(()=>me.getItem(ue.GizmoDiscoveryLocale)),o=x=>{t(x),me.setItem(ue.GizmoDiscoveryLocale,x)},a=je(),[l,m]=p.useState(!1),g=a?.isOwnerOfAccount()&&!l?Q.OWNER:Q.STANDARD;return s.jsx(Cs,{anon:r,currAccount:a,requestedLocale:e,effectiveRole:g,setPretendStandardUser:m,setLocale:o})}function Cs({anon:r,currAccount:e,requestedLocale:t,effectiveRole:o,setPretendStandardUser:a,setLocale:l}){const[m,g]=p.useState(void 0),x=!!r||e?.isPersonalAccount()&&!0,{data:u,isLoading:h,isError:y}=Je(t,x);p.useEffect(()=>{u&&g({locale:u.locale,workspace_filtered:u.workspace_filtered,cuts:u.cuts.map(i=>({info:i.info,list:{items:i.list.items.map(n=>n.resource),cursor:i.list.cursor}}))})},[u]);const S=(...i)=>{const n=we(...i);return{...n,data:n.data?.pages.flatMap(b=>b.list.items.map(w=>w.resource))??[]}};return s.jsx(Ls,{anon:r,discoveryLanding:m,isLoading:h,isError:y,effectiveRole:o,setPretendStandardUser:a,requestedLocale:t,setLocale:l,useFetchMoreQuery:S})}function Ls({anon:r,discoveryLanding:e,isLoading:t,isError:o,effectiveRole:a,setPretendStandardUser:l,requestedLocale:m,setLocale:g,useFetchMoreQuery:x}){const u=je(),h=e?.locale??m,y=p.useRef({}),[S,i]=p.useState({}),n=p.useMemo(()=>Ze(Ue(e?.cuts.map(d=>({id:d.info.id,name:d.info.display_group}))),"name"),[e]),b=p.useRef(null),w=n.find(d=>S[d.id])??n[0];p.useEffect(()=>{const d=y.current,v=new IntersectionObserver(z=>{z.forEach(L=>{for(const U of n){const M=d[U.id];M!=null&&L.target===M&&i(A=>({...A,[U.id]:L.isIntersecting}))}})},{root:null,rootMargin:"-96px",threshold:.1});return Object.values(d).forEach(z=>{z!=null&&v.observe(z)}),()=>{Object.values(d).forEach(z=>{z!=null&&v.unobserve(z)})}},[y,n]);const f=p.useRef(null),G=s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:o?s.jsx(es,{type:"danger",children:s.jsx(N,{...I.discoveryError})}):s.jsx(Se,{})}),k=s.jsxs("div",{className:"screen-arch:w-full mx-auto max-w-3xl overflow-x-clip px-4",children:[s.jsx(Ms,{}),s.jsxs("div",{className:"bg-token-bg-primary sticky top-14 z-30 -mt-2 mb-12 flex flex-col gap-6 pt-2 [@media(min-width:1560px)]:top-0",children:[!r&&s.jsx(us,{}),n.length>0&&s.jsx(Es,{displayGroups:n,currentDisplayGroup:w,scrollToDisplayGroup:d=>{(y.current[d.id]??b.current).scrollIntoView({behavior:"smooth",block:"start"})}})]}),s.jsx("div",{ref:b,className:"scroll-mt-28"}),e?.cuts.map(d=>d.info.display_type==="featured"?s.jsx(Ts,{info:d.info,items:d.list.items,ref:v=>{v!=null&&(y.current[d.info.id]=v)},effectiveRole:a},d.info.id):s.jsx(Ws,{info:d.info,items:d.list.items,cursor:d.list.cursor??void 0,ref:v=>{v!=null&&(y.current[d.info.id]=v)},anon:r,effectiveRole:a,useFetchMoreQuery:x},d.info.id))??[]]});return t||o?s.jsxs(s.Fragment,{children:[r?s.jsx(ge,{redirectUrl:fe(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsx(pe,{locale:h,setLocale:g,currAccount:u}),G]}):s.jsxs("div",{ref:f,className:"h-full overflow-y-auto",children:[r?s.jsx(ge,{redirectUrl:fe(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsxs(s.Fragment,{children:[u?.isWorkspaceAccount()&&s.jsx(As,{role:a,onPretendStandardUser:d=>{l(d)}}),s.jsx(pe,{locale:h,setLocale:g,currAccount:u})]}),k,e?.workspace_filtered&&!u?.isOwnerOfAccount()&&s.jsx(Ps,{})]})}function Ms(){return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"my-2 text-center text-3xl font-bold md:my-4 md:text-5xl",children:s.jsx(N,{...I.discoverySplashHeader})}),s.jsx("div",{className:"text-token-text-secondary mx-auto w-full text-center text-sm md:text-lg md:leading-tight",children:s.jsx(N,{...I.discoverySplashDescription})})]})}function Es({displayGroups:r,currentDisplayGroup:e,scrollToDisplayGroup:t}){const o=p.useRef(null),a=Z(),l=(...i)=>a.formatMessage(...i),m=p.useRef({}),[g,x]=p.useState(!1);p.useEffect(()=>{if(g||e==null)return;const n=m.current[e.id];if(n==null)return;const b=o.current;b!=null&&Gs(n,b)},[e,g]);const[u,h]=p.useState(!1),[y,S]=p.useState(!1);return p.useEffect(()=>{const i=o.current,n=()=>{i!=null&&(h(i.scrollLeft>0),S(i.scrollLeft+i.clientWidth<i.scrollWidth))};return i?.addEventListener("scroll",n),window.addEventListener("resize",n),n(),()=>{i?.removeEventListener("scroll",n),window.removeEventListener("resize",n)}},[o]),s.jsxs("div",{className:"bg-token-main-surface-primary sticky top-14 z-10 -ms-4 w-screen py-2 text-sm md:ms-0 md:w-full md:pb-0",children:[u&&s.jsx("div",{className:"absolute start-0 top-2 hidden h-full items-end bg-linear-to-r from-white from-50% to-transparent pe-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/20",onClick:()=>{o.current!=null&&o.current.scrollBy({left:-400,behavior:"smooth"})},children:s.jsx(Fe,{className:"icon-sm"})})}),s.jsx("div",{className:"no-scrollbar flex scroll-m-5 gap-1.5 overflow-x-auto md:overflow-hidden",ref:o,children:r.map(i=>s.jsx("div",{className:W("md:text-token-text-primary cursor-pointer scroll-mx-5 rounded-3xl px-3 py-2 whitespace-nowrap select-none first:ms-4 last:me-4 md:bg-transparent md:px-2 md:first:ms-0 md:last:me-0",i.id===e?.id?"border-token-text-primary text-token-main-surface-primary bg-black md:rounded-none md:border-b-2 dark:bg-gray-100 dark:md:bg-transparent":"bg-token-main-surface-secondary hover:text-token-text-primary md:text-token-text-tertiary hover:bg-gray-100 md:rounded-lg md:hover:bg-gray-50 dark:hover:bg-white/20 dark:md:bg-transparent dark:md:hover:bg-gray-700"),onClick:()=>{x(!0),t(i),setTimeout(()=>{x(!1)},1e3),D.logEvent("Store Click Category",{category:i.id})},ref:n=>{n!=null&&(m.current[i.id]=n)},children:l({id:`gizmo.categoryName.${i.name}`,defaultMessage:i.name,description:"store category"})},i.id))}),y&&s.jsx("div",{className:"absolute end-0 top-2 hidden h-full bg-linear-to-l from-white from-50% to-transparent ps-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/10",onClick:()=>{o.current!=null&&o.current.scrollBy({left:400,behavior:"smooth"})},children:s.jsx(ss,{className:"icon-sm"})})})]})}function Ps(){const r=Z(),e=ke(),t=ts();return s.jsxs("div",{className:W("bg-token-main-surface-secondary text-token-text-secondary screen-arch:static fixed bottom-0 flex w-full items-center justify-center gap-2 p-3 text-sm",!t&&"md:w-[calc(100%-16rem)]"),children:[s.jsx(Re,{className:"icon-sm"}),r.formatMessage(I.discoveryThirdPartyGPTsDisabled,{workspaceName:e})]})}function As({role:r,onPretendStandardUser:e}){const t=Z();return Be()?s.jsxs("div",{className:"h-52px flex w-full items-center justify-center gap-2 bg-gray-100 p-3 text-sm dark:bg-gray-700",children:[s.jsx(Re,{className:"icon-sm"}),s.jsx(N,{id:"gizmo.discovery.browsingAsOwner",defaultMessage:"You're viewing as a <b>workspace member</b>",values:{b:a=>s.jsxs($.Root,{defaultValue:r,onValueChange:l=>{e(l===Q.STANDARD)},children:[s.jsxs($.Trigger,{className:"-mx-2 -my-2 bg-transparent px-1 font-semibold",children:[s.jsx(He,{disabled:r!==Q.OWNER,label:t.formatMessage({id:"gizmo.discovery.browsingAsOwnerTooltip",defaultMessage:"Owners can access all third-party GPTs, even if they haven’t been approved."}),side:"bottom",children:s.jsx($.Value,{})}),s.jsx($.Icon,{})]}),s.jsx($.Portal,{children:s.jsxs($.Content,{children:[s.jsx($.Item,{value:Q.OWNER,children:s.jsx(N,{id:"gizmo.discovery.browsingOwnerRole",defaultMessage:"workspace owner"})}),s.jsx($.Item,{value:Q.STANDARD,children:s.jsx(N,{id:"gizmo.discovery.browsingMemberRole",defaultMessage:"workspace member"})})]})})]})}})]}):null}function pe({locale:r,setLocale:e,currAccount:t}){const o=is(),a=ce(),l=Z(),m=t?.hasPlusFeatures();return s.jsx(s.Fragment,{children:s.jsxs(rs,{className:"z-30 mx-auto flex w-full justify-center gap-2 pt-[1.125rem] whitespace-nowrap",children:[s.jsxs("div",{className:"w-[calc((100%-768px)/2)] min-w-fit items-center",children:[s.jsx(ns,{}),s.jsx(Ve,{side:"right",label:r===J.GLOBAL?l.formatMessage(I.discoveryGlobalViewOn):l.formatMessage(I.discoveryGlobalViewOff),children:s.jsx(q,{color:"ghost",onClick:()=>{r===J.GLOBAL?e(J.ENGLISH):e(J.GLOBAL)},children:s.jsx(os,{className:W("icon-sm",r===J.GLOBAL?"text-token-text-primary":"text-token-text-tertiary")})})})]}),s.jsx("div",{className:"grow"}),s.jsxs("div",{className:"flex w-[calc((100%-768px)/2)] min-w-fit justify-end gap-2",children:[m&&s.jsx(q,{color:"ghost",onClick:()=>{a("/gpts/mine"),D.logEvent("Store My Gizmos")},children:s.jsx(N,{...I.discoveryMyGPTs})}),s.jsx(_s,{canCreateGPTs:m,createUrl:o})]}),s.jsx(ds,{})]})})}const _s=({canCreateGPTs:r,createUrl:e})=>{const[t,o]=p.useState(!1),a=p.useRef(void 0),l=Ke(),g=be()?.planType??"unknown",x="create_gpt",u=()=>{r||(D.logPopoverHover({location:he,type:x,plan_type:g}),clearTimeout(a.current),o(!0))},h=()=>{r||(a.current=l(function(){o(!1)},300))},y=ce(),S=()=>{D.logUpsellGetPlusButtonClicked({location:he,type:x,plan_type:g}),ls(y,"Gizmo Discovery page upsell")},i=r?()=>D.logEvent("Store Create Gizmo"):n=>n.preventDefault();return s.jsxs("div",{onMouseEnter:u,onMouseLeave:h,className:"screen-arch:flex screen-arch:items-center relative",children:[s.jsx(q,{color:"primary",disabled:!r,visuallyDisabled:!r,onClick:i,as:"link",to:e,icon:as,"data-testid":"create-gpt-discovery-button",children:s.jsx(N,{...I.discoveryCreateGPT})}),!r&&t&&s.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary screen-arch:top-12 absolute end-0 z-10 mt-2 w-64 rounded-lg border p-3 text-sm shadow-lg",children:[s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(N,{...I.createGPTUpsell})}),s.jsx(q,{color:"secondary",onClick:S,size:"small",children:s.jsx(N,{...I.createGPTUpsellButtonLabel})})]})]})},Ts=p.forwardRef(function({info:e,items:t,effectiveRole:o},a){return s.jsx(Pe,{title:e.title,description:e.description,ref:a,children:s.jsx(Ee,{children:t.map((l,m)=>s.jsx(Os,{resource:l,effectiveRole:o},`${m}-${l.gizmo.id}`))})})});function Os({resource:r,effectiveRole:e}){const t=r.gizmo.vanity_metrics?.num_conversations_str,o=r.gizmo.tags?.includes(Y.WorkspaceDisabled)&&e!==Q.OWNER;return s.jsx(ne,{children:s.jsxs(Me,{gizmo:r,className:W("group flex h-24 items-center gap-5 overflow-hidden rounded-xl bg-gray-50 px-7 py-8 hover:bg-gray-100 md:h-32 lg:h-36 dark:bg-gray-700 dark:hover:bg-white/10",o&&"opacity-50 hover:opacity-100"),onClick:()=>{D.logEvent("Store Click Gizmo",{gizmo_id:r.gizmo.id,section:"featured"})},children:[s.jsx(Ge,{isFirstParty:!!r.gizmo.tags?.includes(Y.FirstParty),src:r.gizmo.display.profile_picture_url??void 0,className:W("h-16 w-16 shrink-0 md:h-24 md:w-24",o&&"grayscale group-hover:grayscale-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"line-clamp-2 font-semibold md:text-lg",children:r.gizmo.display.name}),s.jsx("span",{className:"line-clamp-2 text-xs md:line-clamp-3",children:r.gizmo.display.description}),s.jsxs("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 flex justify-start gap-1 text-xs",children:[s.jsx(ze,{gizmo:r,className:"text-xs",hideLink:!0}),t&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px]",children:"•"}),s.jsx(Ne,{className:"mt-0.5 h-3 w-3"}),t]})]})]})]})})}const Ws=p.forwardRef(function({info:e,items:t,cursor:o,anon:a,effectiveRole:l,useFetchMoreQuery:m},g){const[x,u]=p.useState(t.length===0),{data:h,hasNextPage:y,fetchNextPage:S,isFetchingNextPage:i,isError:n}=m({cutId:e.id,locale:e.locale,limit:6,cursor:o,enabled:x});p.useEffect(()=>{t.length===0&&S()},[S,t.length]);const[b,w]=p.useState(h.length),f=p.useRef(null),G=Oe(.1);return p.useEffect(()=>{h.length>b&&(w(h.length),f.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},[h.length,b]),s.jsxs(Pe,{title:e.title,description:e.description,ref:g,children:[s.jsxs(Ee,{children:[t.map((k,d)=>s.jsx(xe,{resource:k,rank:d+1,cutId:e.id,effectiveRole:l},d)),h.map((k,d)=>s.jsx(xe,{resource:k,rank:t.length+d+1,cutId:e.id,delay:G(d-b,h.length-b),effectiveRole:l},d))]}),(!x||y||i||n)&&!a&&o!=null&&s.jsx(q,{color:n?"danger-outline":"secondary",onClick:()=>{u(!0),D.logEvent("Store Load More",{section:e.id}),S()},fullWidth:!0,className:"mt-2 md:mt-3",loading:i,children:n?s.jsx(N,{...I.discoveryLoadMoreError}):s.jsx(N,{...I.discoveryLoadMore})}),s.jsx("div",{ref:f})]})});function xe({resource:r,rank:e,cutId:t,delay:o,effectiveRole:a}){const l=r.gizmo.tags?.includes(Y.WorkspaceDisabled)&&a!==Q.OWNER,m=r.gizmo.tags?.includes(Y.FirstParty);return s.jsx(ne,{delay:o,children:s.jsxs(Me,{gizmo:r,className:W("group hover:bg-token-main-surface-secondary flex h-[104px] items-center gap-2.5 overflow-hidden rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",l&&"opacity-50 hover:opacity-100"),onClick:()=>{D.logEvent("Store Click Gizmo",{gizmo_id:r.gizmo.id,position:e,section:m?"first_party":t})},children:[s.jsx("div",{className:"text-md flex w-8 shrink-0 items-center justify-center font-semibold",children:e}),s.jsx(cs,{resource:r,grayedOut:l})]},r.gizmo.id)})}const Pe=p.forwardRef(function({title:e,description:t,className:o,children:a},l){return s.jsxs("div",{ref:l,className:"h-fit scroll-mt-28 last:min-h-[calc(100vh-8rem)]",children:[s.jsxs(ne,{animateTap:!1,children:[s.jsx("div",{className:"text-xl font-semibold md:text-2xl",children:e}),t&&s.jsx("div",{className:"text-token-text-tertiary text-sm md:text-base",children:t})]}),s.jsx("div",{className:W("mt-4 mb-10",o),children:a})]})}),I=ye({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryEmpty:{id:"gizmo.discovery.empty",defaultMessage:"Nothing to discover"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoveryError:{id:"gizmo.discovery.error",defaultMessage:"Error loading GPTs"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchSmall:{id:"gizmo.discovery.searchSmall",defaultMessage:"Search"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoverySearchResults:{id:"gizmo.discovery.search.results",defaultMessage:"Search Results"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"},discoveryMyGPTs:{id:"gizmo.discovery.myGPTs",defaultMessage:"My GPTs"},discoveryCreateGPT:{id:"gizmo.discovery.createGPT",defaultMessage:"Create"},discoveryThirdPartyGPTsDisabled:{id:"gizmo.discovery.thirdPartyGPTsDisabled",defaultMessage:"Your admin has blocked GPTs created outside {workspaceName}."},discoverySplashHeader:{id:"gizmo.discovery.splashHeader",defaultMessage:"GPTs"},discoverySplashDescription:{id:"gizmo.discovery.splashDescription",defaultMessage:"Discover and create custom versions of ChatGPT that combine instructions, extra knowledge, and any combination of skills."},discoveryGlobalViewOn:{id:"gizmo.discovery.globalViewOn",defaultMessage:"Global View On"},discoveryGlobalViewOff:{id:"gizmo.discovery.globalViewOff",defaultMessage:"Global View Off"},createdAgoLabel:{id:"gizmo.discovery.createdAgoLabel",defaultMessage:"Created {createdAgo}"},createGPTUpsell:{id:"gizmo.discovery.createGPTUpsell",defaultMessage:"Get ChatGPT Plus to create and share your own GPTs"},createGPTUpsellButtonLabel:{id:"gizmo.discovery.createGPTUpsellButtonLabel",defaultMessage:"Get Plus"}});export{us as G,$s as a};
//# sourceMappingURL=gy4nz3srvvh6yl8y.js.map
