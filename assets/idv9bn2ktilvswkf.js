const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bx2q0vf78biqdvdj.js","assets/khl8ktun31iepecq.js","assets/haannt40upmuwmtk.js","assets/root-eulobrch.css","assets/j8ik0voifi0k25f4.js","assets/cvxq2e4ugtgn6d3k.js","assets/n4exq6o15ap1g74l.js","assets/conversation-small-bh1estgu.css","assets/gy4nz3srvvh6yl8y.js","assets/dshcxoxawhwwl12e.js","assets/kcog7bo1l2c0hhih.js","assets/e473oe6zkw5lqbph.js","assets/m4g7yy9fehqi204r.js","assets/jjqeoesb3rhorlyg.js","assets/dfz2bdgqh4yduujb.js","assets/b3mht1lg7zv7qd3d.js","assets/bhyb726ag806fsya.js","assets/cmnfbk2gsf7cr678.js","assets/nxqi3o7k1bh9p9cn.js","assets/h8re7wo6sx6nawbp.js","assets/hb6q2mif3mfbjbh1.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{aj as Fe,h3 as ua,a as E,bS as ee,k as te,E as ma,cH as ue,cX as We,e_ as ga,m as ze,d7 as ha,h4 as pa,j as fa,fE as V,l as me,aA as q,bD as ge,bZ as bt,ag as St,dG as xa,aD as wt,gw as ya,C as X,h as J,as as it,at as rt,cr as Ct,aG as de,aL as Ve,cm as va,P as jt,dC as ba,R as Sa,aP as wa,ae as we,I as qe,bW as Ca,fb as Mt,co as Nt,cp as kt,ab as Ge,bL as ja,b5 as Ma,a_ as Na,bw as ka,D as lt,h5 as Ta,ah as Aa,aH as Ea,dc as Pa,eb as _a,F as Z,gU as Ia,fM as La,dD as Ra,b8 as Ha}from"./haannt40upmuwmtk.js";import{r as o,f as Tt,b as Be,j as e,a8 as Oe,M as I,e as F,d as At,p as Le,L as Da,v as Wa,R as Ga}from"./khl8ktun31iepecq.js";import{nJ as Et,gt as Pt,nK as je,gO as Oa,cb as _t,kj as It,gQ as Ua,gR as Lt,f as ct,gT as Fa,gS as za,nL as Va,kz as qa,aD as dt,as as Ba,cw as Ya,cx as $a,nM as Qa,nN as ut,ip as Ka,aE as Xa,aq as Ja,cy as Za,nO as es,t as Ue,cz as ts,P as Rt,F as as,lq as Ye,nP as Ht,nQ as mt,nR as ss,nS as Dt,f4 as $e,nT as Wt,nU as Gt,nV as Ot,mz as Ut,nW as Ft,nX as ae,nY as gt,nZ as ns,mu as P,n_ as ht,ki as os,n$ as zt,o0 as is,o1 as rs,o2 as ls,o3 as cs,o4 as ds,o5 as us,o6 as Qe,my as Vt,o7 as ms,o8 as gs,bb as hs,bm as qt,e$ as ps,eJ as fs,a5 as Ce,aG as xs,o9 as ys,oa as vs,ob as bs,oc as pt,od as Ss,oe as ws,of as Cs,og as js,hJ as Ms,cj as Ns,oh as ks,oi as k,W as R,kE as Ts,oj as As,kD as Es,bN as Ps,c4 as _s,ok as Is,de as ft,d as Ls,m8 as Rs,ol as Hs,om as Ds,e_ as Bt,dW as Ws,G as Ke,u as Gs,ne as Yt,ac as Os,on as Us,x as Fs,oo as zs,af as Vs,op as qs,f7 as Bs,oq as Ys,gu as $s,or as Qs,ak as Ks,al as xt,fR as Xs,I as Js,ah as Zs,os as en,ce as tn,ht as an,ae as sn,nA as nn,ot as Re,ou as on,ov as rn,eD as ln,ow as cn,i6 as $t,ox as dn,oy as un,ja as mn,ef as gn,oz as hn,oA as pn,oB as fn,oC as xn,oD as yn,aj as vn,oE as bn,oF as Sn,oG as wn,oH as Cn,oI as jn,oJ as Mn,oK as Nn}from"./n4exq6o15ap1g74l.js";import{C as Xe,e as Je,b as se,P as kn}from"./jjqeoesb3rhorlyg.js";import{d as Qt,L as Tn,C as An,e as En}from"./e473oe6zkw5lqbph.js";import{u as Pn,b as _n}from"./i7mohl0pdm5438yu.js";import{c as In,a as Ln,M as Rn,F as Hn,T as Dn}from"./opqccoi9jnqsmzvy.js";import{S as Wn}from"./brlfaqq2l0eg9ucx.js";import{T as Gn}from"./jn7l19yr8qucsihu.js";import"./l6prrb6nf9agh4ql.js";const On=({assetPointer:t,isInFocusMode$:a,serverThreadId:s,transformationId:i,width:n,height:r,onEdit:c})=>{const d=Et(),[l,m]=o.useState(!1),[x]=Fe(s,f=>[f?.modelId]),u=Pt(s),g=je(),v=Tt(),C=Be(),M=o.useRef(null);o.useEffect(()=>{In.prefetch()},[]),o.useEffect(()=>{m(!1),a?.set(!1)},[t,a]),o.useEffect(()=>ua(()=>{a&&!a()&&m(!1)}),[a]),Oa(o.useMemo(()=>({image:{asset_pointer:t,metadata:{dalle:{gen_id:i},generation:{gen_id:i}},height:r,width:n},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[i,t,r,n]));const S=f=>{g.transitionToPage({type:"conversation",value:void 0},()=>{c?.(),qa(v,C,s,void 0,!0),u(f)})},y=_t();return e.jsx(It,{children:e.jsx(Oe.div,{layout:!d,transition:{type:"spring",duration:.2},className:E(l?"w-full rounded-3xl":"mx-auto rounded-full"),children:l?e.jsx(Ua,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:e.jsx(Xe,{clientThreadId:s,children:e.jsx(Ln,{clientThreadId:s,currentModelId:x??Lt(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async f=>{a?.set(!1),ee(te(),"chatgpt_web_image_library_lightbox_image_edit_submitted"),ma(s)==null&&await(M.current??ct(s,!0)),S(await Fa(f))},onContinueGenerating:f=>S(za(f)),hideHeader:!0,isNewThread:!1})})}):e.jsx(ue,{color:"secondary",size:y?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{ee(te(),"chatgpt_web_image_library_lightbox_image_composer_opened"),m(!0),a?.set(!0),M.current=ct(s,!0).finally(()=>{M.current=null})},icon:y?void 0:Va,children:e.jsx(Oe.div,{initial:d?!1:{opacity:0},animate:{opacity:1},children:e.jsx(I,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},Un=({assetPointer:t,serverThreadId:a,messageId:s})=>{const i=F(),[n,r]=o.useState(!1),c=Pn({assetPointer:t,clientThreadId:a,messageId:s}),d=o.useCallback(async()=>{r(!0);try{await c()}finally{r(!1)}ee(te(),"chatgpt_web_image_library_lightbox_image_share_clicked")},[c]),l=i.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"max-md:hidden",color:"secondary",icon:n?We:dt,onClick:d,disabled:n,children:l}),e.jsx(ue,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:n?We:dt,size:"xl",onClick:d,label:l,disabled:n})]})},Fn=({images:t,initialIndex:a,onScrollToEnd:s,onClose:i})=>{const n=F(),r=Ba(),[c]=o.useState(()=>ga(!1));return e.jsxs(Ya,{imageList:t,initialIndex:a??0,onClose:i,isInFocusMode$:c,onScrollToEnd:s,children:[e.jsx($a,{children:({title:d,createdAt:l})=>e.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[e.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:e.jsx("span",{className:"line-clamp-2",children:d??e.jsx(I,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),l&&e.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:l.toDateString()})]})}),e.jsxs(Qa,{children:[e.jsx(ut,{children:({url:d,title:l})=>e.jsx(Ka,{className:"aspect-square",icon:Xa,onClick:()=>{ee(te(),"chatgpt_web_image_library_lightbox_image_download_clicked"),Ja({url:d,fileName:`${l??n.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":n.formatMessage(zn.download)})}),r()&&e.jsx(ut,{children:({assetPointer:d,conversationId:l,messageId:m})=>!l||!m?null:e.jsx(Un,{assetPointer:d,serverThreadId:l,messageId:m})})]}),e.jsx(Za,{children:({url:d,width:l,height:m,title:x,position:u})=>e.jsx("img",{className:es("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",u==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:u&&u!=="current"?{viewTransitionName:`var(--vt-image-${u})`}:void 0,src:Ue(d),width:l,tabIndex:0,height:m,alt:x??""})}),e.jsx(ts,{children:({width:d,height:l,assetPointer:m,conversationId:x,transformationId:u})=>x&&m&&e.jsx(On,{isInFocusMode$:c,onEdit:()=>i(null),width:d,height:l,assetPointer:m,serverThreadId:x,transformationId:u})})]})},zn=At({download:{id:"1EzE2f",defaultMessage:"Save"}}),Kt=({disableEntryAnimation:t=!1,hasMoreImages:a,count:s,images:i,isFetchingMore:n,onScrollToEnd:r})=>{const c=a?Math.max((s??0)-(i.length??0),0):0,[d,l]=o.useState(!1),[m,x]=o.useState(null),u=je(),g=ze(),{clientThreadId:v}=Je(),C=o.useCallback(M=>{ee(te(),"chatgpt_web_image_library_lightbox_opened"),l(!0),x(M),u.transitionToPage({type:"lightbox",value:void 0},()=>{ha(g,({closeModal:S})=>e.jsx(Rt,{clientThreadId:v,children:e.jsx(as,{children:e.jsx(Ye,{children:e.jsx(Fn,{onClose:y=>{if(y==null){S();return}Ht({update:()=>{S(),x(y),l(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>l(!1))},images:i,initialIndex:M,onScrollToEnd:r})})})})),l(!1)})},[v,g,i,r,u]);return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-4 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4",children:i.map(({url:M,thumbnail:S,width:y,height:f,title:p=null},h)=>e.jsx(mt,{disableEntryAnimation:t,index:h,active:d&&m===h,src:Ue(M),onClick:C,thumbnail:Ue(S),width:y,height:f,alt:p,children:h===i.length-1&&e.jsx(ss,{onScrollToEnd:r})},h)).concat(new Array(c).fill(null).map((M,S)=>{const y=i.length+S;return e.jsx(mt,{index:y,disableEntryAnimation:t,isPlaceholder:!0,active:!1},y)}))}),e.jsx("div",{className:"flex h-8 items-center justify-center",children:a&&n&&e.jsx(We,{})})]})};function Vn({isMobile:t=!1}){const s=F().formatMessage({id:"vMAtK7",defaultMessage:"Create image"}),i=Dt();return e.jsxs("header",{"data-landing-page-load-target":!0,className:E("flex w-full items-center justify-between",t&&"px-2",!t&&"h-header-height bg-token-main-surface-primary sticky top-0 z-20 px-3 py-3 max-md:hidden"),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qt,{clientThreadId:pa}),e.jsx("h1",{className:"text-token-text-secondary text-lg font-semibold tracking-[-0.28px] [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:px-3.5",children:e.jsx(I,{id:"Az9rja",defaultMessage:"My Library"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ue,{type:"button",color:"ghost",className:"border-token-border-default border max-md:aspect-square max-md:w-10",onClick:i,children:[e.jsx($e,{"aria-label":"",className:"icon-md max-md:icon-sm"}),e.jsx("span",{className:"max-md:sr-only",children:s})]}),e.jsx(Tn,{})]})]})}function No(){const{images:t,hasNextPage:a,isLoading:s,isFetchingNextPage:i,fetchNextPage:n}=Wt(),{data:r,isLoading:c}=Gt(),d=ze(),l=fa(d).checkGate("2980121290"),m=Dt();if(o.useEffect(()=>{ee(te(),"chatgpt_web_image_library_page_viewed")},[]),!l)return null;const x=r?.images_count??0,u=!c&&!x;return e.jsxs("div",{className:"flex w-full flex-1 flex-col items-center gap-4 justify-self-center",children:[e.jsx(Vn,{}),e.jsxs("div",{className:E("w-full max-w-3xl px-8 max-md:px-0 md:mt-10",u?"pt-8":"max-md:pt-0"),children:[u&&e.jsx(Ot,{borderless:!0,onClick:m}),!u&&e.jsx(Ye,{children:e.jsx(Xt,{images:t,hasMoreImages:a,isLoading:s,isFetching:i,fetchNextPage:n,imageCount:x,disableEntryAnimation:!0})})]})]})}function Xt({images:t,disableEntryAnimation:a=!1,hasMoreImages:s,isLoading:i,isFetching:n,fetchNextPage:r,imageCount:c}){return e.jsx(Kt,{disableEntryAnimation:a,count:c,images:t,hasMoreImages:s,isFetchingMore:n||i,onScrollToEnd:r})}function qn({clientThreadId:t,mobile:a}){const s=se(),[i,n]=o.useState(),r=_t(),{updateSystemHint:c}=Ut(),{transitionToNextPage:d}=Ft(),l=ae(),m=V(l.isImageGenLandingPageEnabled$),x=V(l.isAllPagesEnabled$),u=gt.useState(({persistedSystemHints:y})=>y),g=gt.useState(({availableHints:y})=>y);if(r&&!a)return null;const v=Array.from(u)[0],C=[],M=a?cs:ds;m&&!x?C.push(ns[P.PictureV2]):x&&C.push(...M);const S=y=>{c(y,{clientThreadId:t}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s?.focus()})})};return e.jsx("div",{className:ht.vanguardAppLaunchersContainer,children:e.jsx(os,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:e.jsx("ol",{className:E("start-0 end-0 flex w-full justify-center gap-10 select-none md:absolute md:mt-12",ht.vanguardAppLaunchers),children:C.map(y=>{const f=g.find(h=>h.systemHint===y.systemHint),p=f?.systemHint||y.systemHint;return e.jsxs("li",{children:[e.jsx(zt,{className:"py-4",systemHint:p,onClick:()=>{if(f?.isPopulatedByDefault){n(p);return}v===p?S(null):is(p)?(s.setAutocompletions([]),d({path:rs(p),nextPageType:{type:"landing-page",value:p}})):S(p)},isSelected:v===p}),p===i&&e.jsx(ls,{open:!0,systemHint:p,onOpenChange:()=>n(void 0)})]},p)})})})})}function Bn(t){const{clientThreadId:a}=t;return e.jsx(Xe,{clientThreadId:a,children:e.jsx($n,{...t})})}function Yn({clientThreadId:t,headlineOption:a,currentModelId:s,isModelLoaded:i,overrideMessage:n}){const r=Qe(),{getAndroidKeyboardLayout:c}=hs(),d=se(),{isFocused:l,autocompletions:m}=wt(d.store),x=l&&m.length>0,u=ae(),g=V(u.isImageGenLandingPageEnabled$);return e.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:x?0:1},exit:{opacity:0},transition:{duration:.1},className:E("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",c()?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",x?"pointer-events-none":"",r?"@lg/thread:hidden":"lg:hidden"),children:[a==="CHATGPT_LOGO"?e.jsx(bt,{className:"inline-block h-12 w-12"}):e.jsx(Jt,{headlineOption:a,overrideMessage:n}),!g&&e.jsx(Rn,{isModelLoaded:i,currentModelId:s,clientThreadId:t}),e.jsx(qn,{clientThreadId:t,mobile:!0})]})}function $n({clientThreadId:t,currentModelId:a,isModelLoaded:s}){const i=se(),{isUnauthenticated:n}=me();us(i);const{layer:r}=q("4031588851"),{layer:c}=q("3533083032",{shouldLogExposure:!1}),d=n?c:r,l=Qe(),{isUXUpdatesEnabled:m}=ge(),x=m?"HOW_CAN_I_HELP":d.get("headline_option","HELP_WITH"),u=Vt(),g=u.has(P.Research),v=ms(Array.from(u)[0]),C=m&&v?v:g?A.deepResearchPlaceholder:void 0;return e.jsxs("div",{className:E("flex grow items-center justify-center",l?"@lg/thread:items-end":"lg:items-end"),children:[e.jsx("div",{className:E("hidden text-center @lg/thread:block","mb-5",m&&"max-md:mt-[-80px] md:-mt-48",l?"@lg/thread:block":"lg:block"),children:x==="CHATGPT_LOGO"?e.jsx(bt,{className:"inline-block h-12 w-12"}):e.jsx(Jt,{headlineOption:x,overrideMessage:C})}),e.jsx(Yn,{headlineOption:x,overrideMessage:m?C:void 0,clientThreadId:t,isModelLoaded:s,currentModelId:a})]})}function Qn({headlineOption:t,overrideMessage:a}){function s({name:f}){return e.jsx(Ct,{label:r.formatMessage(A.editNicknameTooltip),delayDuration:300,side:"top",sideOffset:0,children:e.jsx("button",{onClick:()=>{Ce.setAutoHighlightNicknameInput(!0),Ce.openModal(xs.UserContext)},style:{textDecoration:"none",transition:"color 0.2s",lineHeight:"42px"},onMouseEnter:p=>{p.currentTarget.className="text-token-text-secondary"},onMouseLeave:p=>{p.currentTarget.className="text-inherit"},children:f})})}function i(){const f=[],p=[];f.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),p.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...f);const h=p[Math.floor(Math.random()*p.length)],_=`${f[Math.floor(Math.random()*f.length)]} | ${h}`;X.setCookie(J.headlineMessage,_)}function n(){const f=X.getCookie(J.GreetingName),h=X.getCookie(J.headlineMessage)?.split("|"),T=h?.[0]?.trim(),_=h?.[1]?.trim();return{cookieName:f,isReadyForPersonalized:!!f&&f.length<=d,headline:T,namedHeadline:_}}const r=F(),{layer:c}=q("1704793646"),d=c.get("name_char_limit",20),[l,m]=o.useState(n),{isUnauthenticated:x}=me(),u=qt(),v=ps(!x&&!!u)?.data,C=fs(),M=c.get("greeting_web",!1),S=c.get("full_name_llm",!1);o.useEffect(()=>{if(M&&C){if(u&&v){const f=ya(v,u,S);X.setCookie(J.GreetingName,f),it.count(rt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}i()}else X.deleteCookie(J.GreetingName),X.deleteCookie(J.headlineMessage)},[v,u,M,S,C]),o.useEffect(()=>{const f=()=>{if(M&&C){const{cookieName:p,isReadyForPersonalized:h}=n();m(T=>({...T,cookieName:p,isReadyForPersonalized:h}))}};return window.addEventListener("refreshGreeting",f),()=>window.removeEventListener("refreshGreeting",f)}),o.useEffect(()=>{M&&C&&it.count(rt.MOONSHINE,"splashScreenV2.greeting_shown_web")},[M,C]);let y;return a?y=r.formatMessage(a):l.isReadyForPersonalized&&M?y=e.jsx(e.Fragment,{children:e.jsx(I,{...He[l.namedHeadline??t].withName,values:{name:e.jsx(s,{name:l.cookieName??""},"name")}})}):M?y=r.formatMessage(He[l.headline??t].original):y=r.formatMessage(He[t].original),y}function Jt({headlineOption:t,overrideMessage:a}){const s=St(),i=o.useRef(null),[n,r]=o.useState({isTempChatVisible:s,titleTranslate:0});xa(()=>{r({isTempChatVisible:s,titleTranslate:s?-((i.current?.offsetHeight??0)+20):0})},[s]);const{isUXUpdatesEnabled:c}=ge();return e.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:e.jsx("div",{children:e.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:{viewTransitionName:"var(--vt-splash-screen-headline)"},children:[e.jsx("h1",{className:E("motion-safe:[transition:0.3s_transform_var(--spring-standard),0.5s_opacity_var(--spring-standard),0.5s_visibility_var(--spring-standard)]",!c&&"text-[28px] leading-[34px] font-semibold tracking-[0.38px]",n.isTempChatVisible?"invisible opacity-0":"opacity-100",c&&"text-[28px] leading-[50px] font-medium tracking-[-0.42px] sm:text-[40px] md:-mt-16"),"aria-hidden":s,style:{transform:`translateY(${n.titleTranslate}px)`},children:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsx(Qn,{headlineOption:t,overrideMessage:a})})}),e.jsx("div",{className:E("absolute bottom-0 motion-safe:[transition:0.3s_transform_var(--spring-standard),0.5s_opacity_var(--spring-standard),0.5s_visibility_var(--spring-standard)]",n.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-full opacity-0"),"aria-hidden":!s,ref:i,children:e.jsx(gs,{})})]})})})}const A=At({whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"}}),He={HELP_WITH:{original:A.whatCanIHelpWith,withName:A.whatCanIHelpWithWithName},WHERE_TO_START:{original:A.whereShouldWeStart,withName:A.whereShouldWeStartWithName},ASK_CHATGPT:{original:A.askChatgptAnything,withName:A.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:A.howCanIHelp,withName:A.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:A.goodToSeeYouWithName,withName:A.goodToSeeYouWithName},DIVE_IN:{original:A.diveInWithName,withName:A.diveInWithName},READY_WHEN_YOU_ARE:{original:A.readyWhenYouAre,withName:A.readyWhenYouAre},ON_YOUR_MIND:{original:A.onYourMind,withName:A.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:A.whatAreYouWorkingOn,withName:A.whatAreYouWorkingOn},AGENDA_TODAY:{original:A.agendaToday,withName:A.agendaToday},SHOULD_WE_BEGIN:{original:A.shouldWeBegin,withName:A.shouldWeBegin}};function Kn({onClick:t}){return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("button",{onClick:t,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:e.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:e.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[e.jsx(Ss,{"aria-label":"",className:"h-12 w-12"}),e.jsx($e,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),e.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:e.jsx(I,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function yt({card:t,className:a,label:s}){const{formatMessage:i}=F();return typeof t.url=="string"?e.jsx("img",{src:t.url,alt:i(t.prompt),className:a}):e.jsxs("picture",{className:a,children:[t.url.map(({type:n,url:r})=>n==="jpg"?null:e.jsx("source",{srcSet:r,type:`image/${n}`},r)),e.jsx("img",{"aria-label":s,src:t.url[0].url,alt:i(t.prompt),className:E(a,"h-full w-full object-cover")})]})}function Xn({type:t,images:a,onClick:s}){const[i,n]=o.useState(0),{formatMessage:r}=F(),c=i+1>=a.length?0:i+1,d=a[i].prompt;return e.jsxs("div",{children:[e.jsxs("div",{className:"group/stack relative flex justify-center",children:[e.jsx("div",{onClick:()=>{const l=i+1>=a.length?0:i+1;n(l)},className:E("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",a.length>1&&"cursor-pointer"),children:e.jsx(yt,{card:a[i],label:r(d)})},i),e.jsx("div",{className:E("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:e.jsx(yt,{card:a[c],label:r(d),className:E(ws.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},c),e.jsx("button",{id:r(d),onClick:()=>s(r(d)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:e.jsx(I,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),t&&e.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:r(t)})]})}function Jn({onCardClick:t,onUploadCardClick:a}){const{value:s}=de("2640502720"),i=F(),r=Ve()?.isWorkspacePlan()?ys:vs,c=ae(),{images:d,hasNextPage:l,isLoading:m,isFetchingNextPage:x,fetchNextPage:u}=Wt(),{data:g,isLoading:v}=Gt(),{data:C,hasNextPage:M,isFetchingNextPage:S,fetchNextPage:y}=bs({isEnabled:s}),f=se(),[p,h]=o.useState("recents"),T=g?.images_count,_=!!T,H=!T&&!v;o.useEffect(()=>{!_&&!m&&s&&h("gallery")},[_,m,s]);const D=Le({id:"Gd9T7H",defaultMessage:"My Library"});return e.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[e.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[e.jsx(Kn,{onClick:a}),r.map(L=>e.jsx(Xn,{type:L.type,images:L.images,onClick:G=>{t(G),L.needsUpload&&c.showUploadSuggestion$.set(!0)}},String(L.type.defaultMessage)))]}),e.jsx("div",{className:E("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",s&&"sticky top-[9px]"),children:s?e.jsx(Wn,{className:"mx-auto",ariaLabel:Le({id:"p5qePD",defaultMessage:"Image gallery mode"}),leftItem:{label:D,value:"recents"},rightItem:{label:Le({id:"36pX0T",defaultMessage:"Explore"}),value:"gallery"},value:p,onChange:h}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg font-medium",children:e.jsx(I,{...D})}),_&&e.jsx("span",{className:"text-token-text-tertiary text-sm",children:e.jsx(I,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:T}})})]})}),!H&&e.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),H&&e.jsx(Ot,{onClick:()=>{const L=pt(r),G=pt(L?.images??[]);G&&t(i.formatMessage(G.prompt)),f.focus()}}),!H&&e.jsxs("div",{className:"min-h-svh w-full max-md:px-4",children:[p==="gallery"&&s&&e.jsx(Kt,{count:null,images:C??[],hasMoreImages:M,isFetchingMore:S,onScrollToEnd:y}),p==="recents"&&e.jsx(Xt,{images:d??[],hasMoreImages:l,isLoading:m,isFetching:x,fetchNextPage:u,imageCount:T??0})]})]})}const Zn=({systemHint:t})=>{const{updateSystemHint:a}=Ut(),s=je(),{transitionToNextPage:i}=Ft(),{clientThreadId:n}=Je();o.useEffect(()=>{s.activeViewTransition&&s.signalTransitionReady()},[s]),o.useEffect(()=>{a(t,{clientThreadId:n})},[t,n,a]);let r=null;switch(t){case P.Canvas:r=e.jsx(I,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case P.PictureV2:r=e.jsx(I,{id:"QtMyOg",defaultMessage:"Make an image"});break;case P.Research:r=e.jsx(I,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:r=e.jsx(I,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return e.jsx(Cs,{children:e.jsxs(js,{className:"mt-[100px] flex flex-col items-center gap-6",children:[e.jsx(zt,{isBadge:!0,isLauncher:!1,systemHint:t,label:null}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:r}),e.jsxs(Da,{to:"/",viewTransition:!0,onClick:c=>{c.preventDefault(),i({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{a(null,{clientThreadId:n})}})},className:"group text-token-text-tertiary flex items-center gap-1 text-sm",children:[e.jsx(Ms,{className:"h-4 w-4",style:{display:"var(--is-ltr, block) var(--is-rtl, none)"}}),e.jsx(va,{className:"h-4 w-4",style:{display:"var(--is-ltr, none) var(--is-rtl, block)"}}),e.jsx("div",{className:"group-hover:underline",children:e.jsx(I,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},eo=({systemHint:t})=>{const a=se(),s=ae(),i=o.useCallback(g=>{a.setText(g),a.focus()},[a]);o.useEffect(()=>()=>{s.reset()},[s]);const n=o.useCallback(()=>{jt.logEvent("Open File Viewer",{intent:Ns.Multimodal.toString()}),a.openFileDialog()},[a]),{isImageGenLandingPageEnabled$:r,isAllPagesEnabled$:c}=ae(),d=V(r),l=V(c),x=t===P.PictureV2&&d;if(!l&&!x)return null;let u=null;switch(t){case P.Canvas:u=!1;break;case P.PictureV2:u=e.jsx(Jn,{onCardClick:i,onUploadCardClick:n});break;case P.Research:u=!1;break;default:u=e.jsx(I,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:t}})}return u},to=4,ao=3,so=async({text:t,numCompletions:a,isUnauthenticated:s,isThreadUsingSearchMode:i=!1,autocompleteMode:n,activeSystemHint:r})=>{try{return(s?await we.generateAutocompletionsAnon(t,a,i,r):await we.generateAutocompletions(t,a,i,r)).completions.map(d=>({id:Wa(),type:R.Autocomplete,title:d.slice(0,t.length),body:d.slice(t.length),oneliner:d,prompt:d,source:n}))}catch{return[]}},no=({clientThreadId:t,composerController:a})=>{const s=wt(a.store,j=>j.showTaggingDropdown),i=Vt(),n=Array.from(i)[0],r=o.useRef(void 0),[c,d]=o.useState([]);o.useState([]),o.useRef(0);const{isUXUpdatesEnabled:l}=ge(),m=l?ao:to,[x,u]=o.useState(),g=o.useCallback(j=>{d(w=>{const b=typeof j=="function"?j(w):j;return ba(b,w)?w:b})},[]),{trendingSuggestions:v,fetchTrendingSuggestions:C}=oo(m),{isUnauthenticated:M}=me(),S=ks(),y=o.useCallback(j=>{const w=a.getCurrentText();return w&&De(j).startsWith(w.toLocaleLowerCase())},[a]),f=o.useCallback(j=>{const w=a.getCurrentText(),b=j.title+j.body;return y(j)?{...j,title:w,body:b.slice(w.length)}:{...j,title:b,body:""}},[a,y]),p=o.useCallback((j=!1)=>{g(w=>!w.some(y)&&w.length>0?[]:j?w:w.map(f))},[y,f,g]),h=F(),T=o.useMemo(()=>({[k.Canvas]:[{type:R.Starter,title:h.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:h.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:k.Canvas},{type:R.Starter,title:h.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:h.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:k.Canvas},{type:R.Starter,title:h.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:h.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:k.Canvas},{type:R.Starter,title:h.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:h.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:k.Canvas}],[k.Image]:[{type:R.Starter,title:h.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:h.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:k.Image},{type:R.Starter,title:h.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:h.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:k.Image},{type:R.Starter,title:h.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:h.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:k.Image},{type:R.Starter,title:h.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:h.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:k.Image}],[k.ContextualAnswers]:[{type:R.Starter,title:h.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:h.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:e.jsx(Ts,{className:"h-full w-full"}),body:"",theme:k.ContextualAnswers},{type:R.Starter,title:h.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:h.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:e.jsx(As,{className:"h-full w-full"}),body:"",theme:k.ContextualAnswers},{type:R.Starter,title:h.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:h.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:e.jsx(Es,{className:"h-full w-full"}),body:"",theme:k.ContextualAnswers},{type:R.Starter,title:h.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:h.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:e.jsx(Ps,{className:"h-full w-full"}),body:"",theme:k.ContextualAnswers}]}),[h]),_=!!_s(),H=Is({exposed:_})==="autocomplete";o.useEffect(()=>{l||!_||!a.isEmpty()||!H||![void 0,P.ContextualAnswers].includes(n)||g(j=>j.length>0?j:T[k.ContextualAnswers].slice(0,m))},[T,a,_,l,m,g,H,n]),o.useEffect(()=>{if(l)return;const j=c.some(w=>w.theme===k.Search);S&&a.getCurrentText()===""?v.length>0?g(v):C():j&&!S&&g(w=>w.filter(b=>b.theme!==k.Search))},[c,a,C,S,g,v,l]),o.useEffect(()=>{S&&a.getCurrentText()===""&&v.length>0&&ft(v,t)},[S,a,v,t]);const D=m-c.filter(y).length,L=ro(S),{layer:G}=q("4031588851"),B=G.get("autocomplete_min_char",4),he=G.get("autocomplete_fetch_interval",200),Y=o.useRef(null),O=o.useCallback(Ls(async j=>{const w=a.getCurrentText();if(!w||w.length<B||w.length>80||a.hasMultipleLines()){g([]);return}if(!s&&!(Y.current&&Y.current.length>B&&w.startsWith(Y.current)))try{const b=(await so({text:w,numCompletions:j,isUnauthenticated:M,isThreadUsingSearchMode:S,autocompleteMode:L,activeSystemHint:n})).filter(y).map(f);g(U=>{const ye=U.filter(y),Me=b.filter($=>{const Q=De($);return!ye.some(Ne=>{const z=De(Ne);if(Q===z)return!0;const ie=/[\p{P}\p{S}]$/u,re=Q.replace(ie,""),K=z.replace(ie,"");return re===z||Q===K||re===K})}).slice(0,m-ye.length);return[...ye,...Me]}),b.length>0&&ft(b,t)}catch{}},L==="BING"?150:he),[a,L,f,he,n]);o.useEffect(()=>{const j=r.current!==n;if(!l||!j)return;r.current=n;let w;if(a.getCurrentText()==="")if(g(b=>b.filter(U=>U.theme!==k.Search&&U.theme!==k.Canvas&&U.theme!==k.Image)),n===P.Search)if(v.length>0)g(v);else{w=new AbortController;const{signal:b}=w;C().then(U=>{b.aborted||g(U)})}else n===P.Canvas?g(T[k.Canvas].slice(0,m)):n===P.Picture||n===P.PictureV2?g(T[k.Image].slice(0,m)):n===P.ContextualAnswers&&_&&H&&g(T[k.ContextualAnswers].slice(0,m));else g([]),a.getCurrentText().length>B&&O(m);return()=>{w?.abort()}},[v,C,a,g,n,m,l,T,B,O,_,H]),Rs(j=>j.files);const ne=n===P.Research&&!1,pe=o.useCallback(()=>{p(),D>0&&O(D)},[O,p,D]);o.useEffect(()=>{s&&g([])},[s,g]);const fe=o.useMemo(()=>L==="HARDCODED"?p:pe,[L,pe,p]),xe=!1,oe=o.useCallback(()=>{fe()},[fe,xe,ne,g]),W=o.useCallback(()=>{a instanceof kn&&p(!0),a.getCurrentText().indexOf(`
`)>0&&(g([]),u(void 0))},[a,g,p,xe,ne]);return o.useEffect(()=>a.subscribe("input",()=>{oe()}),[a,oe]),o.useEffect(()=>a.subscribe("change",()=>{W()}),[a,W]),{autocompletions:c,matchaData:x}},oo=t=>{const[a,s]=o.useState([]),i=o.useCallback(async()=>{const r=(await Sa.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:t},authOption:wa.SendIfAvailable})).suggestions.map((c,d)=>({type:R.Trending,title:vt(c),body:"",icon:e.jsx(Hs,{className:"h-full w-full"}),prompt:vt(c),id:`search-trending-${d}`,theme:k.Search}));return s(r),r},[t]);return{trendingSuggestions:a,fetchTrendingSuggestions:i}};function vt(t){return t.split(" ").map(Ds).join(" ")}const De=t=>`${t.title}${t.body}`.toLocaleLowerCase();function io(){const{layer:t}=q("4031588851",{shouldLogExposure:!1}),a=t.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),s=qt();return!!s&&s.created*1e3>=new Date(a).getTime()}function ro(t){const{isUnauthenticated:a}=me(),s=de("1468311859").value,i=de("2053937752").value,n=de("3664702598").value,r=de("471233253").value,{layer:c}=q("4031588851"),{layer:d}=q("3533083032"),l=io(),m=!a&&s||a&&i,x=(!a&&n||a&&r)&&l;let u="HARDCODED";{const g=a?d:c;if(t){const v=g.get("search_autocomplete_mode","");m&&v&&(u=v)}else x&&(u=g.get("autocomplete_mode","HARDCODED"))}return u}const lo=({clientThreadId:t})=>{const a=se(),{autocompletions:s,matchaData:i}=no({clientThreadId:t,composerController:a});return o.useEffect(()=>(a.store.setState({autocompletions:s,matchaData:i}),()=>{a.store.setState({autocompletions:[],matchaData:void 0})}),[s,a,i]),null},co=({clientThreadId:t})=>{const a=Bt(u=>u.activeStageSidebar),s=qe(t),i=Ws(Ca.WorkspaceShareLinks),{isUnauthenticated:n}=me(),r=St(),c=Mt(t),d=Ke(c),l=Gs(),m=i&&s&&!n&&!r&&!d&&!l,x=!a;return e.jsx("div",{className:"flex items-center gap-2 pe-1 leading-[0]",id:"conversation-header-actions",children:e.jsx(An,{showShareButton:m,showProfileDropdown:x,clientThreadId:t})})},uo=Nt(()=>kt(()=>import("./bx2q0vf78biqdvdj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(t=>t.GizmoUsingAsOwnerNotice));function mo({clientThreadId:t,transparentBackground:a,isEmptyState:s}){const{isNewScrollEnabled:i}=Yt(),n=Mt(t),r=Ke(n),c=Os(),d=Us(),{data:l}=Fs(n),m=Ve(),x=zs(),u=Vs(),g=F(),{isUXUpdatesEnabled:v,showLegacyReasoningSlider:C,showReasoningSliderNux:M}=ge(),S=Ge(t),y=Bt(T=>T.isConversationScrolledFromTop),f=ja(),p=!v&&!C||!!n&&(!r||!S)||x;if(c)return null;const h=p?e.jsx(e.Fragment,{children:u&&(r||!n)?e.jsx(Ks,{children:e.jsx(xt,{clientThreadId:t})}):e.jsx(xt,{clientThreadId:t})}):e.jsx(Ct,{side:"bottom",theme:f?"default":"white",label:C&&!M?null:e.jsxs("div",{className:"flex h-full w-full flex-col overflow-hidden px-4 py-3",children:[e.jsx("div",{className:"flex w-full justify-center py-2",children:e.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary flex w-56 flex-col gap-2 rounded-xl border p-2 pt-1.5 shadow-lg",children:[e.jsx("div",{className:"text-token-text-tertiary flex w-full text-start text-[11px] font-normal tracking-tight",children:g.formatMessage({id:"kvZYws",defaultMessage:"Ask anything"})}),e.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[v?e.jsx(qs,{className:"text-token-text-primary h-3 w-3 opacity-40"}):e.jsx($e,{className:"text-token-text-primary h-3 w-3 opacity-40"}),v?null:e.jsx(Bs,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsxs("div",{className:"relative h-3 w-3",children:[e.jsx(Ys,{className:"text-token-text-primary h-3 w-3"}),e.jsx("div",{className:"absolute start-0 top-0 h-full w-full scale-200 animate-ping rounded-full bg-blue-400/50 duration-1000"})]}),e.jsx("div",{className:"flex-auto"}),e.jsx("div",{className:"bg-token-main-surface-primary rounded-full p-[1px] opacity-20 invert",children:e.jsx($s,{className:"text-token-text-primary h-3 w-3"})})]})]})}),e.jsxs("div",{className:"text-token-text-primary mt-4 flex max-w-80 flex-col gap-1",children:[e.jsx("div",{className:"font-semibold",children:g.formatMessage({id:"ZQnsFt",defaultMessage:"The model picker has moved"})}),e.jsx("div",{className:"text-xs font-normal opacity-75",children:g.formatMessage({id:"EyZkkB",defaultMessage:"Adjust thinking or choose a model here"})})]})]}),onOpenChange:T=>{T&&jt.logEvent("Model Switcher Moved Tooltip Hover",{location:"thread_header"})},delayDuration:0,ignoreTriggerOnOutsideClick:!0,interactive:!0,children:e.jsx("div",{className:"text-token-text-secondary px-0.5 text-xl",children:Qs})});return e.jsxs(e.Fragment,{children:[e.jsxs(Xs,{id:"page-header",className:E("pointer-events-none [view-transition-name:var(--vt-page-header)] select-none *:pointer-events-auto motion-safe:transition max-md:hidden",s&&"absolute start-0 end-0",!n&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:bg-transparent @[84rem]/thread:shadow-none!",a&&"bg-transparent",!i&&y?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",i&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]"),children:[e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[l!=null&&m?.isWorkspaceAccount()&&l.gizmo.tags?.includes(Js.WorkspaceDisabled)&&e.jsx(uo,{gizmo:l}),e.jsx(Zs,{gizmoId:n,clientThreadId:t})]}),e.jsxs("div",{className:"flex items-center gap-0 overflow-hidden",children:[e.jsx(Qt,{clientThreadId:t}),h]}),e.jsx(co,{clientThreadId:t})]}),d&&e.jsx(en,{})]})}const go=Nt(()=>kt(()=>import("./hb6q2mif3mfbjbh1.js"),__vite__mapDeps([20,1,6,2,3,7,21])));function ho({clientThreadId:t}){const a=Be(),s=qe(t),i=Fe(t,Z.getGizmoId),n=async()=>{s&&(await we.patchConversation(s,{is_archived:!1}),a.invalidateQueries({queryKey:["conversation",t]}),Ha(s,r=>{r.initialThreadData.isArchived=!1}),$t(a,i))};return e.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:e.jsx(I,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),e.jsx("div",{children:e.jsx(ue,{disabled:!s,onClick:n,icon:Cn,children:e.jsx(I,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const po=function({clientThreadId:t,getGizmosCompletionParams:a,hideDisclaimer:s,hideHeader:i,hideToolsOverlay:n,messagesVerticalAlign:r="top",renderEmptyState:c}){const d=Ma(),{isNewScrollEnabled:l,autoPinningEnabled:m}=Yt(),{data:x}=Na(),u=tn(t),g=ka(),[v,C,M,S,y,f,p,h]=Fe(t,N=>[N?.isLoading,Z.getCurrentLeafId(N),Z.hasUserMessage(N),Z.getConversationTurns(N).length,Z.getThreadData(N).isArchived,N?.modelId,N?Z.getGizmoId(N):g,N?.conversationOrigin===Ia.APPLE]),T=qe(t),_=Be(),{prefetchSearchPromises:H}=Je(),[D,L]=o.useState(H?.navlink);o.useEffect(()=>{v||(Ge(t)?lt.addTiming("chatgpt.web.chatPage.renderNewConversation"):lt.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t,v]);const{setTargetedContent:G}=an(),B=d?.includes(Ta),he=null,Y=S>=2,{pageType:O}=sn(),{isUXUpdatesEnabled:Ze}=ge(),et=ze(),ne=ae(),pe=V(ne.isImageGenLandingPageEnabled$),fe=V(ne.isAllPagesEnabled$),xe=o.useContext(Aa),oe=nn(),W=Ge(t)&&!Y&&Re(u)&&!oe&&H==null,j=!1,w=!1,b=O?.type==="landing-page"&&(fe||O.value===P.PictureV2&&pe)||!1,U=W&&!M&&(Re(u)||u?.kind===Ea.GizmoTest)&&H==null,Me=Lt(x).id,$=f??Me,Q=!!f,Ne=on(x?.models,$),z=rn(t,u),ie=ln();cn(S,t),o.useEffect(()=>{ie||G(void 0)},[t,G,ie,C]),o.useEffect(()=>{Ce.setIsConversationScrolledFromTop(!1)},[t]),o.useEffect(()=>{const N=new URLSearchParams(window.location.search),ce=N.get("src");if(ce==="history_search"){N.delete("src");const Se=N.toString(),da=`${window.location.pathname}${Se?`?${Se}`:""}${window.location.hash}`;window.history.replaceState({},document.title,da)}T&&ce==="history_search"&&we.patchConversation(T,{touch:!0}).then(()=>{$t(_,p)})},[T,p,_]);const re=Pt(t),K=o.useCallback(N=>{re(a?a(N):N)},[re,a]),ke=je(),Zt=Et(),ea=Tt(),Te=o.useRef(null);Te.current=N=>{b?ke.transitionToPage({type:"home",value:void 0},()=>{ea("/",{preventScrollReset:!0}),K(N)}):W&&!Zt&&Pa(et,"3253785454").get("should_animate_composer",!1)?Ht({className:jn["composer-slide"],update:()=>K(N)}):K(N)};const le=o.useCallback(N=>Te.current?.(N),[Te]);o.useEffect(()=>{ke.signalTransitionReady()},[ke,b,t]);const ta=dn({clientThreadId:t,handleRequestCompletion:le,prefetchSearchThreadIdPromise:H?.threadId})&&D==null,Ae=o.useRef(null),aa=N=>{if(l&&!b)return e.jsx(Mn,{allowScrollToEnd:!0,allowScrollToTop:h,clientThreadId:t,enableAutoScrollPinning:m,initScrolledToEnd:D==null,threadFooterRef:Ie,threadRootRef:tt,children:N});{const ce=e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:E("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable]"),ref:Ae,children:[e.jsx(La,{setIsScrolledToEdge:Se=>{Ce.setIsConversationScrolledFromTop(Se)},options:{root:Ae?.current}}),N]})});return D!=null?ce:e.jsx(Ra,{children:e.jsxs(o.Suspense,{fallback:null,children:[e.jsx(Nn,{}),ce]})})}},Ee=_n();o.useEffect(()=>{Ee||(document.title=z??"ChatGPT")},[z,he,Ee]);const sa=_a(xe),Pe=Ve(),na=Pe&&!Pe.isTeam()&&!Pe.isEnterprisey(),_e=!s&&!sa&&!j&&!w&&!(W&&na)&&Re(u),tt=o.useRef(null),at=o.useRef(null),Ie=o.useRef(null),st=un(N=>N.composerHeight),oa=o.useMemo(()=>({threadContentScrollContainerElementRef:at,footerRootContainerElementRef:Ie}),[]),ia=!W&&!b,ra=Qe(),la=Ke(p),ve=!!p,nt=ve&&la,be=!nt,ca=W&&(!b||!1),ot=b&&O?.type==="landing-page";return e.jsx(mn.Provider,{value:D,children:e.jsx(Rt,{clientThreadId:t,children:e.jsxs(Xe,{clientThreadId:t,children:[B&&e.jsx(go,{}),!Ee&&e.jsx(gn,{children:z!=null&&e.jsx("title",{children:z})}),e.jsx(hn.Provider,{value:le,children:e.jsxs(Ye,{children:[e.jsxs("div",{id:"thread",ref:tt,className:E("group/thread @container/thread h-full w-full",l&&!b&&pn.threadRoot,b&&"overflow-y-auto"),children:[e.jsxs(Hn,{noKeyboard:!0,clientThreadId:t,currentModelConfig:Ne,className:E("composer-parent flex flex-col focus-visible:outline-0",!b&&"h-full"),children:[e.jsxs(fn,{value:oa,children:[!i&&e.jsx(mo,{clientThreadId:t,isEmptyState:U}),e.jsxs("div",{ref:at,className:E("flex shrink basis-auto flex-col overflow-hidden",ia&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",!b&&"grow"),style:{"--composer-height":st?`${st}px`:void 0},children:[ot&&e.jsx(Zn,{systemHint:O.value}),!1,!b&&e.jsx(e.Fragment,{children:!v&&!ta?U?c??e.jsx(e.Fragment,{children:ve?e.jsx(En,{clientThreadId:t,gizmoId:p,onRequestCompletion:le,currentModelId:$}):e.jsx(Bn,{clientThreadId:t,currentModelId:$,isModelLoaded:Q})}):Y||D!=null?aa(e.jsx(Gn,{onRequestCompletion:le,clientThreadId:t,scrollContainerRef:Ae,prefetchNavlink:D,setPrefetchNavlink:L},t)):null:null})]})]}),e.jsxs("div",{id:"thread-bottom-container",className:E("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!b&&!_e&&"mb-4",!b&&be&&W&&(ra?"@lg/thread:grow":"lg:grow"),be&&"flex flex-col"),ref:Ie,children:[y?e.jsx(ho,{clientThreadId:t}):e.jsxs(e.Fragment,{children:[(!W||be)&&e.jsx(Dn,{isGizmoThread:ve,isProjectThread:nt,clientThreadId:t,isNewThread:W,currentModelId:$,onRequestCompletion:le,shouldUseUnifiedComposer:be,isModelLoaded:Q,isVanguardUxEnabled:Ze}),ca&&e.jsx(lo,{clientThreadId:t})]}),_e?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx(xn,{clientThreadId:t})}):null,W&&!b&&!ve&&e.jsx(yn,{showDisclaimer:_e})]})]}),ot&&e.jsx(It,{children:e.jsx(eo,{systemHint:O.value})}),!1]}),!n&&e.jsx(vn,{clientThreadId:t}),e.jsx(bn,{clientThreadId:t,isStaticSharedThread:!1,isDynamicSharedThread:oe}),e.jsx(Sn,{}),e.jsx(wn,{conversationId:t})]})})]})})})},ko=Ga.memo(po);export{co as C,Vn as L,ko as M,No as a};
//# sourceMappingURL=idv9bn2ktilvswkf.js.map
