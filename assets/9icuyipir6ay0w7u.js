import{l as G,a as F,cr as Y,as as A,at as v,P as y,cH as R,bZ as P,cW as W,R as X,fB as q}from"./haannt40upmuwmtk.js";import{e as S,j as t,d as O,r as d,c as K,D as Z}from"./khl8ktun31iepecq.js";import{m as j}from"./foftlufav6ncxtja.js";import{C as $,e as Q}from"./m7dukzpngt1iaaya.js";import{C as z}from"./hpiw4gs5qy1h9qcf.js";import{P as J}from"./nvbvntrqezjv4oi3.js";import{i as w,d as ee,e as te,a as se,b as ae}from"./jf5c1e7milql0vok.js";import{o as oe,bh as ie,bi as le,d1 as T,h9 as ne,d2 as re}from"./n4exq6o15ap1g74l.js";import{L as ce}from"./mn8g7k04zn4r14wt.js";import{c as B}from"./ctjt1fjp3mtlelcg.js";import"./jy1u8exw8iz2slve.js";import"./gy64pge8qevmvg7e.js";import"./kiredz58u04n7vci.js";import"./j0x6g47qjaoq2qus.js";import"./fzrn137102spawew.js";import"./n6r7bbe839ggloti.js";import"./dfz2bdgqh4yduujb.js";import"./fjc8pmrszxm2svae.js";import"./oyqlb501dhlk5b61.js";import"./dryvpx92fe6zevra.js";import"./b9iv65ef6it0bnl8.js";import"./h1em0bjkpkjv8ykw.js";import"./mr4t2sawqo9d3nrg.js";import"./pc2givv05uuq8g6l.js";import"./eiq9v0oy1lyfg3c8.js";import"./o1bzkr20ape07jec.js";const de="https://openai.com/form/report-content/";function ue(e){return`/?model=gpt-4o&sharedCanvas=${e.sharedTextdocId}`}const H=({areButtonsFullWidth:e,sharedTextdoc:s,onClickCodePreview:_,isCodeRunning:r,showRunCodeButton:E,setIsReportModalOpen:c})=>{const{isUnauthenticated:l}=G(),u=oe(),n=w(s.type,s.content),g=E&&(n||ee(s.type)),o=S(),m=ue(s),p=()=>{A.count(v.CANVAS,"shared.click_edit_button",[{key:"type",value:s.type},{key:"authed",value:l?"false":"true"}]),y.logEvent("Canvas Shared Edit Button Clicked",{textdocId:s.sharedTextdocId,textdocType:s.type})};return t.jsx("div",{className:"border-token-border-default flex w-full justify-center border-b-[0.5px] px-6",children:t.jsxs("div",{className:F("flex w-full items-center justify-between gap-4 py-4",!e&&"max-w-[1200px]"),children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-token-text-primary line-clamp-1 text-base font-semibold",children:s.title}),t.jsxs("div",{className:"text-token-text-secondary xs:flex-col flex flex-col gap-1.5 text-xs sm:flex-row",children:[t.jsx("div",{className:"cursor-default",children:t.jsx(Y,{withArrow:!1,align:"start",size:"xsmall",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal *:font-normal",customPrimaryLabelColorStyle:"primary",label:o.formatMessage({id:"RkWIbL",defaultMessage:"The content you’re seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesn’t reflect the views of OpenAI."}),children:o.formatMessage(h.madeWithCanvas)})}),t.jsx("div",{children:l?t.jsx("a",{className:"underline",href:de,target:"_blank",rel:"noreferrer",onClick:()=>{A.count(v.CANVAS,"shared.click_report_button",[{key:"type",value:s.type},{key:"authed",value:"false"}]),y.logEvent("Canvas Shared Unauthed Report Button Clicked",{textdocId:s.sharedTextdocId,textdocType:s.type})},children:o.formatMessage(h.report)}):t.jsx("button",{className:"underline",onClick:()=>{A.count(v.CANVAS,"shared.click_report_button",[{key:"type",value:s.type},{key:"authed",value:"true"}]),y.logEvent("Canvas Shared Authed Report Button Clicked",{textdocId:s.sharedTextdocId,textdocType:s.type}),c(!0)},children:o.formatMessage(h.report)})})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[g&&t.jsx(te,{textdocType:s.type,isCodePreviewable:n,onClick:()=>{A.count(v.CANVAS,"shared.click_run_button",[{key:"type",value:s.type},{key:"authed",value:l?"false":"true"}]),y.logEvent("Canvas Shared Run Button Clicked",{textdocId:s.sharedTextdocId,textdocType:s.type}),_()},isCodeRunning:r}),l?t.jsxs(R,{onClick:()=>{u({authType:"login",callbackUrl:m}),p()},icon:P,children:[t.jsx("span",{className:"hidden sm:inline",children:o.formatMessage(h.editWithChatGPT)}),t.jsx("span",{className:"inline sm:hidden",children:o.formatMessage(h.edit)})]}):t.jsxs(R,{as:"link",to:m,openNewTab:!0,icon:P,onClick:p,children:[t.jsx("span",{className:"hidden sm:inline",children:o.formatMessage(h.editWithChatGPT)}),t.jsx("span",{className:"inline sm:hidden",children:o.formatMessage(h.edit)})]})]})]})})},h=O({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"You’re viewing user-generated content that may be unverified or unsafe."}});var a=(e=>(e.NUDITY_SEXUAL_ADULT="nudity_sexual/adult",e.NUDITY_SEXUAL_ABUSE="nudity_sexual/abuse",e.NUDITY_SEXUAL_NCII="nudity_sexual/ncii",e.CHILD_EXPLOITATION="child_exploitation",e.VIOLENCE_SELF_HARM="violence/self_harm",e.VIOLENCE_EATING="violence/eating_disorder",e.VIOLENCE_TERRORISM="violence/terrorism",e.VIOLENCE_THREATS="violence/threats",e.VIOLENCE_GENDER="violence/gender",e.VIOLENCE_WEAPONS="violence/weapons",e.DECEPTIVE_IMPERSONATION="deceptive/impersonation",e.DECEPTIVE_SCAM="deceptive/scam",e.DECEPTIVE_MISINFO="deceptive/misinfo",e.HATE_SPEECH="hate/speech",e.HATE_BULLYING="hate/bullying",e.HATE_UNWANTED="hate/unwanted",e.HATE_PRIVACY="hate/privacy",e.HATE_SPAM="hate/spam",e.OTHER_ILLEGAL="other/illegal",e.OTHER_UNSAFE="other/unsafe",e.OTHER_ANIMAL="other/animal",e.OTHER_HEALTH="other/health",e.OTHER_POLITICAL="other/political",e.OTHER_DONT_LIKE="other/dont_like",e.IP_COPYRIGHT="ip/copyright",e.IP_TRADEMARK="ip/trademark",e.MODERATION_INCORRECT="moderation/incorrect",e))(a||{});const me=B("Circle12Filled","12",["M6 1a5 5 0 1 0 0 10A5 5 0 0 0 6 1Z"]),pe=B("Circle12Regular","12",["M6 2a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM1 6a5 5 0 1 1 10 0A5 5 0 0 1 1 6Z"]),fe=[{id:"NUDITY_SEXUAL",label:"Nudity & Sexual Content"},{id:"CHILD_EXPLOITATION",label:"Child Exploitation"},{id:"VIOLENCE_SELF_HARM",label:"Violence & Self-Harm"},{id:"DECEPTIVE_SCAM",label:"Deceptive Behavior & Scams"},{id:"HATE_SPAM",label:"Hate, Harrassment & Spam"},{id:"OTHER_ILLEGAL",label:"Other inappropriate or illegal content"},{id:"IP",label:"Intellectual Property"}],Ee={NUDITY_SEXUAL:[{id:a.NUDITY_SEXUAL_ADULT,label:"Adult nudity & sexual content"},{id:a.NUDITY_SEXUAL_ABUSE,label:"Sexual exploitation & abuse"},{id:a.NUDITY_SEXUAL_NCII,label:"Non-consensual or deepfake intimate imagery"}],CHILD_EXPLOITATION:[{id:a.CHILD_EXPLOITATION,label:"Child exploitation"}],VIOLENCE_SELF_HARM:[{id:a.VIOLENCE_SELF_HARM,label:"Suicide & self-harm"},{id:a.VIOLENCE_EATING,label:"Eating disorders"},{id:a.VIOLENCE_TERRORISM,label:"Terrorism"},{id:a.VIOLENCE_THREATS,label:"Threats or incitement to violence"},{id:a.VIOLENCE_GENDER,label:"Gender-based violence"},{id:a.VIOLENCE_WEAPONS,label:"Weapons creation & procurement"}],DECEPTIVE_SCAM:[{id:a.DECEPTIVE_IMPERSONATION,label:"Impersonation"},{id:a.DECEPTIVE_SCAM,label:"Fraud or scam"},{id:a.DECEPTIVE_MISINFO,label:"Misleading information"}],HATE_SPAM:[{id:a.HATE_SPEECH,label:"Hate speech or symbols"},{id:a.HATE_BULLYING,label:"Bullying & harassment"},{id:a.HATE_UNWANTED,label:"Unwanted depiction of real person"},{id:a.HATE_PRIVACY,label:"Privacy violating activities"},{id:a.HATE_SPAM,label:"Spam"}],OTHER_ILLEGAL:[{id:a.OTHER_UNSAFE,label:"Unsafe or prohibited products or activities"},{id:a.OTHER_ANIMAL,label:"Animal harm or welfare issues"},{id:a.OTHER_HEALTH,label:"Risks to public health and safety"},{id:a.OTHER_POLITICAL,label:"Deceptive content of political candidate or election equipment"},{id:a.OTHER_ILLEGAL,label:"Other inappropriate or illegal content"},{id:a.OTHER_DONT_LIKE,label:"I just don’t like it"}],IP:[{id:a.IP_COPYRIGHT,label:"Copyright",url:"https://openai.com/form/copyright-disputes"},{id:a.IP_TRADEMARK,label:"Trademark",url:"https://openai.com/form/trademark-disputes"}]},M={[a.IP_COPYRIGHT]:"https://openai.com/form/copyright-disputes",[a.IP_TRADEMARK]:"https://openai.com/form/trademark-disputes"},C=O({dialogTitle:{id:"reportModal.dialogTitle",defaultMessage:"Why are you reporting this content?"},cancelButton:{id:"reportModal.cancelButton",defaultMessage:"Cancel"},reportButton:{id:"reportModal.reportButton",defaultMessage:"Report"},submittingButton:{id:"reportModal.submittingButton",defaultMessage:"Submitting..."},submitSuccessMessage:{id:"reportModal.submitSuccessMessage",defaultMessage:"Your report has been submitted."},errorMessage:{id:"reportModal.errorMessage",defaultMessage:"An error occurred while submitting your report."},formRedirectMessage:{id:"reportModal.formRedirectMessage",defaultMessage:"Please use this form to report unlawful use of your work:"}}),D=({reportFunction:e,isOpen:s,dismissModal:_})=>{const r=S(),[E,c]=d.useState(null),[l,u]=d.useState(null),[n,g]=d.useState(null),[o,m]=d.useState("toplevel"),p=()=>{u(null),g(null),m("toplevel"),c(null),_()},{mutate:x,isPending:I}=K({mutationFn:async()=>{if(n)return e(n)},onSuccess:()=>{m("success")},onError:()=>{c(r.formatMessage(C.errorMessage))}}),f=n&&M[n];return t.jsxs(W,{testId:"modal-report",isOpen:s,showCloseButton:!0,onClose:p,title:r.formatMessage(C.dialogTitle),type:"success",primaryButton:o==="takedown"&&!f&&t.jsx(R,{onClick:()=>x(),disabled:!n,loading:I,children:I?r.formatMessage(C.submittingButton):r.formatMessage(C.reportButton)}),secondaryButton:o==="takedown"&&!f&&t.jsx(R,{onClick:p,color:"secondary",children:r.formatMessage(C.cancelButton)}),children:[o==="success"&&t.jsx("div",{children:r.formatMessage(C.submitSuccessMessage)}),o==="toplevel"&&t.jsx("div",{className:"flex flex-col gap-4",children:fe.map(i=>t.jsx("div",{className:"flex items-start gap-2",children:t.jsx(R,{className:"text-sm",color:"secondary",onClick:()=>{u(i.id),m("takedown")},children:i.label})},i.id))}),o==="takedown"&&l&&t.jsxs(t.Fragment,{children:[t.jsx(ie,{className:"flex grow flex-col gap-4",children:Ee[l].map(i=>{const b=i.id===n;return t.jsx(le,{className:"flex grow items-center justify-start gap-2",value:i.id,children:t.jsx(ce,{htmlFor:i.id,className:"items-center text-start text-sm",onClick:()=>{g(i.id)},children:t.jsxs("div",{className:"text-token-text-primary flex items-center gap-2",children:[b&&t.jsx(me,{className:"icon-md"}),!b&&t.jsx(pe,{className:"icon-md text-token-text-tertiary"}),i.label]})},i.id)},i.id)})}),f&&t.jsxs("div",{className:"justify-between p-4 text-sm",children:[t.jsx("p",{children:r.formatMessage(C.formRedirectMessage)}),t.jsx("a",{href:M[n],target:"_blank",rel:"noreferrer",className:"text-primary underline",children:M[n]})]}),E&&t.jsx("div",{className:"p-4",children:t.jsx("p",{className:"text-xs text-red-500",children:E})})]})]})};function U(e,s){X.safePost("/textdoc/shared/{shared_textdoc_id}/report",{parameters:{path:{shared_textdoc_id:e.sharedTextdocId}},requestBody:{takedown_type:s}})}function he({sharedTextdoc:e,disableNetworkRequests:s,disablePermissions:_,unsafeAllowAllNetworkRequests:r,showHeader:E=!0}){const c=T(e.type)&&w(e.type,e.content),[l,u]=d.useState(c),[n,g]=d.useState(!1),o=S(),m=d.useRef(null),p=d.useRef(null),x=d.useRef(null),[I,f]=d.useState(!1),i=c&&l,b=()=>{l?(x.current?.stopCode(),u(!1)):(u(!0),x.current?.runCode(e.type,e.content).finally(()=>u(!1)))},{type:V,content:k}=e,L=ne(()=>{c&&(u(!0),x.current?.runCode(V,k))});return d.useEffect(()=>{L()},[L]),e.type===re.DOCUMENT?t.jsxs("div",{className:"flex h-full w-full flex-col items-center overflow-y-auto",children:[t.jsx("div",{className:"bg-token-main-surface-secondary flex w-full grow justify-center",children:t.jsxs("div",{className:"bg-token-main-surface-primary w-full max-w-[1000px]",style:{boxShadow:"0px 4px 32px 0px rgba(0, 0, 0, 0.08)"},children:[E&&t.jsx(H,{areButtonsFullWidth:!1,sharedTextdoc:e,onClickCodePreview:()=>{},isCodeRunning:l,showRunCodeButton:!1,setIsReportModalOpen:f}),t.jsx("div",{className:"px-12 pt-12",children:t.jsx(J,{value:e.content,onChange:()=>{},isDisabled:!0,showChanges:!1,comments:[],diff:null,safeUrls:[],contentRefereces:[],wrapperClassName:"pb-12"})})]})}),t.jsx(D,{reportFunction:N=>{U(e,N)},isOpen:I,dismissModal:()=>f(!1)})]}):T(e.type)?t.jsxs("div",{className:"justify-top flex h-full w-full flex-col justify-between overflow-auto",children:[t.jsxs("div",{className:"flex grow flex-col justify-start overflow-auto",children:[E&&t.jsx(H,{areButtonsFullWidth:!0,sharedTextdoc:e,onClickCodePreview:b,isCodeRunning:l,showRunCodeButton:!c,setIsReportModalOpen:f}),t.jsx("div",{className:i?"grow":void 0,children:t.jsx($,{isShare:!0,ref:p,enableTransition:c,visuallyHidden:!i,title:e.title,disableNetworkRequests:s,disablePermissions:_,unsafeAllowAllNetworkRequests:r})}),!i&&t.jsx("div",{children:t.jsx(z,{id:"published-codemirror",value:e.content,hoveredCommentId:null,focusedCommentId:null,language:se(e.type),readonlyReason:ae({isReadonly:!0,isRequestActive:!1,isTextdocStreaming:!1,isHistoricalVersion:!1,isShowingChanges:!1,isReadonlyFromQueryParam:!1}),editorRef:m,isPreview:!0})})]}),t.jsx("div",{className:!l&&c?"hidden":"",children:t.jsx(Q,{ref:x,isOpen:n,onOpenChange:g,sandboxRef:p,textdocId:"publishedCanvasTextdoc",textdocContent:e.content,textdocTitle:e.title,isTextdocAttachedPending:!1,highlightLine:N=>m.current?.highlightLine(N),isRequestActive:!1,createTextdocTurn:async()=>{}})}),t.jsx(D,{isOpen:I,dismissModal:()=>f(!1),reportFunction:N=>{U(e,N)}})]}):t.jsx("p",{children:o.formatMessage(Ce.unsupportedTextdocType)})}const Ce=O({unsupportedTextdocType:{id:"4hdXQX",defaultMessage:"Content type is not supported"}}),Ye=q(function(){const s=Z();return t.jsx(he,{sharedTextdoc:s})}),We=({data:e})=>{const s=e;return s?[{title:"ChatGPT - "+s.title},{property:"og:site_name",content:"ChatGPT"},{property:"og:title",content:s.title},{property:"og:image",content:j.src},{property:"twitter:card",content:"summary_large_image"}]:[{title:"ChatGPT"},{name:"robots",content:"noindex,nofollow"},{property:"og:image",content:j.src},{property:"og:site_name",content:"ChatGPT"}]};export{Ye as default,We as meta};
//# sourceMappingURL=9icuyipir6ay0w7u.js.map
